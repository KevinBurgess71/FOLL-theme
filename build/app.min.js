var foll = foll || {};
foll.config = {
	// Please add site URL here (no trailing forward slash)

	// siteUrl: "http://localhost/foll",
	siteUrl: "http://foll.jayontraps.com",	
	appPageID: 69	
};
/*!
	Papa Parse
	v4.1.1
	https://github.com/mholt/PapaParse
*/
!function(e){"use strict";function t(t,r){if(r=r||{},r.worker&&w.WORKERS_SUPPORTED){var n=h();return n.userStep=r.step,n.userChunk=r.chunk,n.userComplete=r.complete,n.userError=r.error,r.step=m(r.step),r.chunk=m(r.chunk),r.complete=m(r.complete),r.error=m(r.error),delete r.worker,void n.postMessage({input:t,config:r,workerId:n.id})}var o=null;return"string"==typeof t?o=r.download?new i(r):new a(r):(e.File&&t instanceof File||t instanceof Object)&&(o=new s(r)),o.stream(t)}function r(e,t){function r(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==w.BAD_DELIMITERS.indexOf(t.delimiter)&&(u=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(o=t.quotes),"string"==typeof t.newline&&(f=t.newline))}function n(e){if("object"!=typeof e)return[];var t=[];for(var r in e)t.push(r);return t}function i(e,t){var r="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var n=e instanceof Array&&e.length>0,i=!(t[0]instanceof Array);if(n){for(var a=0;a<e.length;a++)a>0&&(r+=u),r+=s(e[a],a);t.length>0&&(r+=f)}for(var o=0;o<t.length;o++){for(var h=n?e.length:t[o].length,d=0;h>d;d++){d>0&&(r+=u);var c=n&&i?e[d]:d;r+=s(t[o][c],d)}o<t.length-1&&(r+=f)}return r}function s(e,t){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(/"/g,'""');var r="boolean"==typeof o&&o||o instanceof Array&&o[t]||a(e,w.BAD_DELIMITERS)||e.indexOf(u)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1);return r?'"'+e+'"':e}function a(e,t){for(var r=0;r<t.length;r++)if(e.indexOf(t[r])>-1)return!0;return!1}var o=!1,u=",",f="\r\n";if(r(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return i(null,e);if("object"==typeof e[0])return i(n(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:n(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),i(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function n(t){function r(e){var t=_(e);t.chunkSize=parseInt(t.chunkSize),this._handle=new o(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this._completeResults={data:[],errors:[],meta:{}},r.call(this,t),this.parseChunk=function(t){var r=this._partialLine+t;this._partialLine="";var n=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var i=n.meta.cursor;this._finished||(this._partialLine=r.substring(i-this._baseIndex),this._baseIndex=i),n&&n.data&&(this._rowCount+=n.data.length);var s=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(k)e.postMessage({results:n,workerId:w.WORKER_ID,finished:s});else if(m(this._config.chunk)){if(this._config.chunk(n,this._handle),this._paused)return;n=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),!s||!m(this._config.complete)||n&&n.meta.aborted||this._config.complete(this._completeResults),s||n&&n.meta.paused||this._nextChunk(),n}},this._sendError=function(t){m(this._config.error)?this._config.error(t):k&&this._config.error&&e.postMessage({workerId:w.WORKER_ID,error:t,finished:!1})}}function i(e){function t(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=w.RemoteChunkSize),n.call(this,e);var r;this._nextChunk=k?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(r=new XMLHttpRequest,k||(r.onload=g(this._chunkLoaded,this),r.onerror=g(this._chunkError,this)),r.open("GET",this._input,!k),this._config.chunkSize){var e=this._start+this._config.chunkSize-1;r.setRequestHeader("Range","bytes="+this._start+"-"+e),r.setRequestHeader("If-None-Match","webkit-no-cache")}try{r.send()}catch(t){this._chunkError(t.message)}k&&0==r.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==r.readyState){if(r.status<200||r.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>t(r),this.parseChunk(r.responseText)}},this._chunkError=function(e){var t=r.statusText||e;this._sendError(t)}}function s(e){e=e||{},e.chunkSize||(e.chunkSize=w.LocalChunkSize),n.call(this,e);var t,r,i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,r=e.slice||e.webkitSlice||e.mozSlice,i?(t=new FileReader,t.onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var n=Math.min(this._start+this._config.chunkSize,this._input.size);e=r.call(e,this._start,n)}var s=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:s}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function a(e){e=e||{},n.call(this,e);var t,r;this.stream=function(e){return t=e,r=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?r.substr(0,e):r;return r=e?r.substr(e):"",this._finished=!r,this.parseChunk(t)}}}function o(e){function t(){if(b&&c&&(f("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+w.DefaultDelimiter+"'"),c=!1),e.skipEmptyLines)for(var t=0;t<b.data.length;t++)1==b.data[t].length&&""==b.data[t][0]&&b.data.splice(t--,1);return r()&&n(),i()}function r(){return e.header&&0==y.length}function n(){if(b){for(var e=0;r()&&e<b.data.length;e++)for(var t=0;t<b.data[e].length;t++)y.push(b.data[e][t]);b.data.splice(0,1)}}function i(){if(!b||!e.header&&!e.dynamicTyping)return b;for(var t=0;t<b.data.length;t++){for(var r={},n=0;n<b.data[t].length;n++){if(e.dynamicTyping){var i=b.data[t][n];b.data[t][n]="true"==i||"TRUE"==i?!0:"false"==i||"FALSE"==i?!1:o(i)}e.header&&(n>=y.length?(r.__parsed_extra||(r.__parsed_extra=[]),r.__parsed_extra.push(b.data[t][n])):r[y[n]]=b.data[t][n])}e.header&&(b.data[t]=r,n>y.length?f("FieldMismatch","TooManyFields","Too many fields: expected "+y.length+" fields but parsed "+n,t):n<y.length&&f("FieldMismatch","TooFewFields","Too few fields: expected "+y.length+" fields but parsed "+n,t))}return e.header&&b.meta&&(b.meta.fields=y),b}function s(t){for(var r,n,i,s=[",","	","|",";",w.RECORD_SEP,w.UNIT_SEP],a=0;a<s.length;a++){var o=s[a],f=0,h=0;i=void 0;for(var d=new u({delimiter:o,preview:10}).parse(t),c=0;c<d.data.length;c++){var l=d.data[c].length;h+=l,"undefined"!=typeof i?l>1&&(f+=Math.abs(l-i),i=l):i=l}h/=d.data.length,("undefined"==typeof n||n>f)&&h>1.99&&(n=f,r=o)}return e.delimiter=r,{successful:!!r,bestDelimiter:r}}function a(e){e=e.substr(0,1048576);var t=e.split("\r");if(1==t.length)return"\n";for(var r=0,n=0;n<t.length;n++)"\n"==t[n][0]&&r++;return r>=t.length/2?"\r\n":"\r"}function o(e){var t=l.test(e);return t?parseFloat(e):e}function f(e,t,r,n){b.errors.push({type:e,code:t,message:r,row:n})}var h,d,c,l=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,p=this,g=0,v=!1,k=!1,y=[],b={data:[],errors:[],meta:{}};if(m(e.step)){var R=e.step;e.step=function(n){if(b=n,r())t();else{if(t(),0==b.data.length)return;g+=n.data.length,e.preview&&g>e.preview?d.abort():R(b,p)}}}this.parse=function(r,n,i){if(e.newline||(e.newline=a(r)),c=!1,!e.delimiter){var o=s(r);o.successful?e.delimiter=o.bestDelimiter:(c=!0,e.delimiter=w.DefaultDelimiter),b.meta.delimiter=e.delimiter}var f=_(e);return e.preview&&e.header&&f.preview++,h=r,d=new u(f),b=d.parse(h,n,i),t(),v?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return v},this.pause=function(){v=!0,d.abort(),h=h.substr(d.getCharIndex())},this.resume=function(){v=!1,p.streamer.parseChunk(h)},this.aborted=function(){return k},this.abort=function(){k=!0,d.abort(),b.meta.aborted=!0,m(e.complete)&&e.complete(b),h=""}}function u(e){e=e||{};var t=e.delimiter,r=e.newline,n=e.comments,i=e.step,s=e.preview,a=e.fastMode;if(("string"!=typeof t||w.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),n===t)throw"Comment character same as delimiter";n===!0?n="#":("string"!=typeof n||w.BAD_DELIMITERS.indexOf(n)>-1)&&(n=!1),"\n"!=r&&"\r"!=r&&"\r\n"!=r&&(r="\n");var o=0,u=!1;this.parse=function(e,f,h){function d(e){b.push(e),S=o}function c(t){return h?p():(t||(t=e.substr(o)),w.push(t),o=g,d(w),y&&_(),p())}function l(t){o=t,d(w),w=[],O=e.indexOf(r,o)}function p(e){return{data:b,errors:R,meta:{delimiter:t,linebreak:r,aborted:u,truncated:!!e,cursor:S+(f||0)}}}function _(){i(p()),b=[],R=[]}if("string"!=typeof e)throw"Input must be a string";var g=e.length,m=t.length,v=r.length,k=n.length,y="function"==typeof i;o=0;var b=[],R=[],w=[],S=0;if(!e)return p();if(a||a!==!1&&-1===e.indexOf('"')){for(var E=e.split(r),C=0;C<E.length;C++){var w=E[C];if(o+=w.length,C!==E.length-1)o+=r.length;else if(h)return p();if(!n||w.substr(0,k)!=n){if(y){if(b=[],d(w.split(t)),_(),u)return p()}else d(w.split(t));if(s&&C>=s)return b=b.slice(0,s),p(!0)}}return p()}for(var x=e.indexOf(t,o),O=e.indexOf(r,o);;)if('"'!=e[o])if(n&&0===w.length&&e.substr(o,k)===n){if(-1==O)return p();o=O+v,O=e.indexOf(r,o),x=e.indexOf(t,o)}else if(-1!==x&&(O>x||-1===O))w.push(e.substring(o,x)),o=x+m,x=e.indexOf(t,o);else{if(-1===O)break;if(w.push(e.substring(o,O)),l(O+v),y&&(_(),u))return p();if(s&&b.length>=s)return p(!0)}else{var I=o;for(o++;;){var I=e.indexOf('"',I+1);if(-1===I)return h||R.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:b.length,index:o}),c();if(I===g-1){var D=e.substring(o,I).replace(/""/g,'"');return c(D)}if('"'!=e[I+1]){if(e[I+1]==t){w.push(e.substring(o,I).replace(/""/g,'"')),o=I+1+m,x=e.indexOf(t,o),O=e.indexOf(r,o);break}if(e.substr(I+1,v)===r){if(w.push(e.substring(o,I).replace(/""/g,'"')),l(I+1+v),x=e.indexOf(t,o),y&&(_(),u))return p();if(s&&b.length>=s)return p(!0);break}}else I++}}return c()},this.abort=function(){u=!0},this.getCharIndex=function(){return o}}function f(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function h(){if(!w.WORKERS_SUPPORTED)return!1;if(!y&&null===w.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=new e.Worker(w.SCRIPT_PATH||v);return t.onmessage=d,t.id=R++,b[t.id]=t,t}function d(e){var t=e.data,r=b[t.workerId],n=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i=function(){n=!0,c(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},s={abort:i,pause:l,resume:l};if(m(r.userStep)){for(var a=0;a<t.results.data.length&&(r.userStep({data:[t.results.data[a]],errors:t.results.errors,meta:t.results.meta},s),!n);a++);delete t.results}else m(r.userChunk)&&(r.userChunk(t.results,s,t.file),delete t.results)}t.finished&&!n&&c(t.workerId,t.results)}function c(e,t){var r=b[e];m(r.userComplete)&&r.userComplete(t),r.terminate(),delete b[e]}function l(){throw"Not implemented."}function p(t){var r=t.data;if("undefined"==typeof w.WORKER_ID&&r&&(w.WORKER_ID=r.workerId),"string"==typeof r.input)e.postMessage({workerId:w.WORKER_ID,results:w.parse(r.input,r.config),finished:!0});else if(e.File&&r.input instanceof File||r.input instanceof Object){var n=w.parse(r.input,r.config);n&&e.postMessage({workerId:w.WORKER_ID,results:n,finished:!0})}}function _(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var r in e)t[r]=_(e[r]);return t}function g(e,t){return function(){e.apply(t,arguments)}}function m(e){return"function"==typeof e}var v,k=!e.document&&!!e.postMessage,y=!1,b={},R=0,w={};if(w.parse=t,w.unparse=r,w.RECORD_SEP=String.fromCharCode(30),w.UNIT_SEP=String.fromCharCode(31),w.BYTE_ORDER_MARK="﻿",w.BAD_DELIMITERS=["\r","\n",'"',w.BYTE_ORDER_MARK],w.WORKERS_SUPPORTED=!!e.Worker,w.SCRIPT_PATH=null,w.LocalChunkSize=10485760,w.RemoteChunkSize=5242880,w.DefaultDelimiter=",",w.Parser=u,w.ParserHandle=o,w.NetworkStreamer=i,w.FileStreamer=s,w.StringStreamer=a,"undefined"!=typeof module&&module.exports?module.exports=w:m(e.define)&&e.define.amd?e.define(function(){return w}):e.Papa=w,e.jQuery){var S=e.jQuery;S.fn.parse=function(t){function r(){if(0==a.length)return void(m(t.complete)&&t.complete());var e=a[0];if(m(t.before)){var r=t.before(e.file,e.inputElem);if("object"==typeof r){if("abort"==r.action)return void n("AbortError",e.file,e.inputElem,r.reason);if("skip"==r.action)return void i();"object"==typeof r.config&&(e.instanceConfig=S.extend(e.instanceConfig,r.config))}else if("skip"==r)return void i()}var s=e.instanceConfig.complete;e.instanceConfig.complete=function(t){m(s)&&s(t,e.file,e.inputElem),i()},w.parse(e.file,e.instanceConfig)}function n(e,r,n,i){m(t.error)&&t.error({name:e},r,n,i)}function i(){a.splice(0,1),r()}var s=t.config||{},a=[];return this.each(function(){var t="INPUT"==S(this).prop("tagName").toUpperCase()&&"file"==S(this).attr("type").toLowerCase()&&e.FileReader;if(!t||!this.files||0==this.files.length)return!0;for(var r=0;r<this.files.length;r++)a.push({file:this.files[r],inputElem:this,instanceConfig:S.extend({},s)})}),r(),this}}k?e.onmessage=p:w.WORKERS_SUPPORTED&&(v=f(),document.body?document.addEventListener("DOMContentLoaded",function(){y=!0},!0):y=!0),i.prototype=Object.create(n.prototype),i.prototype.constructor=i,s.prototype=Object.create(n.prototype),s.prototype.constructor=s,a.prototype=Object.create(a.prototype),a.prototype.constructor=a}("undefined"!=typeof window?window:this);
//! moment.js
//! version : 2.10.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.moment=b()}(this,function(){"use strict";function a(){return Dc.apply(null,arguments)}function b(a){Dc=a}function c(a){return"[object Array]"===Object.prototype.toString.call(a)}function d(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function f(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function g(a,b){for(var c in b)f(b,c)&&(a[c]=b[c]);return f(b,"toString")&&(a.toString=b.toString),f(b,"valueOf")&&(a.valueOf=b.valueOf),a}function h(a,b,c,d){return za(a,b,c,d,!0).utc()}function i(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function j(a){return null==a._pf&&(a._pf=i()),a._pf}function k(a){if(null==a._isValid){var b=j(a);a._isValid=!isNaN(a._d.getTime())&&b.overflow<0&&!b.empty&&!b.invalidMonth&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function l(a){var b=h(0/0);return null!=a?g(j(b),a):j(b).userInvalidated=!0,b}function m(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=j(b)),"undefined"!=typeof b._locale&&(a._locale=b._locale),Fc.length>0)for(c in Fc)d=Fc[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function n(b){m(this,b),this._d=new Date(+b._d),Gc===!1&&(Gc=!0,a.updateOffset(this),Gc=!1)}function o(a){return a instanceof n||null!=a&&null!=a._isAMomentObject}function p(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function q(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&p(a[d])!==p(b[d]))&&g++;return g+f}function r(){}function s(a){return a?a.toLowerCase().replace("_","-"):a}function t(a){for(var b,c,d,e,f=0;f<a.length;){for(e=s(a[f]).split("-"),b=e.length,c=s(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=u(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&q(e,c,!0)>=b-1)break;b--}f++}return null}function u(a){var b=null;if(!Hc[a]&&"undefined"!=typeof module&&module&&module.exports)try{b=Ec._abbr,require("./locale/"+a),v(b)}catch(c){}return Hc[a]}function v(a,b){var c;return a&&(c="undefined"==typeof b?x(a):w(a,b),c&&(Ec=c)),Ec._abbr}function w(a,b){return null!==b?(b.abbr=a,Hc[a]||(Hc[a]=new r),Hc[a].set(b),v(a),Hc[a]):(delete Hc[a],null)}function x(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return Ec;if(!c(a)){if(b=u(a))return b;a=[a]}return t(a)}function y(a,b){var c=a.toLowerCase();Ic[c]=Ic[c+"s"]=Ic[b]=a}function z(a){return"string"==typeof a?Ic[a]||Ic[a.toLowerCase()]:void 0}function A(a){var b,c,d={};for(c in a)f(a,c)&&(b=z(c),b&&(d[b]=a[c]));return d}function B(b,c){return function(d){return null!=d?(D(this,b,d),a.updateOffset(this,c),this):C(this,b)}}function C(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function D(a,b,c){return a._d["set"+(a._isUTC?"UTC":"")+b](c)}function E(a,b){var c;if("object"==typeof a)for(c in a)this.set(c,a[c]);else if(a=z(a),"function"==typeof this[a])return this[a](b);return this}function F(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function G(a,b,c,d){var e=d;"string"==typeof d&&(e=function(){return this[d]()}),a&&(Mc[a]=e),b&&(Mc[b[0]]=function(){return F(e.apply(this,arguments),b[1],b[2])}),c&&(Mc[c]=function(){return this.localeData().ordinal(e.apply(this,arguments),a)})}function H(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function I(a){var b,c,d=a.match(Jc);for(b=0,c=d.length;c>b;b++)Mc[d[b]]?d[b]=Mc[d[b]]:d[b]=H(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function J(a,b){return a.isValid()?(b=K(b,a.localeData()),Lc[b]||(Lc[b]=I(b)),Lc[b](a)):a.localeData().invalidDate()}function K(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Kc.lastIndex=0;d>=0&&Kc.test(a);)a=a.replace(Kc,c),Kc.lastIndex=0,d-=1;return a}function L(a,b,c){_c[a]="function"==typeof b?b:function(a){return a&&c?c:b}}function M(a,b){return f(_c,a)?_c[a](b._strict,b._locale):new RegExp(N(a))}function N(a){return a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function O(a,b){var c,d=b;for("string"==typeof a&&(a=[a]),"number"==typeof b&&(d=function(a,c){c[b]=p(a)}),c=0;c<a.length;c++)ad[a[c]]=d}function P(a,b){O(a,function(a,c,d,e){d._w=d._w||{},b(a,d._w,d,e)})}function Q(a,b,c){null!=b&&f(ad,a)&&ad[a](b,c._a,c,a)}function R(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function S(a){return this._months[a.month()]}function T(a){return this._monthsShort[a.month()]}function U(a,b,c){var d,e,f;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),d=0;12>d;d++){if(e=h([2e3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(f="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(f.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a))return d;if(c&&"MMM"===b&&this._shortMonthsParse[d].test(a))return d;if(!c&&this._monthsParse[d].test(a))return d}}function V(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),R(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function W(b){return null!=b?(V(this,b),a.updateOffset(this,!0),this):C(this,"Month")}function X(){return R(this.year(),this.month())}function Y(a){var b,c=a._a;return c&&-2===j(a).overflow&&(b=c[cd]<0||c[cd]>11?cd:c[dd]<1||c[dd]>R(c[bd],c[cd])?dd:c[ed]<0||c[ed]>24||24===c[ed]&&(0!==c[fd]||0!==c[gd]||0!==c[hd])?ed:c[fd]<0||c[fd]>59?fd:c[gd]<0||c[gd]>59?gd:c[hd]<0||c[hd]>999?hd:-1,j(a)._overflowDayOfYear&&(bd>b||b>dd)&&(b=dd),j(a).overflow=b),a}function Z(b){a.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+b)}function $(a,b){var c=!0,d=a+"\n"+(new Error).stack;return g(function(){return c&&(Z(d),c=!1),b.apply(this,arguments)},b)}function _(a,b){kd[a]||(Z(b),kd[a]=!0)}function aa(a){var b,c,d=a._i,e=ld.exec(d);if(e){for(j(a).iso=!0,b=0,c=md.length;c>b;b++)if(md[b][1].exec(d)){a._f=md[b][0]+(e[6]||" ");break}for(b=0,c=nd.length;c>b;b++)if(nd[b][1].exec(d)){a._f+=nd[b][0];break}d.match(Yc)&&(a._f+="Z"),ta(a)}else a._isValid=!1}function ba(b){var c=od.exec(b._i);return null!==c?void(b._d=new Date(+c[1])):(aa(b),void(b._isValid===!1&&(delete b._isValid,a.createFromInputFallback(b))))}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ea(a){return fa(a)?366:365}function fa(a){return a%4===0&&a%100!==0||a%400===0}function ga(){return fa(this.year())}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=Aa(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a){return ha(a,this._week.dow,this._week.doy).week}function ja(){return this._week.dow}function ka(){return this._week.doy}function la(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")}function ma(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")}function na(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:ea(a-1)+g}}function oa(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")}function pa(a,b,c){return null!=a?a:null!=b?b:c}function qa(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function ra(a){var b,c,d,e,f=[];if(!a._d){for(d=qa(a),a._w&&null==a._a[dd]&&null==a._a[cd]&&sa(a),a._dayOfYear&&(e=pa(a._a[bd],d[bd]),a._dayOfYear>ea(e)&&(j(a)._overflowDayOfYear=!0),c=da(e,0,a._dayOfYear),a._a[cd]=c.getUTCMonth(),a._a[dd]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=f[b]=d[b];for(;7>b;b++)a._a[b]=f[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[ed]&&0===a._a[fd]&&0===a._a[gd]&&0===a._a[hd]&&(a._nextDay=!0,a._a[ed]=0),a._d=(a._useUTC?da:ca).apply(null,f),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),a._nextDay&&(a._a[ed]=24)}}function sa(a){var b,c,d,e,f,g,h;b=a._w,null!=b.GG||null!=b.W||null!=b.E?(f=1,g=4,c=pa(b.GG,a._a[bd],ha(Aa(),1,4).year),d=pa(b.W,1),e=pa(b.E,1)):(f=a._locale._week.dow,g=a._locale._week.doy,c=pa(b.gg,a._a[bd],ha(Aa(),f,g).year),d=pa(b.w,1),null!=b.d?(e=b.d,f>e&&++d):e=null!=b.e?b.e+f:f),h=na(c,d,e,g,f),a._a[bd]=h.year,a._dayOfYear=h.dayOfYear}function ta(b){if(b._f===a.ISO_8601)return void aa(b);b._a=[],j(b).empty=!0;var c,d,e,f,g,h=""+b._i,i=h.length,k=0;for(e=K(b._f,b._locale).match(Jc)||[],c=0;c<e.length;c++)f=e[c],d=(h.match(M(f,b))||[])[0],d&&(g=h.substr(0,h.indexOf(d)),g.length>0&&j(b).unusedInput.push(g),h=h.slice(h.indexOf(d)+d.length),k+=d.length),Mc[f]?(d?j(b).empty=!1:j(b).unusedTokens.push(f),Q(f,d,b)):b._strict&&!d&&j(b).unusedTokens.push(f);j(b).charsLeftOver=i-k,h.length>0&&j(b).unusedInput.push(h),j(b).bigHour===!0&&b._a[ed]<=12&&b._a[ed]>0&&(j(b).bigHour=void 0),b._a[ed]=ua(b._locale,b._a[ed],b._meridiem),ra(b),Y(b)}function ua(a,b,c){var d;return null==c?b:null!=a.meridiemHour?a.meridiemHour(b,c):null!=a.isPM?(d=a.isPM(c),d&&12>b&&(b+=12),d||12!==b||(b=0),b):b}function va(a){var b,c,d,e,f;if(0===a._f.length)return j(a).invalidFormat=!0,void(a._d=new Date(0/0));for(e=0;e<a._f.length;e++)f=0,b=m({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._f=a._f[e],ta(b),k(b)&&(f+=j(b).charsLeftOver,f+=10*j(b).unusedTokens.length,j(b).score=f,(null==d||d>f)&&(d=f,c=b));g(a,c||b)}function wa(a){if(!a._d){var b=A(a._i);a._a=[b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],ra(a)}}function xa(a){var b,e=a._i,f=a._f;return a._locale=a._locale||x(a._l),null===e||void 0===f&&""===e?l({nullInput:!0}):("string"==typeof e&&(a._i=e=a._locale.preparse(e)),o(e)?new n(Y(e)):(c(f)?va(a):f?ta(a):d(e)?a._d=e:ya(a),b=new n(Y(a)),b._nextDay&&(b.add(1,"d"),b._nextDay=void 0),b))}function ya(b){var f=b._i;void 0===f?b._d=new Date:d(f)?b._d=new Date(+f):"string"==typeof f?ba(b):c(f)?(b._a=e(f.slice(0),function(a){return parseInt(a,10)}),ra(b)):"object"==typeof f?wa(b):"number"==typeof f?b._d=new Date(f):a.createFromInputFallback(b)}function za(a,b,c,d,e){var f={};return"boolean"==typeof c&&(d=c,c=void 0),f._isAMomentObject=!0,f._useUTC=f._isUTC=e,f._l=c,f._i=a,f._f=b,f._strict=d,xa(f)}function Aa(a,b,c,d){return za(a,b,c,d,!1)}function Ba(a,b){var d,e;if(1===b.length&&c(b[0])&&(b=b[0]),!b.length)return Aa();for(d=b[0],e=1;e<b.length;++e)b[e][a](d)&&(d=b[e]);return d}function Ca(){var a=[].slice.call(arguments,0);return Ba("isBefore",a)}function Da(){var a=[].slice.call(arguments,0);return Ba("isAfter",a)}function Ea(a){var b=A(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=x(),this._bubble()}function Fa(a){return a instanceof Ea}function Ga(a,b){G(a,0,0,function(){var a=this.utcOffset(),c="+";return 0>a&&(a=-a,c="-"),c+F(~~(a/60),2)+b+F(~~a%60,2)})}function Ha(a){var b=(a||"").match(Yc)||[],c=b[b.length-1]||[],d=(c+"").match(td)||["-",0,0],e=+(60*d[1])+p(d[2]);return"+"===d[0]?e:-e}function Ia(b,c){var e,f;return c._isUTC?(e=c.clone(),f=(o(b)||d(b)?+b:+Aa(b))-+e,e._d.setTime(+e._d+f),a.updateOffset(e,!1),e):Aa(b).local();return c._isUTC?Aa(b).zone(c._offset||0):Aa(b).local()}function Ja(a){return 15*-Math.round(a._d.getTimezoneOffset()/15)}function Ka(b,c){var d,e=this._offset||0;return null!=b?("string"==typeof b&&(b=Ha(b)),Math.abs(b)<16&&(b=60*b),!this._isUTC&&c&&(d=Ja(this)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),e!==b&&(!c||this._changeInProgress?$a(this,Va(b-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?e:Ja(this)}function La(a,b){return null!=a?("string"!=typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()}function Ma(a){return this.utcOffset(0,a)}function Na(a){return this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(Ja(this),"m")),this}function Oa(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Ha(this._i)),this}function Pa(a){return a=a?Aa(a).utcOffset():0,(this.utcOffset()-a)%60===0}function Qa(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Ra(){if(this._a){var a=this._isUTC?h(this._a):Aa(this._a);return this.isValid()&&q(this._a,a.toArray())>0}return!1}function Sa(){return!this._isUTC}function Ta(){return this._isUTC}function Ua(){return this._isUTC&&0===this._offset}function Va(a,b){var c,d,e,g=a,h=null;return Fa(a)?g={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(g={},b?g[b]=a:g.milliseconds=a):(h=ud.exec(a))?(c="-"===h[1]?-1:1,g={y:0,d:p(h[dd])*c,h:p(h[ed])*c,m:p(h[fd])*c,s:p(h[gd])*c,ms:p(h[hd])*c}):(h=vd.exec(a))?(c="-"===h[1]?-1:1,g={y:Wa(h[2],c),M:Wa(h[3],c),d:Wa(h[4],c),h:Wa(h[5],c),m:Wa(h[6],c),s:Wa(h[7],c),w:Wa(h[8],c)}):null==g?g={}:"object"==typeof g&&("from"in g||"to"in g)&&(e=Ya(Aa(g.from),Aa(g.to)),g={},g.ms=e.milliseconds,g.M=e.months),d=new Ea(g),Fa(a)&&f(a,"_locale")&&(d._locale=a._locale),d}function Wa(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function Xa(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function Ya(a,b){var c;return b=Ia(b,a),a.isBefore(b)?c=Xa(a,b):(c=Xa(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function Za(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(_(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=Va(c,d),$a(this,e,a),this}}function $a(b,c,d,e){var f=c._milliseconds,g=c._days,h=c._months;e=null==e?!0:e,f&&b._d.setTime(+b._d+f*d),g&&D(b,"Date",C(b,"Date")+g*d),h&&V(b,C(b,"Month")+h*d),e&&a.updateOffset(b,g||h)}function _a(a){var b=a||Aa(),c=Ia(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this,Aa(b)))}function ab(){return new n(this)}function bb(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Aa(a),+this>+a):(c=o(a)?+a:+Aa(a),c<+this.clone().startOf(b))}function cb(a,b){var c;return b=z("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=o(a)?a:Aa(a),+a>+this):(c=o(a)?+a:+Aa(a),+this.clone().endOf(b)<c)}function db(a,b,c){return this.isAfter(a,c)&&this.isBefore(b,c)}function eb(a,b){var c;return b=z(b||"millisecond"),"millisecond"===b?(a=o(a)?a:Aa(a),+this===+a):(c=+Aa(a),+this.clone().startOf(b)<=c&&c<=+this.clone().endOf(b))}function fb(a){return 0>a?Math.ceil(a):Math.floor(a)}function gb(a,b,c){var d,e,f=Ia(a,this),g=6e4*(f.utcOffset()-this.utcOffset());return b=z(b),"year"===b||"month"===b||"quarter"===b?(e=hb(this,f),"quarter"===b?e/=3:"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:fb(e)}function hb(a,b){var c,d,e=12*(b.year()-a.year())+(b.month()-a.month()),f=a.clone().add(e,"months");return 0>b-f?(c=a.clone().add(e-1,"months"),d=(b-f)/(f-c)):(c=a.clone().add(e+1,"months"),d=(b-f)/(c-f)),-(e+d)}function ib(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function jb(){var a=this.clone().utc();return 0<a.year()&&a.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():J(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):J(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function kb(b){var c=J(this,b||a.defaultFormat);return this.localeData().postformat(c)}function lb(a,b){return this.isValid()?Va({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function mb(a){return this.from(Aa(),a)}function nb(a,b){return this.isValid()?Va({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()}function ob(a){return this.to(Aa(),a)}function pb(a){var b;return void 0===a?this._locale._abbr:(b=x(a),null!=b&&(this._locale=b),this)}function qb(){return this._locale}function rb(a){switch(a=z(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a&&this.weekday(0),"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this}function sb(a){return a=z(a),void 0===a||"millisecond"===a?this:this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")}function tb(){return+this._d-6e4*(this._offset||0)}function ub(){return Math.floor(+this/1e3)}function vb(){return this._offset?new Date(+this):this._d}function wb(){var a=this;return[a.year(),a.month(),a.date(),a.hour(),a.minute(),a.second(),a.millisecond()]}function xb(){return k(this)}function yb(){return g({},j(this))}function zb(){return j(this).overflow}function Ab(a,b){G(0,[a,a.length],0,b)}function Bb(a,b,c){return ha(Aa([a,11,31+b-c]),b,c).week}function Cb(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")}function Db(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")}function Eb(){return Bb(this.year(),1,4)}function Fb(){var a=this.localeData()._week;return Bb(this.year(),a.dow,a.doy)}function Gb(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)}function Hb(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Ib(a){return this._weekdays[a.day()]}function Jb(a){return this._weekdaysShort[a.day()]}function Kb(a){return this._weekdaysMin[a.day()]}function Lb(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=Aa([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b}function Mb(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=Hb(a,this.localeData()),this.add(a-b,"d")):b}function Nb(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")}function Ob(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)}function Pb(a,b){G(a,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),b)})}function Qb(a,b){return b._meridiemParse}function Rb(a){return"p"===(a+"").toLowerCase().charAt(0)}function Sb(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"}function Tb(a){G(0,[a,3],0,"millisecond")}function Ub(){return this._isUTC?"UTC":""}function Vb(){return this._isUTC?"Coordinated Universal Time":""}function Wb(a){return Aa(1e3*a)}function Xb(){return Aa.apply(null,arguments).parseZone()}function Yb(a,b,c){var d=this._calendar[a];return"function"==typeof d?d.call(b,c):d}function Zb(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b}function $b(){return this._invalidDate}function _b(a){return this._ordinal.replace("%d",a)}function ac(a){return a}function bc(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)}function cc(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)}function dc(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function ec(a,b,c,d){var e=x(),f=h().set(d,b);return e[c](f,a)}function fc(a,b,c,d,e){if("number"==typeof a&&(b=a,a=void 0),a=a||"",null!=b)return ec(a,b,c,e);var f,g=[];for(f=0;d>f;f++)g[f]=ec(a,f,c,e);return g}function gc(a,b){return fc(a,b,"months",12,"month")}function hc(a,b){return fc(a,b,"monthsShort",12,"month")}function ic(a,b){return fc(a,b,"weekdays",7,"day")}function jc(a,b){return fc(a,b,"weekdaysShort",7,"day")}function kc(a,b){return fc(a,b,"weekdaysMin",7,"day")}function lc(){var a=this._data;return this._milliseconds=Rd(this._milliseconds),this._days=Rd(this._days),this._months=Rd(this._months),a.milliseconds=Rd(a.milliseconds),a.seconds=Rd(a.seconds),a.minutes=Rd(a.minutes),a.hours=Rd(a.hours),a.months=Rd(a.months),a.years=Rd(a.years),this}function mc(a,b,c,d){var e=Va(b,c);return a._milliseconds+=d*e._milliseconds,a._days+=d*e._days,a._months+=d*e._months,a._bubble()}function nc(a,b){return mc(this,a,b,1)}function oc(a,b){return mc(this,a,b,-1)}function pc(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;return g.milliseconds=d%1e3,a=fb(d/1e3),g.seconds=a%60,b=fb(a/60),g.minutes=b%60,c=fb(b/60),g.hours=c%24,e+=fb(c/24),h=fb(qc(e)),e-=fb(rc(h)),f+=fb(e/30),e%=30,h+=fb(f/12),f%=12,g.days=e,g.months=f,g.years=h,this}function qc(a){return 400*a/146097}function rc(a){return 146097*a/400}function sc(a){var b,c,d=this._milliseconds;if(a=z(a),"month"===a||"year"===a)return b=this._days+d/864e5,c=this._months+12*qc(b),"month"===a?c:c/12;switch(b=this._days+Math.round(rc(this._months/12)),a){case"week":return b/7+d/6048e5;case"day":return b+d/864e5;case"hour":return 24*b+d/36e5;case"minute":return 1440*b+d/6e4;case"second":return 86400*b+d/1e3;case"millisecond":return Math.floor(864e5*b)+d;default:throw new Error("Unknown unit "+a)}}function tc(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*p(this._months/12)}function uc(a){return function(){return this.as(a)}}function vc(a){return a=z(a),this[a+"s"]()}function wc(a){return function(){return this._data[a]}}function xc(){return fb(this.days()/7)}function yc(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function zc(a,b,c){var d=Va(a).abs(),e=fe(d.as("s")),f=fe(d.as("m")),g=fe(d.as("h")),h=fe(d.as("d")),i=fe(d.as("M")),j=fe(d.as("y")),k=e<ge.s&&["s",e]||1===f&&["m"]||f<ge.m&&["mm",f]||1===g&&["h"]||g<ge.h&&["hh",g]||1===h&&["d"]||h<ge.d&&["dd",h]||1===i&&["M"]||i<ge.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,yc.apply(null,k)}function Ac(a,b){return void 0===ge[a]?!1:void 0===b?ge[a]:(ge[a]=b,!0)}function Bc(a){var b=this.localeData(),c=zc(this,!a,b);return a&&(c=b.pastFuture(+this,c)),b.postformat(c)}function Cc(){var a=he(this.years()),b=he(this.months()),c=he(this.days()),d=he(this.hours()),e=he(this.minutes()),f=he(this.seconds()+this.milliseconds()/1e3),g=this.asSeconds();return g?(0>g?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}var Dc,Ec,Fc=a.momentProperties=[],Gc=!1,Hc={},Ic={},Jc=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Kc=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Lc={},Mc={},Nc=/\d/,Oc=/\d\d/,Pc=/\d{3}/,Qc=/\d{4}/,Rc=/[+-]?\d{6}/,Sc=/\d\d?/,Tc=/\d{1,3}/,Uc=/\d{1,4}/,Vc=/[+-]?\d{1,6}/,Wc=/\d+/,Xc=/[+-]?\d+/,Yc=/Z|[+-]\d\d:?\d\d/gi,Zc=/[+-]?\d+(\.\d{1,3})?/,$c=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_c={},ad={},bd=0,cd=1,dd=2,ed=3,fd=4,gd=5,hd=6;G("M",["MM",2],"Mo",function(){return this.month()+1}),G("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)}),G("MMMM",0,0,function(a){return this.localeData().months(this,a)}),y("month","M"),L("M",Sc),L("MM",Sc,Oc),L("MMM",$c),L("MMMM",$c),O(["M","MM"],function(a,b){b[cd]=p(a)-1}),O(["MMM","MMMM"],function(a,b,c,d){var e=c._locale.monthsParse(a,d,c._strict);null!=e?b[cd]=e:j(c).invalidMonth=a});var id="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),jd="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),kd={};a.suppressDeprecationWarnings=!1;var ld=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,md=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],nd=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],od=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=$("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))}),G(0,["YY",2],0,function(){return this.year()%100}),G(0,["YYYY",4],0,"year"),G(0,["YYYYY",5],0,"year"),G(0,["YYYYYY",6,!0],0,"year"),y("year","y"),L("Y",Xc),L("YY",Sc,Oc),L("YYYY",Uc,Qc),L("YYYYY",Vc,Rc),L("YYYYYY",Vc,Rc),O(["YYYY","YYYYY","YYYYYY"],bd),O("YY",function(b,c){c[bd]=a.parseTwoDigitYear(b)}),a.parseTwoDigitYear=function(a){return p(a)+(p(a)>68?1900:2e3)};var pd=B("FullYear",!1);G("w",["ww",2],"wo","week"),G("W",["WW",2],"Wo","isoWeek"),y("week","w"),y("isoWeek","W"),L("w",Sc),L("ww",Sc,Oc),L("W",Sc),L("WW",Sc,Oc),P(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=p(a)});var qd={dow:0,doy:6};G("DDD",["DDDD",3],"DDDo","dayOfYear"),y("dayOfYear","DDD"),L("DDD",Tc),L("DDDD",Pc),O(["DDD","DDDD"],function(a,b,c){c._dayOfYear=p(a)}),a.ISO_8601=function(){};var rd=$("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var a=Aa.apply(null,arguments);return this>a?this:a}),sd=$("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var a=Aa.apply(null,arguments);return a>this?this:a});Ga("Z",":"),Ga("ZZ",""),L("Z",Yc),L("ZZ",Yc),O(["Z","ZZ"],function(a,b,c){c._useUTC=!0,c._tzm=Ha(a)});var td=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var ud=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,vd=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;Va.fn=Ea.prototype;var wd=Za(1,"add"),xd=Za(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var yd=$("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});G(0,["gg",2],0,function(){return this.weekYear()%100}),G(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Ab("gggg","weekYear"),Ab("ggggg","weekYear"),Ab("GGGG","isoWeekYear"),Ab("GGGGG","isoWeekYear"),y("weekYear","gg"),y("isoWeekYear","GG"),L("G",Xc),L("g",Xc),L("GG",Sc,Oc),L("gg",Sc,Oc),L("GGGG",Uc,Qc),L("gggg",Uc,Qc),L("GGGGG",Vc,Rc),L("ggggg",Vc,Rc),P(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=p(a)}),P(["gg","GG"],function(b,c,d,e){c[e]=a.parseTwoDigitYear(b)}),G("Q",0,0,"quarter"),y("quarter","Q"),L("Q",Nc),O("Q",function(a,b){b[cd]=3*(p(a)-1)}),G("D",["DD",2],"Do","date"),y("date","D"),L("D",Sc),L("DD",Sc,Oc),L("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient}),O(["D","DD"],dd),O("Do",function(a,b){b[dd]=p(a.match(Sc)[0],10)});var zd=B("Date",!0);G("d",0,"do","day"),G("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)}),G("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)}),G("dddd",0,0,function(a){return this.localeData().weekdays(this,a)}),G("e",0,0,"weekday"),G("E",0,0,"isoWeekday"),y("day","d"),y("weekday","e"),y("isoWeekday","E"),L("d",Sc),L("e",Sc),L("E",Sc),L("dd",$c),L("ddd",$c),L("dddd",$c),P(["dd","ddd","dddd"],function(a,b,c){var d=c._locale.weekdaysParse(a);null!=d?b.d=d:j(c).invalidWeekday=a}),P(["d","e","E"],function(a,b,c,d){b[d]=p(a)});var Ad="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Bd="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Cd="Su_Mo_Tu_We_Th_Fr_Sa".split("_");G("H",["HH",2],0,"hour"),G("h",["hh",2],0,function(){return this.hours()%12||12}),Pb("a",!0),Pb("A",!1),y("hour","h"),L("a",Qb),L("A",Qb),L("H",Sc),L("h",Sc),L("HH",Sc,Oc),L("hh",Sc,Oc),O(["H","HH"],ed),O(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a),c._meridiem=a}),O(["h","hh"],function(a,b,c){b[ed]=p(a),j(c).bigHour=!0});var Dd=/[ap]\.?m?\.?/i,Ed=B("Hours",!0);G("m",["mm",2],0,"minute"),y("minute","m"),L("m",Sc),L("mm",Sc,Oc),O(["m","mm"],fd);var Fd=B("Minutes",!1);G("s",["ss",2],0,"second"),y("second","s"),L("s",Sc),L("ss",Sc,Oc),O(["s","ss"],gd);var Gd=B("Seconds",!1);G("S",0,0,function(){return~~(this.millisecond()/100)}),G(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),Tb("SSS"),Tb("SSSS"),y("millisecond","ms"),L("S",Tc,Nc),L("SS",Tc,Oc),L("SSS",Tc,Pc),L("SSSS",Wc),O(["S","SS","SSS","SSSS"],function(a,b){b[hd]=p(1e3*("0."+a))});var Hd=B("Milliseconds",!1);G("z",0,0,"zoneAbbr"),G("zz",0,0,"zoneName");var Id=n.prototype;Id.add=wd,Id.calendar=_a,Id.clone=ab,Id.diff=gb,Id.endOf=sb,Id.format=kb,Id.from=lb,Id.fromNow=mb,Id.to=nb,Id.toNow=ob,Id.get=E,Id.invalidAt=zb,Id.isAfter=bb,Id.isBefore=cb,Id.isBetween=db,Id.isSame=eb,Id.isValid=xb,Id.lang=yd,Id.locale=pb,Id.localeData=qb,Id.max=sd,Id.min=rd,Id.parsingFlags=yb,Id.set=E,Id.startOf=rb,Id.subtract=xd,Id.toArray=wb,Id.toDate=vb,Id.toISOString=jb,Id.toJSON=jb,Id.toString=ib,Id.unix=ub,Id.valueOf=tb,Id.year=pd,Id.isLeapYear=ga,Id.weekYear=Cb,Id.isoWeekYear=Db,Id.quarter=Id.quarters=Gb,Id.month=W,Id.daysInMonth=X,Id.week=Id.weeks=la,Id.isoWeek=Id.isoWeeks=ma,Id.weeksInYear=Fb,Id.isoWeeksInYear=Eb,Id.date=zd,Id.day=Id.days=Mb,Id.weekday=Nb,Id.isoWeekday=Ob,Id.dayOfYear=oa,Id.hour=Id.hours=Ed,Id.minute=Id.minutes=Fd,Id.second=Id.seconds=Gd,Id.millisecond=Id.milliseconds=Hd,Id.utcOffset=Ka,Id.utc=Ma,Id.local=Na,Id.parseZone=Oa,Id.hasAlignedHourOffset=Pa,Id.isDST=Qa,Id.isDSTShifted=Ra,Id.isLocal=Sa,Id.isUtcOffset=Ta,Id.isUtc=Ua,Id.isUTC=Ua,Id.zoneAbbr=Ub,Id.zoneName=Vb,Id.dates=$("dates accessor is deprecated. Use date instead.",zd),Id.months=$("months accessor is deprecated. Use month instead",W),Id.years=$("years accessor is deprecated. Use year instead",pd),Id.zone=$("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",La);var Jd=Id,Kd={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ld={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Md="Invalid date",Nd="%d",Od=/\d{1,2}/,Pd={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",
hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Qd=r.prototype;Qd._calendar=Kd,Qd.calendar=Yb,Qd._longDateFormat=Ld,Qd.longDateFormat=Zb,Qd._invalidDate=Md,Qd.invalidDate=$b,Qd._ordinal=Nd,Qd.ordinal=_b,Qd._ordinalParse=Od,Qd.preparse=ac,Qd.postformat=ac,Qd._relativeTime=Pd,Qd.relativeTime=bc,Qd.pastFuture=cc,Qd.set=dc,Qd.months=S,Qd._months=id,Qd.monthsShort=T,Qd._monthsShort=jd,Qd.monthsParse=U,Qd.week=ia,Qd._week=qd,Qd.firstDayOfYear=ka,Qd.firstDayOfWeek=ja,Qd.weekdays=Ib,Qd._weekdays=Ad,Qd.weekdaysMin=Kb,Qd._weekdaysMin=Cd,Qd.weekdaysShort=Jb,Qd._weekdaysShort=Bd,Qd.weekdaysParse=Lb,Qd.isPM=Rb,Qd._meridiemParse=Dd,Qd.meridiem=Sb,v("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,c=1===p(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),a.lang=$("moment.lang is deprecated. Use moment.locale instead.",v),a.langData=$("moment.langData is deprecated. Use moment.localeData instead.",x);var Rd=Math.abs,Sd=uc("ms"),Td=uc("s"),Ud=uc("m"),Vd=uc("h"),Wd=uc("d"),Xd=uc("w"),Yd=uc("M"),Zd=uc("y"),$d=wc("milliseconds"),_d=wc("seconds"),ae=wc("minutes"),be=wc("hours"),ce=wc("days"),de=wc("months"),ee=wc("years"),fe=Math.round,ge={s:45,m:45,h:22,d:26,M:11},he=Math.abs,ie=Ea.prototype;ie.abs=lc,ie.add=nc,ie.subtract=oc,ie.as=sc,ie.asMilliseconds=Sd,ie.asSeconds=Td,ie.asMinutes=Ud,ie.asHours=Vd,ie.asDays=Wd,ie.asWeeks=Xd,ie.asMonths=Yd,ie.asYears=Zd,ie.valueOf=tc,ie._bubble=pc,ie.get=vc,ie.milliseconds=$d,ie.seconds=_d,ie.minutes=ae,ie.hours=be,ie.days=ce,ie.weeks=xc,ie.months=de,ie.years=ee,ie.humanize=Bc,ie.toISOString=Cc,ie.toString=Cc,ie.toJSON=Cc,ie.locale=pb,ie.localeData=qb,ie.toIsoString=$("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Cc),ie.lang=yd,G("X",0,0,"unix"),G("x",0,0,"valueOf"),L("x",Xc),L("X",Zc),O("X",function(a,b,c){c._d=new Date(1e3*parseFloat(a,10))}),O("x",function(a,b,c){c._d=new Date(p(a))}),a.version="2.10.3",b(Aa),a.fn=Jd,a.min=Ca,a.max=Da,a.utc=h,a.unix=Wb,a.months=gc,a.isDate=d,a.locale=v,a.invalid=l,a.duration=Va,a.isMoment=o,a.weekdays=ic,a.parseZone=Xb,a.localeData=x,a.isDuration=Fa,a.monthsShort=hc,a.weekdaysMin=kc,a.defineLocale=w,a.weekdaysShort=jc,a.normalizeUnits=z,a.relativeTimeThreshold=Ac;var je=a;return je});
/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
(function(){"use strict";var t=this,i=t.Chart,e=function(t){this.canvas=t.canvas,this.ctx=t;var i=function(t,i){return t["offset"+i]?t["offset"+i]:document.defaultView.getComputedStyle(t).getPropertyValue(i)},e=this.width=i(t.canvas,"Width"),n=this.height=i(t.canvas,"Height");t.canvas.width=e,t.canvas.height=n;var e=this.width=t.canvas.width,n=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,s.retinaScale(this),this};e.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},e.types={};var s=e.helpers={},n=s.each=function(t,i,e){var s=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var n;for(n=0;n<t.length;n++)i.apply(e,[t[n],n].concat(s))}else for(var o in t)i.apply(e,[t[o],o].concat(s))},o=s.clone=function(t){var i={};return n(t,function(e,s){t.hasOwnProperty(s)&&(i[s]=e)}),i},a=s.extend=function(t){return n(Array.prototype.slice.call(arguments,1),function(i){n(i,function(e,s){i.hasOwnProperty(s)&&(t[s]=e)})}),t},h=s.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=s.indexOf=function(t,i){if(Array.prototype.indexOf)return t.indexOf(i);for(var e=0;e<t.length;e++)if(t[e]===i)return e;return-1},r=(s.where=function(t,i){var e=[];return s.each(t,function(t){i(t)&&e.push(t)}),e},s.findNextWhere=function(t,i,e){e||(e=-1);for(var s=e+1;s<t.length;s++){var n=t[s];if(i(n))return n}},s.findPreviousWhere=function(t,i,e){e||(e=t.length);for(var s=e-1;s>=0;s--){var n=t[s];if(i(n))return n}},s.inherits=function(t){var i=this,e=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},s=function(){this.constructor=e};return s.prototype=i.prototype,e.prototype=new s,e.extend=r,t&&a(e.prototype,t),e.__super__=i.prototype,e}),c=s.noop=function(){},u=s.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=s.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},p=s.amd="function"==typeof define&&define.amd,f=s.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},g=s.max=function(t){return Math.max.apply(Math,t)},m=s.min=function(t){return Math.min.apply(Math,t)},v=(s.cap=function(t,i,e){if(f(i)){if(t>i)return i}else if(f(e)&&e>t)return e;return t},s.getDecimalPlaces=function(t){return t%1!==0&&f(t)?t.toString().split(".")[1].length:0}),S=s.radians=function(t){return t*(Math.PI/180)},x=(s.getAngleFromPoint=function(t,i){var e=i.x-t.x,s=i.y-t.y,n=Math.sqrt(e*e+s*s),o=2*Math.PI+Math.atan2(s,e);return 0>e&&0>s&&(o+=2*Math.PI),{angle:o,distance:n}},s.aliasPixel=function(t){return t%2===0?0:.5}),y=(s.splineCurve=function(t,i,e,s){var n=Math.sqrt(Math.pow(i.x-t.x,2)+Math.pow(i.y-t.y,2)),o=Math.sqrt(Math.pow(e.x-i.x,2)+Math.pow(e.y-i.y,2)),a=s*n/(n+o),h=s*o/(n+o);return{inner:{x:i.x-a*(e.x-t.x),y:i.y-a*(e.y-t.y)},outer:{x:i.x+h*(e.x-t.x),y:i.y+h*(e.y-t.y)}}},s.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),C=(s.calculateScaleRange=function(t,i,e,s,n){var o=2,a=Math.floor(i/(1.5*e)),h=o>=a,l=g(t),r=m(t);l===r&&(l+=.5,r>=.5&&!s?r-=.5:l+=.5);for(var c=Math.abs(l-r),u=y(c),d=Math.ceil(l/(1*Math.pow(10,u)))*Math.pow(10,u),p=s?0:Math.floor(r/(1*Math.pow(10,u)))*Math.pow(10,u),f=d-p,v=Math.pow(10,u),S=Math.round(f/v);(S>a||a>2*S)&&!h;)if(S>a)v*=2,S=Math.round(f/v),S%1!==0&&(h=!0);else if(n&&u>=0){if(v/2%1!==0)break;v/=2,S=Math.round(f/v)}else v/=2,S=Math.round(f/v);return h&&(S=o,v=f/S),{steps:S,stepValue:v,min:p,max:p+S*v}},s.template=function(t,i){function e(t,i){var e=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):s[t]=s[t];return i?e(i):e}if(t instanceof Function)return t(i);var s={};return e(t,i)}),w=(s.generateLabels=function(t,i,e,s){var o=new Array(i);return labelTemplateString&&n(o,function(i,n){o[n]=C(t,{value:e+s*(n+1)})}),o},s.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-0.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-0.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-0.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-0.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)))},easeOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:1==(t/=1)?1:(e||(e=.3),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),s*Math.pow(2,-10*t)*Math.sin(2*(1*t-i)*Math.PI/e)+1)},easeInOutElastic:function(t){var i=1.70158,e=0,s=1;return 0===t?0:2==(t/=.5)?1:(e||(e=.3*1.5),s<Math.abs(1)?(s=1,i=e/4):i=e/(2*Math.PI)*Math.asin(1/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e):s*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-i)*Math.PI/e)*.5+1)},easeInBack:function(t){var i=1.70158;return 1*(t/=1)*t*((i+1)*t-i)},easeOutBack:function(t){var i=1.70158;return 1*((t=t/1-1)*t*((i+1)*t+i)+1)},easeInOutBack:function(t){var i=1.70158;return(t/=.5)<1?.5*t*t*(((i*=1.525)+1)*t-i):.5*((t-=2)*t*(((i*=1.525)+1)*t+i)+2)},easeInBounce:function(t){return 1-w.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*w.easeInBounce(2*t):.5*w.easeOutBounce(2*t-1)+.5}}),b=s.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),P=s.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),L=(s.animationLoop=function(t,i,e,s,n,o){var a=0,h=w[e]||w.linear,l=function(){a++;var e=a/i,r=h(e);t.call(o,r,e,a),s.call(o,r,e),i>a?o.animationFrame=b(l):n.apply(o)};b(l)},s.getRelativePosition=function(t){var i,e,s=t.originalEvent||t,n=t.currentTarget||t.srcElement,o=n.getBoundingClientRect();return s.touches?(i=s.touches[0].clientX-o.left,e=s.touches[0].clientY-o.top):(i=s.clientX-o.left,e=s.clientY-o.top),{x:i,y:e}},s.addEvent=function(t,i,e){t.addEventListener?t.addEventListener(i,e):t.attachEvent?t.attachEvent("on"+i,e):t["on"+i]=e}),k=s.removeEvent=function(t,i,e){t.removeEventListener?t.removeEventListener(i,e,!1):t.detachEvent?t.detachEvent("on"+i,e):t["on"+i]=c},F=(s.bindEvents=function(t,i,e){t.events||(t.events={}),n(i,function(i){t.events[i]=function(){e.apply(t,arguments)},L(t.chart.canvas,i,t.events[i])})},s.unbindEvents=function(t,i){n(i,function(i,e){k(t.chart.canvas,e,i)})}),R=s.getMaximumWidth=function(t){var i=t.parentNode;return i.clientWidth},T=s.getMaximumHeight=function(t){var i=t.parentNode;return i.clientHeight},A=(s.getMaximumSize=s.getMaximumWidth,s.retinaScale=function(t){var i=t.ctx,e=t.canvas.width,s=t.canvas.height;window.devicePixelRatio&&(i.canvas.style.width=e+"px",i.canvas.style.height=s+"px",i.canvas.height=s*window.devicePixelRatio,i.canvas.width=e*window.devicePixelRatio,i.scale(window.devicePixelRatio,window.devicePixelRatio))}),M=s.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},W=s.fontString=function(t,i,e){return i+" "+t+"px "+e},z=s.longestText=function(t,i,e){t.font=i;var s=0;return n(e,function(i){var e=t.measureText(i).width;s=e>s?e:s}),s},B=s.drawRoundedRectangle=function(t,i,e,s,n,o){t.beginPath(),t.moveTo(i+o,e),t.lineTo(i+s-o,e),t.quadraticCurveTo(i+s,e,i+s,e+o),t.lineTo(i+s,e+n-o),t.quadraticCurveTo(i+s,e+n,i+s-o,e+n),t.lineTo(i+o,e+n),t.quadraticCurveTo(i,e+n,i,e+n-o),t.lineTo(i,e+o),t.quadraticCurveTo(i,e,i+o,e),t.closePath()};e.instances={},e.Type=function(t,i,s){this.options=i,this.chart=s,this.id=u(),e.instances[this.id]=this,i.responsive&&this.resize(),this.initialize.call(this,t)},a(e.Type.prototype,{initialize:function(){return this},clear:function(){return M(this.chart),this},stop:function(){return P(this.animationFrame),this},resize:function(t){this.stop();var i=this.chart.canvas,e=R(this.chart.canvas),s=this.options.maintainAspectRatio?e/this.chart.aspectRatio:T(this.chart.canvas);return i.width=this.chart.width=e,i.height=this.chart.height=s,A(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:c,render:function(t){return t&&this.reflow(),this.options.animation&&!t?s.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return C(this.options.legendTemplate,this)},destroy:function(){this.clear(),F(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete e.instances[this.id]},showTooltip:function(t,i){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var i=!1;return t.length!==this.activeElements.length?i=!0:(n(t,function(t,e){t!==this.activeElements[e]&&(i=!0)},this),i)}.call(this,t);if(o||i){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,h,r=this.datasets.length-1;r>=0&&(a=this.datasets[r].points||this.datasets[r].bars||this.datasets[r].segments,h=l(a,t[0]),-1===h);r--);var c=[],u=[],d=function(){var t,i,e,n,o,a=[],l=[],r=[];return s.each(this.datasets,function(i){t=i.points||i.bars||i.segments,t[h]&&t[h].hasValue()&&a.push(t[h])}),s.each(a,function(t){l.push(t.x),r.push(t.y),c.push(s.template(this.options.multiTooltipTemplate,t)),u.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=m(r),e=g(r),n=m(l),i=g(l),{x:n>this.chart.width/2?n:i,y:(o+e)/2}}.call(this,h);new e.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:c,legendColors:u,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else n(t,function(t){var i=t.tooltipPosition();new e.Tooltip({x:Math.round(i.x),y:Math.round(i.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:C(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),e.Type.extend=function(t){var i=this,s=function(){return i.apply(this,arguments)};if(s.prototype=o(i.prototype),a(s.prototype,t),s.extend=e.Type.extend,t.name||i.prototype.name){var n=t.name||i.prototype.name,l=e.defaults[i.prototype.name]?o(e.defaults[i.prototype.name]):{};e.defaults[n]=a(l,t.defaults),e.types[n]=s,e.prototype[n]=function(t,i){var o=h(e.defaults.global,e.defaults[n],i||{});return new s(t,o,this)}}else d("Name not provided for this chart, so it hasn't been registered");return i},e.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(e.Element.prototype,{initialize:function(){},restore:function(t){return t?n(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return n(t,function(t,i){this._saved[i]=this[i],this[i]=t},this),this},transition:function(t,i){return n(t,function(t,e){this[e]=(t-this._saved[e])*i+this._saved[e]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return f(this.value)}}),e.Element.extend=r,e.Point=e.Element.extend({display:!0,inRange:function(t,i){var e=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(i-this.y,2)<Math.pow(e,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),e.Arc=e.Element.extend({inRange:function(t,i){var e=s.getAngleFromPoint(this,{x:t,y:i}),n=e.angle>=this.startAngle&&e.angle<=this.endAngle,o=e.distance>=this.innerRadius&&e.distance<=this.outerRadius;return n&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,i=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*i,y:this.y+Math.sin(t)*i}},draw:function(t){var i=this.ctx;i.beginPath(),i.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),i.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),i.closePath(),i.strokeStyle=this.strokeColor,i.lineWidth=this.strokeWidth,i.fillStyle=this.fillColor,i.fill(),i.lineJoin="bevel",this.showStroke&&i.stroke()}}),e.Rectangle=e.Element.extend({draw:function(){var t=this.ctx,i=this.width/2,e=this.x-i,s=this.x+i,n=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(e+=o,s-=o,n+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(e,this.base),t.lineTo(e,n),t.lineTo(s,n),t.lineTo(s,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,i){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&i>=this.y&&i<=this.base}}),e.Tooltip=e.Element.extend({draw:function(){var t=this.chart.ctx;t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var i=this.caretPadding=2,e=t.measureText(this.text).width+2*this.xPadding,s=this.fontSize+2*this.yPadding,n=s+this.caretHeight+i;this.x+e/2>this.chart.width?this.xAlign="left":this.x-e/2<0&&(this.xAlign="right"),this.y-n<0&&(this.yAlign="below");var o=this.x-e/2,a=this.y-n;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-i),t.lineTo(this.x+this.caretHeight,this.y-(i+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(i+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+i+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+i),t.lineTo(this.x+this.caretHeight,this.y+i+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+i+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-e+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}B(t,o,a,e,s,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+e/2,a+s/2)}}}),e.MultiTooltip=e.Element.extend({initialize:function(){this.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=W(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,i=z(this.ctx,this.font,this.labels)+this.fontSize+3,e=g([i,t]);this.width=e+2*this.xPadding;var s=this.height/2;this.y-s<0?this.y=s:this.y+s>this.chart.height&&(this.y=this.chart.height-s),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var i=this.y-this.height/2+this.yPadding,e=t-1;return 0===t?i+this.titleFontSize/2:i+(1.5*this.fontSize*e+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{B(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,s.each(this.labels,function(i,e){t.fillStyle=this.textColor,t.fillText(i,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(e+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[e].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(e+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),e.Scale=e.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?z(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,i=this.endPoint-this.startPoint;for(this.calculateYRange(i),this.buildYLabels(),this.calculateXLabelRotation();i>this.endPoint-this.startPoint;)i=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(i),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,i,e=this.ctx.measureText(this.xLabels[0]).width,s=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=s/2+3,this.xScalePaddingLeft=e/2>this.yLabelWidth+10?e/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var n,o=z(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)n=Math.cos(S(this.xLabelRotation)),t=n*e,i=n*s,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=n*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(S(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:c,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var i=this.drawingArea()/(this.min-this.max);return this.endPoint-i*(t-this.min)},calculateX:function(t){var i=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),e=i/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),s=e*t+this.xScalePaddingLeft;return this.offsetGridLines&&(s+=e/2),Math.round(s)},update:function(t){s.extend(this,t),this.fit()},draw:function(){var t=this.ctx,i=(this.endPoint-this.startPoint)/this.steps,e=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,n(this.yLabels,function(n,o){var a=this.endPoint-i*o,h=Math.round(a),l=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(n,e-10,a),0!==o||l||(l=!0),l&&t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),h+=s.aliasPixel(t.lineWidth),l&&(t.moveTo(e,h),t.lineTo(this.width,h),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(e-5,h),t.lineTo(e,h),t.stroke(),t.closePath()},this),n(this.xLabels,function(i,e){var s=this.calculateX(e)+x(this.lineWidth),n=this.calculateX(e-(this.offsetGridLines?.5:0))+x(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==e||a||(a=!0),a&&t.beginPath(),e>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a&&(t.moveTo(n,this.endPoint),t.lineTo(n,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n,this.endPoint),t.lineTo(n,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(s,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*S(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(i,0,0),t.restore()},this))}}),e.RadialScale=e.Element.extend({initialize:function(){this.size=m([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var i=this.drawingArea/(this.max-this.min);return(t-this.min)*i},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),i=0;i<=this.steps;i++)this.yLabels.push(C(this.templateString,{value:(this.min+i*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,i,e,s,n,o,a,h,l,r,c,u,d=m([this.height/2-this.pointLabelFontSize-5,this.width/2]),p=this.width,g=0;for(this.ctx.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),i=0;i<this.valuesCount;i++)t=this.getPointPosition(i,d),e=this.ctx.measureText(C(this.templateString,{value:this.labels[i]})).width+5,0===i||i===this.valuesCount/2?(s=e/2,t.x+s>p&&(p=t.x+s,n=i),t.x-s<g&&(g=t.x-s,a=i)):i<this.valuesCount/2?t.x+e>p&&(p=t.x+e,n=i):i>this.valuesCount/2&&t.x-e<g&&(g=t.x-e,a=i);l=g,r=Math.ceil(p-this.width),o=this.getIndexAngle(n),h=this.getIndexAngle(a),c=r/Math.sin(o+Math.PI/2),u=l/Math.sin(h+Math.PI/2),c=f(c)?c:0,u=f(u)?u:0,this.drawingArea=d-(u+c)/2,this.setCenterPoint(u,c)},setCenterPoint:function(t,i){var e=this.width-i-this.drawingArea,s=t+this.drawingArea;this.xCenter=(s+e)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var i=2*Math.PI/this.valuesCount;return t*i-Math.PI/2},getPointPosition:function(t,i){var e=this.getIndexAngle(t);return{x:Math.cos(e)*i+this.xCenter,y:Math.sin(e)*i+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(n(this.yLabels,function(i,e){if(e>0){var s,n=e*(this.drawingArea/this.steps),o=this.yCenter-n;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,n,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)s=this.getPointPosition(a,this.calculateCenterOffset(this.min+e*this.stepValue)),0===a?t.moveTo(s.x,s.y):t.lineTo(s.x,s.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=W(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var h=t.measureText(i).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-h/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,h+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(i,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var i=this.valuesCount-1;i>=0;i--){if(this.angleLineWidth>0){var e=this.getPointPosition(i,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(e.x,e.y),t.stroke(),t.closePath()}var s=this.getPointPosition(i,this.calculateCenterOffset(this.max)+5);t.font=W(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,h=a/2,l=h>i||i>o-h,r=i===h||i===o-h;t.textAlign=0===i?"center":i===a?"center":a>i?"left":"right",t.textBaseline=r?"middle":l?"bottom":"top",t.fillText(this.labels[i],s.x,s.y)}}}}}),s.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){n(e.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),p?define(function(){return e}):"object"==typeof module&&module.exports&&(module.exports=e),t.Chart=e,e.noConflict=function(){return t.Chart=i,e}}).call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Bar",defaults:s,initialize:function(t){var s=this.options;this.ScaleClass=i.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,i,e){var n=this.calculateBaseWidth(),o=this.calculateX(e)-n/2,a=this.calculateBarWidth(t);return o+a*i+i*s.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*s.barValueSpacing},calculateBarWidth:function(t){var i=this.calculateBaseWidth()-(t-1)*s.barDatasetSpacing;return i/t}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),this.BarClass=i.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,bars:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.bars.push(new this.BarClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.strokeColor,fillColor:i.fillColor,highlightFill:i.highlightFill||i.fillColor,highlightStroke:i.highlightStroke||i.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,i,s){e.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,s,i),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){e.each(this.datasets,function(i,s){e.each(i.bars,t,this,s)},this)},getBarsAtEvent:function(t){for(var i,s=[],n=e.getRelativePosition(t),o=function(t){s.push(t.bars[i])},a=0;a<this.datasets.length;a++)for(i=0;i<this.datasets[a].bars.length;i++)if(this.datasets[a].bars[i].inRange(n.x,n.y))return e.each(this.datasets,o),s;return s},buildScale:function(t){var i=this,s=function(){var t=[];return i.eachBars(function(i){t.push(i.value)}),t},n={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(s(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(n,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(n)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].bars.push(new this.BarClass({value:t,label:i,x:this.scale.calculateBarX(this.datasets.length,e,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[e].strokeColor,fillColor:this.datasets[e].fillColor}))
},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){e.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();this.chart.ctx;this.scale.draw(i),e.each(this.datasets,function(t,s){e.each(t.bars,function(t,e){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,s,e),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},i).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Doughnut",defaults:s,initialize:function(t){this.segments=[],this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=i.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.calculateTotal(t),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),e||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),e.each(this.activeElements,function(t){t.restore(["fillColor"])}),e.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(e.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,e.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var i=t?t:1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},i),t.endAngle=t.startAngle+t.circumference,t.draw(),0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle)},this)}}),i.types.Doughnut.extend({name:"Pie",defaults:e.merge(s,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"Line",defaults:s,initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,i){e.extend(t,{x:this.scale.calculateX(i),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),e.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.datasets,function(t){e.each(t.points,function(t){t.inRange(s.x,s.y)&&i.push(t)})},this),i},buildScale:function(t){var s=this,n=function(){var t=[];return s.eachPoints(function(i){t.push(i.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var i=e.calculateScaleRange(n(),t,this.fontSize,this.beginAtZero,this.integersOnly);e.extend(this,i)},xLabels:t,font:e.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&e.extend(o,{calculateYRange:e.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new i.Scale(o)},addData:function(t,i){e.each(t,function(t,e){this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.addXLabel(i),this.update()},removeData:function(){this.scale.removeXLabel(),e.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=e.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var i=t||1;this.clear();var s=this.chart.ctx,n=function(t){return null!==t.value},o=function(t,i,s){return e.findNextWhere(i,n,s)||t},a=function(t,i,s){return e.findPreviousWhere(i,n,s)||t};this.scale.draw(i),e.each(this.datasets,function(t){var h=e.where(t.points,n);e.each(t.points,function(t,e){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(e)},i)},this),this.options.bezierCurve&&e.each(h,function(t,i){var s=i>0&&i<h.length-1?this.options.bezierCurveTension:0;t.controlPoints=e.splineCurve(a(t,h,i),t,o(t,h,i),s),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(h,function(t,i){if(0===i)s.moveTo(t.x,t.y);else if(this.options.bezierCurve){var e=a(t,h,i);s.bezierCurveTo(e.controlPoints.outer.x,e.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else s.lineTo(t.x,t.y)},this),s.stroke(),this.options.datasetFill&&h.length>0&&(s.lineTo(h[h.length-1].x,this.scale.endPoint),s.lineTo(h[0].x,this.scale.endPoint),s.fillStyle=t.fillColor,s.closePath(),s.fill()),e.each(h,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers,s={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};i.Type.extend({name:"PolarArea",defaults:s,initialize:function(t){this.segments=[],this.SegmentArc=i.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),e.each(t,function(t,i){this.addData(t,i,!0)},this),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];e.each(this.segments,function(t){t.restore(["fillColor"])}),e.each(i,function(t){t.fillColor=t.highlightColor}),this.showTooltip(i)}),this.render()},getSegmentsAtEvent:function(t){var i=[],s=e.getRelativePosition(t);return e.each(this.segments,function(t){t.inRange(s.x,s.y)&&i.push(t)},this),i},addData:function(t,i,e){var s=i||this.segments.length;this.segments.splice(s,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),e||(this.reflow(),this.update())},removeData:function(t){var i=e.isNumber(t)?t:this.segments.length-1;this.segments.splice(i,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,e.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var i=[];e.each(t,function(t){i.push(t.value)});var s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s,{size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),e.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),e.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),e.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var i=t||1;this.clear(),e.each(this.segments,function(t,e){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},i),t.endAngle=t.startAngle+t.circumference,0===e&&(t.startAngle=1.5*Math.PI),e<this.segments.length-1&&(this.segments[e+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,i=t.Chart,e=i.helpers;i.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=i.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&e.bindEvents(this,this.options.tooltipEvents,function(t){var i="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),e.each(i,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(i)}),e.each(t.datasets,function(i){var s={label:i.label||null,fillColor:i.fillColor,strokeColor:i.strokeColor,pointColor:i.pointColor,pointStrokeColor:i.pointStrokeColor,points:[]};this.datasets.push(s),e.each(i.data,function(e,n){var o;this.scale.animation||(o=this.scale.getPointPosition(n,this.scale.calculateCenterOffset(e))),s.points.push(new this.PointClass({value:e,label:t.labels[n],datasetLabel:i.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:i.pointStrokeColor,fillColor:i.pointColor,highlightFill:i.pointHighlightFill||i.pointColor,highlightStroke:i.pointHighlightStroke||i.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){e.each(this.datasets,function(i){e.each(i.points,t,this)},this)},getPointsAtEvent:function(t){var i=e.getRelativePosition(t),s=e.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},i),n=2*Math.PI/this.scale.valuesCount,o=Math.round((s.angle-1.5*Math.PI)/n),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),s.distance<=this.scale.drawingArea&&e.each(this.datasets,function(t){a.push(t.points[o])}),a},buildScale:function(t){this.scale=new i.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var i=function(){var i=[];return e.each(t,function(t){t.data?i=i.concat(t.data):e.each(t.points,function(t){i.push(t.value)})}),i}(),s=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:e.calculateScaleRange(i,e.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);e.extend(this.scale,s)},addData:function(t,i){this.scale.valuesCount++,e.each(t,function(t,e){var s=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[e].points.push(new this.PointClass({value:t,label:i,x:s.x,y:s.y,strokeColor:this.datasets[e].pointStrokeColor,fillColor:this.datasets[e].pointColor}))},this),this.scale.labels.push(i),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),e.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){e.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:e.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var i=t||1,s=this.chart.ctx;this.clear(),this.scale.draw(),e.each(this.datasets,function(t){e.each(t.points,function(t,e){t.hasValue()&&t.transition(this.scale.getPointPosition(e,this.scale.calculateCenterOffset(t.value)),i)},this),s.lineWidth=this.options.datasetStrokeWidth,s.strokeStyle=t.strokeColor,s.beginPath(),e.each(t.points,function(t,i){0===i?s.moveTo(t.x,t.y):s.lineTo(t.x,t.y)},this),s.closePath(),s.stroke(),s.fillStyle=t.fillColor,s.fill(),e.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this);
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.selectivity=e()}}(function(){return function e(t,i,s){function n(r,l){if(!i[r]){if(!t[r]){var u="function"==typeof require&&require;if(!l&&u)return u(r,!0);if(o)return o(r,!0);var h=new Error("Cannot find module '"+r+"'");throw h.code="MODULE_NOT_FOUND",h}var a=i[r]={exports:{}};t[r][0].call(a.exports,function(e){var i=t[r][1][e];return n(i?i:e)},a,a.exports,e,t,i,s)}return i[r].exports}for(var o="function"==typeof require&&require,r=0;r<s.length;r++)n(s[r]);return n}({1:[function(e,t){e(5),e(6),e(7),e(9),e(10),e(11),e(12),e(13),e(14),e(15),e(16),e(17),e(18),e(19),t.exports=e(8)},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,5:5,6:6,7:7,8:8,9:9}],2:[function(e,t){"use strict";function i(){this._events=[],this.delegateEvents()}var s=window.jQuery||window.Zepto;s.extend(i.prototype,{delegateEvents:function(){this.undelegateEvents(),s.each(this.events,function(e,t){var i,n=e.indexOf(" ");n>-1&&(i=e.slice(n+1),e=e.slice(0,n)),"string"===s.type(t)&&(t=this[t]),t=t.bind(this),i?this.$el.on(e,i,t):this.$el.on(e,t),this._events.push({event:e,selector:i,listener:t})}.bind(this))},undelegateEvents:function(){this._events.forEach(function(e){e.selector?this.$el.off(e.event,e.selector,e.listener):this.$el.off(e.event,e.listener)},this),this._events=[]}}),t.exports=i},{jquery:"jquery"}],3:[function(e,t){"use strict";function i(e,t){function i(){var n=t-(s()-l);if(0>=n||n>t){var c=h;u=h=void 0,c&&(a=s(),r=e.apply(null,o),u||(o=null))}else u=setTimeout(i,n)}function n(){return o=arguments,l=s(),h=!0,u||(u=setTimeout(i,t)),r}var o,r,l,u,h,a=0;return t=0>t?0:+t||0,n}var s=Date.now;t.exports=i},{}],4:[function(e,t){"use strict";function i(e){return n[e]}function s(e){return e?String(e).replace(o,i):""}var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o=new RegExp("["+Object.keys(n).join("")+"]","g");t.exports=s},{}],5:[function(e){"use strict";var t=window.jQuery||window.Zepto,i=e(3),s=e(8);e(13),s.OptionListeners.unshift(function(e,n){var o=n.ajax;if(o&&o.url){var r=o.formatError||s.Locale.ajaxError,l=o.minimumInputLength||0,u=o.params,h=o.processItem||function(e){return e},a=o.quietMillis||0,c=o.results||function(e){return{results:e,more:!1}},d=o.transport||t.ajax;a&&(d=i(d,a)),n.query=function(i){var n=i.offset,a=i.term;if(a.length<l)i.error(s.Locale.needMoreCharacters(l-a.length));else{e.dropdown.showLoading();var p=o.url instanceof Function?o.url():o.url;u&&(p+=(p.indexOf("?")>-1?"&":"?")+t.param(u(a,n)));var f=o.success,v=o.error;d(t.extend({},o,{url:p,success:function(e,t,s){f&&f(e,t,s);var o=c(e,n);o.results=o.results.map(h),i.callback(o)},error:function(e,t,s){v&&v(e,t,s),i.error(r(a,e,t,s),{escape:!1})}}))}}}})},{13:13,3:3,8:8,jquery:"jquery"}],6:[function(e){"use strict";var t=e(8),i=0;t.OptionListeners.push(function(e,t){var s=t.query;s&&(t.query=function(e){i++;var t=i,n=e.callback,o=e.error;e.callback=function(){t===i&&n.apply(null,arguments)},e.error=function(){t===i&&o.apply(null,arguments)},s(e)})})},{8:8}],7:[function(e){"use strict";var t=window.jQuery||window.Zepto,i=e(10);t.extend(i.prototype,{removeCloseHandler:function(){this._$backdrop&&!this.parentMenu&&(this._$backdrop.remove(),this._$backdrop=null)},setupCloseHandler:function(){var e;this.parentMenu?e=this.parentMenu._$backdrop:(e=t("<div>").addClass("selectivity-backdrop"),t("body").append(e)),e.on("click",this.close.bind(this)),this._$backdrop=e}})},{10:10,jquery:"jquery"}],8:[function(e,t){"use strict";function i(e,t){var i;return this.each(function(){var o=this.selectivity;if(o){if("string"!==n.type(e)&&(t=e,e="setOptions"),"function"!==n.type(o[e]))throw new Error("Unknown method: "+e);void 0===i&&(i=o[e].call(o,t))}else if("string"===n.type(e)){if("destroy"!==e)throw new Error("Cannot call method on element without Selectivity instance")}else{t=n.extend({},e,{element:this});var r=n(this);r.is("select")&&r.prop("multiple")&&(t.multiple=!0);var l=s.InputTypes,u=t.inputType||(t.multiple?"Multiple":"Single");if("function"!==n.type(u)){if(!l[u])throw new Error("Unknown Selectivity input type: "+u);u=l[u]}this.selectivity=new u(t)}}),void 0===i?this:i}function s(e){return this instanceof s?(this.$el=n(e.element),this.$searchInput=null,this.dropdown=null,this.enabled=!0,this.hasTouch="undefined"!=typeof window&&"ontouchstart"in window,this.hasKeyboard=!this.hasTouch,this.items=null,this.matcher=s.matcher,this.options={},this.results=[],this.searchInputListeners=s.SearchInputListeners,this.templates=n.extend({},s.Templates),this.term="",this.setOptions(e),e.value?this.value(e.value,{triggerChange:!1}):this.data(e.data||null,{triggerChange:!1}),this._$searchInputs=[],this.$el.on("selectivity-close",this._closed.bind(this)),void o.call(this)):i.apply(this,arguments)}var n=window.jQuery||window.Zepto,o=e(2);n.extend(s.prototype,o.prototype,{$:function(e){return this.$el.find(e)},close:function(){this.dropdown&&this.dropdown.close()},data:function(e,t){return t=t||{},void 0===e?this._data:(e=this.validateData(e),this._data=e,this._value=this.getValueForData(e),t.triggerChange!==!1&&this.triggerChange(),void 0)},destroy:function(){this.undelegateEvents();var e=this.$el;e.children().remove(),e[0].selectivity=null,e=null},filterResults:function(e){return e},focus:function(){this.$searchInput&&this.$searchInput.focus()},getItemForId:function(e){var t=this.items;return t?s.findNestedById(t,e):{id:e,text:""+e}},initSearchInput:function(e,t){this._$searchInputs.push(e),this.$searchInput=e,this.searchInputListeners.forEach(function(t){t(this,e)}.bind(this)),t&&t.noSearch===!1||e.on("keyup",function(e){e.isDefaultPrevented()||this.search()}.bind(this))},loadMore:function(){this.options.query({callback:function(e){if(!e||!e.results)throw new Error("callback must be passed a response object");this._addResults(s.processItems(e.results),{hasMore:!!e.more})}.bind(this),error:this._addResults.bind(this,[]),offset:this.results.length,selectivity:this,term:this.term})},open:function(e){if(e=e||{},!this.dropdown&&this.triggerEvent("selectivity-opening")){var t=this.options.dropdown||s.Dropdown;t&&(this.dropdown=new t({position:this.options.positionDropdown,selectivity:this,showSearchInput:e.showSearchInput})),this.search("")}},positionDropdown:function(){this.dropdown&&this.dropdown.position()},removeSearchInput:function(){this._$searchInputs.pop(),this.$searchInput=this._$searchInputs[this._$searchInputs.length-1]||null},search:function(e){function t(t,s){i._setResults(t,n.extend({term:e},s))}var i=this;if(void 0===e){if(!i.$searchInput)return;e=i.$searchInput.val()}if(i.items){e=s.transformText(e);var o=i.matcher;t(i.items.map(function(t){return o(t,e)}).filter(function(e){return!!e}))}else i.options.query&&i.options.query({callback:function(e){if(!e||!e.results)throw new Error("callback must be passed a response object");t(s.processItems(e.results),{hasMore:!!e.more})},error:i._showError.bind(i),offset:0,selectivity:i,term:e});i.term=e},setOptions:function(e){e=e||{},s.OptionListeners.forEach(function(t){t(this,e)}.bind(this)),n.extend(this.options,e);var t=n.extend({closeOnSelect:"boolean",dropdown:"function|null",initSelection:"function|null",matcher:"function|null",placeholder:"string",positionDropdown:"function|null",query:"function|null",readOnly:"boolean",removeOnly:"boolean",searchInputListeners:"array"},e.allowedTypes);n.each(e,function(e,i){var o=t[e];if(o&&!o.split("|").some(function(e){return n.type(i)===e}))throw new Error(e+" must be of type "+o);switch(e){case"items":this.items=null===i?i:s.processItems(i);break;case"matcher":this.matcher=i;break;case"searchInputListeners":this.searchInputListeners=i;break;case"templates":n.extend(this.templates,i)}}.bind(this)),this.enabled=!this.options.readOnly&&!this.options.removeOnly},template:function(e,t){var i=this.templates[e];if(i)return"function"===n.type(i)?i(t):i.render?i.render(t):i.toString();throw new Error("Unknown template: "+e)},triggerChange:function(e){this.triggerEvent("change",n.extend({value:this._value},e))},triggerEvent:function(e,t){var i=n.Event(e,t||{});return this.$el.trigger(i),!i.isDefaultPrevented()},val:function(e){return this.value(e)},validateItem:function(e){if(e&&s.isValidId(e.id)&&"string"===n.type(e.text))return e;throw new Error("Item should have id (number or string) and text (string) properties")},value:function(e,t){return t=t||{},void 0===e?this._value:(e=this.validateValue(e),this._value=e,this.options.initSelection?this.options.initSelection(e,function(i){this._value===e&&(this._data=this.validateData(i),t.triggerChange!==!1&&this.triggerChange())}.bind(this)):(this._data=this.getDataForValue(e),t.triggerChange!==!1&&this.triggerChange()),void 0)},_addResults:function(e,t){this.results=this.results.concat(e),this.dropdown&&this.dropdown.showResults(this.filterResults(e),n.extend({add:!0},t))},_closed:function(){this.dropdown=null},_getItemId:function(e){var t;t=e.target?n(e.target).closest("[data-item-id]"):e.length?e:n(e);var i=t.data("item-id");return"string"===n.type(i)?i:s.findById(this._data||[],i)||s.findNestedById(this.results,i)?i:""+i},_setResults:function(e,t){this.results=e,this.dropdown&&this.dropdown.showResults(this.filterResults(e),t||{})},_showError:function(e,t){this.results=[],this.dropdown&&this.dropdown.showError(e,t)}}),s.Dropdown=null,s.InputTypes={},s.OptionListeners=[],s.SearchInputListeners=[],s.Templates={},s.findById=function(e,t){var i=s.findIndexById(e,t);return i>-1?e[i]:null},s.findIndexById=function(e,t){for(var i=0,s=e.length;s>i;i++)if(e[i].id===t)return i;return-1},s.findNestedById=null,s.inherits=function(e,t,i){return 2===arguments.length&&(i=t,t=s),e.prototype=n.extend(Object.create(t.prototype),{constructor:e},i),function(e,i){t.prototype[i].apply(e,Array.prototype.slice.call(arguments,2))}},s.isValidId=function(e){var t=n.type(e);return"number"===t||"string"===t},s.matcher=function(e,t){var i=null;if(s.transformText(e.text).indexOf(t)>-1)i=e;else if(e.children){var n=e.children.map(function(e){return s.matcher(e,t)}).filter(function(e){return!!e});n.length&&(i={id:e.id,text:e.text,children:n})}return i},s.processItem=function(e){if(s.isValidId(e))return{id:e,text:""+e};if(e&&(s.isValidId(e.id)||e.children)&&"string"===n.type(e.text))return e.children&&(e.children=s.processItems(e.children)),e;throw new Error("invalid item")},s.processItems=function(e){if("array"===n.type(e))return e.map(s.processItem);throw new Error("invalid items")},s.quoteCssAttr=function(e){return'"'+(""+e).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'},s.transformText=function(e){return e.toLowerCase()},t.exports=n.fn.selectivity=s},{2:2,jquery:"jquery"}],9:[function(e){"use strict";var t={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"},i=e(8),s=i.transformText;i.transformText=function(e){for(var i="",n=0,o=e.length;o>n;n++){var r=e[n];i+=t[r]||r}return s(i)}},{8:8}],10:[function(e,t){"use strict";function i(e){var t=e.selectivity;this.$el=s(t.template("dropdown",{dropdownCssClass:t.options.dropdownCssClass,searchInputPlaceholder:t.options.searchInputPlaceholder,showSearchInput:e.showSearchInput})),this.$results=this.$(".selectivity-results-container"),this.hasMore=!1,this.highlightedResult=null,this.loadMoreHighlighted=!1,this.options=e,this.results=[],this.selectivity=t,this._closeProxy=this.close.bind(this),t.options.closeOnSelect!==!1&&t.$el.on("selectivity-selecting",this._closeProxy),this._lastMousePosition={},this.addToDom(),this.position(),this.setupCloseHandler(),this._suppressMouseWheel(),e.showSearchInput&&(t.initSearchInput(this.$(".selectivity-search-input")),t.focus()),o.call(this),this.$results.on("scroll touchmove touchend",n(this._scrolled.bind(this),50)),this.showLoading(),setTimeout(this.triggerOpen.bind(this),1)}var s=window.jQuery||window.Zepto,n=e(3),o=e(2),r=e(8);s.extend(i.prototype,o.prototype,{$:function(e){return this.$el.find(e)},addToDom:function(){for(var e,t=this.selectivity.$el;(e=t.next(".selectivity-dropdown")).length;)t=e;this.$el.insertAfter(t)},close:function(){this.options.showSearchInput&&this.selectivity.removeSearchInput(),this.$el.remove(),this.removeCloseHandler(),this.selectivity.$el.off("selectivity-selecting",this._closeProxy),this.triggerClose()},events:{"click .selectivity-load-more":"_loadMoreClicked","click .selectivity-result-item":"_resultClicked","mouseenter .selectivity-load-more":"_loadMoreHovered","mouseenter .selectivity-result-item":"_resultHovered",mousemove:"_recordMousePosition"},highlight:function(e){this.loadMoreHighlighted&&this.$(".selectivity-load-more").removeClass("highlight"),this.$(".selectivity-result-item").removeClass("highlight").filter("[data-item-id="+r.quoteCssAttr(e.id)+"]").addClass("highlight"),this.highlightedResult=e,this.loadMoreHighlighted=!1,this.selectivity.triggerEvent("selectivity-highlight",{item:e,id:e.id})},highlightLoadMore:function(){this.$(".selectivity-result-item").removeClass("highlight"),this.$(".selectivity-load-more").addClass("highlight"),this.highlightedResult=null,this.loadMoreHighlighted=!0},position:function(){var e=this.options.position;e&&e(this.$el,this.selectivity.$el),this._scrolled()},removeCloseHandler:function(){s("body").off("click",this._closeProxy)},renderItems:function(e){var t=this.selectivity;return e.map(function(e){var i=t.template(e.id?"resultItem":"resultLabel",e);return e.children&&(i+=t.template("resultChildren",{childrenHtml:this.renderItems(e.children)})),i},this).join("")},selectHighlight:function(){this.highlightedResult?this.selectItem(this.highlightedResult.id):this.loadMoreHighlighted&&this._loadMoreClicked()},selectItem:function(e){var t=this.selectivity,i=r.findNestedById(t.results,e);if(i){var s={id:e,item:i};t.triggerEvent("selectivity-selecting",s)&&t.triggerEvent("selectivity-selected",s)}},setupCloseHandler:function(){s("body").on("click",this._closeProxy)},showError:function(e,t){t=t||{},this.$results.html(this.selectivity.template("error",{escape:t.escape!==!1,message:e})),this.hasMore=!1,this.results=[],this.highlightedResult=null,this.loadMoreHighlighted=!1,this.position()},showLoading:function(){this.$results.html(this.selectivity.template("loading")),this.hasMore=!1,this.results=[],this.highlightedResult=null,this.loadMoreHighlighted=!1,this.position()},showResults:function(e,t){var i=this.renderItems(e);t.hasMore?i+=this.selectivity.template("loadMore"):i||t.add||(i=this.selectivity.template("noResults",{term:t.term})),t.add?(this.$(".selectivity-loading").replaceWith(i),this.results=this.results.concat(e)):(this.$results.html(i),this.results=e),this.hasMore=t.hasMore,(!t.add||this.loadMoreHighlighted)&&this._highlightFirstItem(e),this.position()},triggerClose:function(){this.selectivity.$el.trigger("selectivity-close")},triggerOpen:function(){this.selectivity.$el.trigger("selectivity-open")},_highlightFirstItem:function(e){function t(e){for(var i=0,s=e.length;s>i;i++){var n=e[i];if(n.id)return n;if(n.children){var o=t(n.children);if(o)return o}}}var i=t(e);i?this.highlight(i):(this.highlightedResult=null,this.loadMoreHighlighted=!1)},_loadMoreClicked:function(){return this.$(".selectivity-load-more").replaceWith(this.selectivity.template("loading")),this.selectivity.loadMore(),this.selectivity.focus(),!1},_loadMoreHovered:function(e){(void 0===e.screenX||e.screenX!==this._lastMousePosition.x||void 0===e.screenY||e.screenY!==this._lastMousePosition.y)&&(this.highlightLoadMore(),this._recordMousePosition(e))},_recordMousePosition:function(e){this._lastMousePosition={x:e.screenX,y:e.screenY}},_resultClicked:function(e){return this.selectItem(this.selectivity._getItemId(e)),!1},_resultHovered:function(e){if(void 0===e.screenX||e.screenX!==this._lastMousePosition.x||void 0===e.screenY||e.screenY!==this._lastMousePosition.y){var t=this.selectivity._getItemId(e),i=r.findNestedById(this.results,t);i&&this.highlight(i),this._recordMousePosition(e)}},_scrolled:function(){var e=this.$(".selectivity-load-more");e.length&&e[0].offsetTop-this.$results[0].scrollTop<this.$el.height()&&this._loadMoreClicked()},_suppressMouseWheel:function(){var e=this.selectivity.options.suppressMouseWheelSelector;if(null!==e){var t=e||".selectivity-results-container";this.$el.on("DOMMouseScroll mousewheel",t,function(e){function t(){return e.stopPropagation(),e.preventDefault(),e.returnValue=!1,!1}var i=s(this),n=this.scrollTop,o=this.scrollHeight,r=i.height(),l=e.originalEvent,u="DOMMouseScroll"===e.type?-40*l.detail:l.wheelDelta,h=u>0;if(o>r){if(!h&&-u>o-r-n)return i.scrollTop(o),t();if(h&&u>n)return i.scrollTop(0),t()}})}}}),t.exports=r.Dropdown=i},{2:2,3:3,8:8,jquery:"jquery"}],11:[function(e,t){"use strict";function i(e){var t=e.indexOf("@"),i=e.lastIndexOf("."),s=e.indexOf(" ");return t>0&&i>t+1&&i<e.length-2&&-1===s}function s(e,t){t=void 0===t?e.length:t;for(var i=t-1;i>=0;i--)if(/\s/.test(e[i]))return e.slice(i+1,t);return e.slice(0,t)}function n(e,t){return e.slice(0,1)===t[0]&&e.slice(-1)===t[1]?e.slice(1,-1).trim():e.trim()}function o(e){var t=s(e),o=e.slice(0,-t.length).trim();return i(t)?(t=n(n(t,"()"),"<>"),o=n(o,'""').trim()||t,{id:t,text:o}):e.trim()?{id:e,text:e}:null}function r(e,t,n){function r(e){if(e)for(var t=0,n=e.length;n>t;t++)switch(e[t]){case";":case",":case"\n":return!0;case" ":case"	":if(i(s(e,t)))return!0;break;case'"':do t++;while(n>t&&'"'!==e[t]);break;default:continue}return!1}function l(e){for(var t=0,n=e.length;n>t;t++)switch(e[t]){case";":case",":case"\n":return{term:e.slice(0,t),input:e.slice(t+1)};case" ":case"	":if(i(s(e,t)))return{term:e.slice(0,t),input:e.slice(t+1)};break;case'"':do t++;while(n>t&&'"'!==e[t]);break;default:continue}return{}}for(;r(e);){var u=l(e);if(u.term){var a=o(u.term);!a||a.id&&h.findById(t,a.id)||n(a)}e=u.input}return e}function l(e){a.call(this,e)}var u=window.jQuery||window.Zepto,h=e(8),a=e(14),c=h.inherits(l,a,{initSearchInput:function(e){c(this,"initSearchInput",e),e.on("blur",function(){var t=e.val();i(s(t))&&this.add(o(t))}.bind(this))},setOptions:function(e){e=u.extend({createTokenItem:o,showDropdown:!1,tokenizer:r},e),c(this,"setOptions",e)}});t.exports=h.InputTypes.Email=l},{14:14,8:8,jquery:"jquery"}],12:[function(e){"use strict";function t(e,t){function h(t,s){function n(e,t){for(var i=0,s=e.length;s>i;i++)if(e.eq(i).is(t))return i;return-1}function o(){var e;if(t.highlightedResult){var n=i.quoteCssAttr(t.highlightedResult.id);e=t.$(".selectivity-result-item[data-item-id="+n+"]")}else{if(!t.loadMoreHighlighted)return;e=t.$(".selectivity-load-more")}var o=e.position();if(o){var r=o.top,l=t.$results.height(),u=e.outerHeight?e.outerHeight():e.height();(0>r||r>l-u)&&(r+=t.$results.scrollTop(),t.$results.scrollTop(0>s?r:r-l+u))}}if(t.submenu)return void h(t.submenu,s);var r=t.results;if(r.length){var l=t.$(".selectivity-result-item"),u=s>0?0:l.length-1,a=u,c=t.highlightedResult;if(c){var d=i.quoteCssAttr(c.id);if(a=n(l,"[data-item-id="+d+"]")+s,s>0?a>=l.length:0>a){if(t.hasMore)return t.highlightLoadMore(),void o();a=u}}var p=i.findNestedById(r,e._getItemId(l[a]));p&&(t.highlight(p,{delay:!!p.submenu}),o())}}function a(i){var o=e.dropdown;if(o)if(i.keyCode===s){if(!t.val()){if(o.submenu){for(var r=o.submenu;r.submenu;)r=r.submenu;p=r}i.preventDefault(),d=!0}}else i.keyCode===n?h(o,1):i.keyCode===u?h(o,-1):i.keyCode===l&&setTimeout(function(){e.close({keepFocus:!1})},1)}function c(t){function i(){e.options.showDropdown!==!1&&e.open()}var l=e.dropdown;d?(t.preventDefault(),d=!1,p&&(p.close(),e.focus(),p=null)):t.keyCode===s?!l&&e.options.allowClear&&e.clear():t.keyCode!==o||t.ctrlKey?t.keyCode===r?(e.close(),t.preventDefault()):t.keyCode===n||t.keyCode===u?(i(),t.preventDefault()):i():(l?l.selectHighlight():e.options.showDropdown!==!1&&i(),t.preventDefault())}var d=!1,p=null;t.on("keydown",a).on("keyup",c)}var i=e(8),s=8,n=40,o=13,r=27,l=9,u=38;i.SearchInputListeners.push(t)},{8:8}],13:[function(e){"use strict";var t=e(4),i=e(8);i.Locale={ajaxError:function(e){return"Failed to fetch results for <b>"+t(e)+"</b>"},loading:"Loading...",loadMore:"Load more...",needMoreCharacters:function(e){return"Enter "+e+" more characters to search"},noResults:"No results found",noResultsForTerm:function(e){return"No results for <b>"+t(e)+"</b>"}}},{4:4,8:8}],14:[function(e,t){"use strict";function i(e){n.call(this,e),this.$el.html(this.template("multipleSelectInput",{enabled:this.enabled})).trigger("selectivity-init","multiple"),this._highlightedItemId=null,this.initSearchInput(this.$(".selectivity-multiple-input:not(.selectivity-width-detector)")),this._rerenderSelection(),e.positionDropdown||(this.options.positionDropdown=function(e,t){var i=t.position(),n=e.height(),o=t.height(),r=t[0].getBoundingClientRect().top,l=r+o+n,u="undefined"!=typeof window&&l>s(window).height()&&r-n>0,h=t.outerWidth?t.outerWidth():t.width();e.css({left:i.left+"px",top:i.top+(u?-n:o)+"px"}).width(h)})}var s=window.jQuery||window.Zepto,n=e(8),o=8,r=46,l=13,u=n.inherits(i,{add:function(e){var t=n.isValidId(e),i=t?e:this.validateItem(e)&&e.id;-1===this._value.indexOf(i)&&(this._value.push(i),t&&this.options.initSelection?this.options.initSelection([i],function(t){this._value.indexOf(i)>-1&&(e=this.validateItem(t[0]),this._data.push(e),this.triggerChange({added:e}))}.bind(this)):(t&&(e=this.getItemForId(i)),this._data.push(e),this.triggerChange({added:e}))),this.$searchInput.val("")},clear:function(){this.data([])},events:{change:"_rerenderSelection","change .selectivity-multiple-input":function(){return!1},click:"_clicked","click .selectivity-multiple-selected-item":"_itemClicked","keydown .selectivity-multiple-input":"_keyHeld","keyup .selectivity-multiple-input":"_keyReleased","paste .selectivity-multiple-input":"_onPaste","selectivity-selected":"_resultSelected"},filterResults:function(e){return e.filter(function(e){return!n.findById(this._data,e.id)},this)},getDataForValue:function(e){return e.map(this.getItemForId.bind(this)).filter(function(e){return!!e})},getValueForData:function(e){return e.map(function(e){return e.id})},remove:function(e){var t,i="object"===s.type(e)?e.id:e,o=n.findIndexById(this._data,i);o>-1&&(t=this._data[o],this._data.splice(o,1)),this._value[o]!==i&&(o=this._value.indexOf(i)),o>-1&&this._value.splice(o,1),t&&this.triggerChange({removed:t}),i===this._highlightedItemId&&(this._highlightedItemId=null)},search:function(){var e=this.$searchInput.val();this.options.tokenizer&&(e=this.options.tokenizer(e,this._data,this.add.bind(this),this.options),"string"===s.type(e)?this.$searchInput.val(e):e=""),this.dropdown&&u(this,"search")},setOptions:function(e){e=e||{};var t="backspaceHighlightsBeforeDelete";void 0===e[t]&&(e[t]=this.hasTouch),e.allowedTypes=e.allowedTypes||{},e.allowedTypes[t]="boolean",u(this,"setOptions",e)},validateData:function(e){if(null===e)return[];if("array"===s.type(e))return e.map(this.validateItem.bind(this));throw new Error("Data for MultiSelectivity instance should be array")},validateValue:function(e){if(null===e)return[];if("array"===s.type(e)){if(e.every(n.isValidId))return e;throw new Error("Value contains invalid IDs")}throw new Error("Value for MultiSelectivity instance should be an array")},_backspacePressed:function(){this.options.backspaceHighlightsBeforeDelete?this._highlightedItemId?this._deletePressed():this._value.length&&this._highlightItem(this._value.slice(-1)[0]):this._value.length&&this.remove(this._value.slice(-1)[0])},_clicked:function(){return this.enabled?(this.focus(),this._open(),!1):void 0},_createToken:function(){var e=this.$searchInput.val(),t=this.options.createTokenItem;if(e&&t){var i=t(e);i&&this.add(i)}},_deletePressed:function(){this._highlightedItemId&&this.remove(this._highlightedItemId)},_highlightItem:function(e){this._highlightedItemId=e,this.$(".selectivity-multiple-selected-item").removeClass("highlighted").filter("[data-item-id="+n.quoteCssAttr(e)+"]").addClass("highlighted"),this.hasKeyboard&&this.focus()},_itemClicked:function(e){this.enabled&&this._highlightItem(this._getItemId(e))},_itemRemoveClicked:function(e){return this.remove(this._getItemId(e)),this._updateInputWidth(),!1},_keyHeld:function(e){this._originalValue=this.$searchInput.val(),e.keyCode!==l||e.ctrlKey||e.preventDefault()},_keyReleased:function(e){var t=!!this._originalValue;e.keyCode!==l||e.ctrlKey?e.keyCode!==o||t?e.keyCode!==r||t||this._deletePressed():this._backspacePressed():this.options.createTokenItem&&this._createToken(),this._updateInputWidth()},_onPaste:function(){setTimeout(function(){this.search(),this.options.createTokenItem&&this._createToken()}.bind(this),10)},_open:function(){this.options.showDropdown!==!1&&this.open()},_renderSelectedItem:function(e){this.$searchInput.before(this.template("multipleSelectedItem",s.extend({highlighted:e.id===this._highlightedItemId,removable:!this.options.readOnly},e)));var t=n.quoteCssAttr(e.id);this.$(".selectivity-multiple-selected-item[data-item-id="+t+"]").find(".selectivity-multiple-selected-item-remove").on("click",this._itemRemoveClicked.bind(this))},_rerenderSelection:function(e){if(e=e||{},e.added)this._renderSelectedItem(e.added),this._scrollToBottom();
else if(e.removed){var t=n.quoteCssAttr(e.removed.id);this.$(".selectivity-multiple-selected-item[data-item-id="+t+"]").remove()}else this.$(".selectivity-multiple-selected-item").remove(),this._data.forEach(this._renderSelectedItem,this),this._updateInputWidth();(e.added||e.removed)&&(this.dropdown&&this.dropdown.showResults(this.filterResults(this.results),{hasMore:this.dropdown.hasMore}),this.hasKeyboard&&this.focus()),this.positionDropdown(),this._updatePlaceholder()},_resultSelected:function(e){-1===this._value.indexOf(e.id)?this.add(e.item):this.remove(e.item)},_scrollToBottom:function(){var e=this.$(".selectivity-multiple-input-container");e.scrollTop(e.height())},_updateInputWidth:function(){if(this.enabled){var e=this.$searchInput,t=this.$(".selectivity-width-detector");t.text(e.val()||!this._data.length&&this.options.placeholder||""),e.width(t.width()+20),this.positionDropdown()}},_updatePlaceholder:function(){var e=this._data.length?"":this.options.placeholder;this.enabled?this.$searchInput.attr("placeholder",e):this.$(".selectivity-placeholder").text(e)}});t.exports=n.InputTypes.Multiple=i},{8:8,jquery:"jquery"}],15:[function(e,t){"use strict";function i(e){n.call(this,e),this.$el.html(this.template("singleSelectInput",this.options)).trigger("selectivity-init","single"),this._rerenderSelection(),e.positionDropdown||(this.options.positionDropdown=function(e,t){var i=t.position(),n=e.height(),o=t.height(),r=t[0].getBoundingClientRect().top,l=r+o+n,u=0;"undefined"!=typeof window&&(u=Math.min(Math.max(l-s(window).height(),0),r+o));var h=t.outerWidth?t.outerWidth():t.width();e.css({left:i.left+"px",top:i.top+o-u+"px"}).width(h)}),e.showSearchInputInDropdown===!1&&this.initSearchInput(this.$(".selectivity-single-select-input"),{noSearch:!0})}var s=window.jQuery||window.Zepto,n=e(8),o=n.inherits(i,{events:{change:"_rerenderSelection",click:"_clicked","focus .selectivity-single-select-input":"_focused","selectivity-selected":"_resultSelected"},clear:function(){this.data(null)},close:function(e){this._closing=!0,o(this,"close");var t=this.$(".selectivity-single-select-input");this.$searchInput||this.initSearchInput(t,{noSearch:!0}),e&&e.keepFocus===!1||t.focus(),this._closing=!1},getDataForValue:function(e){return this.getItemForId(e)},getValueForData:function(e){return e?e.id:null},open:function(e){var t=this.options.showSearchInputInDropdown!==!1;o(this,"open",s.extend({showSearchInput:t},e)),t||this.focus()},setOptions:function(e){e=e||{},e.allowedTypes=s.extend(e.allowedTypes||{},{allowClear:"boolean",showSearchInputInDropdown:"boolean"}),o(this,"setOptions",e)},validateData:function(e){return null===e?e:this.validateItem(e)},validateValue:function(e){if(null===e||n.isValidId(e))return e;throw new Error("Value for SingleSelectivity instance should be a valid ID or null")},_clicked:function(){return this.enabled?(this.dropdown?this.close():this.options.showDropdown!==!1&&this.open(),!1):void 0},_focused:function(){this.enabled&&!this._closing&&this.options.showDropdown!==!1&&this.open()},_itemRemoveClicked:function(){return this.data(null),!1},_rerenderSelection:function(){var e=this.$(".selectivity-single-result-container");this._data?(e.html(this.template("singleSelectedItem",s.extend({removable:this.options.allowClear&&!this.options.readOnly},this._data))),e.find(".selectivity-single-selected-item-remove").on("click",this._itemRemoveClicked.bind(this))):e.html(this.template("singleSelectPlaceholder",{placeholder:this.options.placeholder}))},_resultSelected:function(e){this.data(e.item),this.close()}});t.exports=n.InputTypes.Single=i},{8:8,jquery:"jquery"}],16:[function(e,t){"use strict";function i(e){this.parentMenu=e.parentMenu,n.call(this,e),this._closeSubmenuTimeout=0,this._openSubmenuTimeout=0}var s=e(8),n=e(10),o=s.inherits(i,n,{close:function(){this.options.restoreOptions&&this.selectivity.setOptions(this.options.restoreOptions),this.options.restoreResults&&(this.selectivity.results=this.options.restoreResults),this.submenu&&this.submenu.close(),o(this,"close"),this.parentMenu&&(this.parentMenu.submenu=null,this.parentMenu=null),clearTimeout(this._closeSubmenuTimeout),clearTimeout(this._openSubmenuTimeout)},highlight:function(e,t){t&&t.delay?(o(this,"highlight",e),clearTimeout(this._openSubmenuTimeout),this._openSubmenuTimeout=setTimeout(this._doHighlight.bind(this,e),300)):this.submenu?this.highlightedResult&&this.highlightedResult.id===e.id?this._doHighlight(e):(clearTimeout(this._closeSubmenuTimeout),this._closeSubmenuTimeout=setTimeout(this._closeSubmenuAndHighlight.bind(this,e),100)):(this.parentMenu&&this.parentMenu._closeSubmenuTimeout&&(clearTimeout(this.parentMenu._closeSubmenuTimeout),this.parentMenu._closeSubmenuTimeout=0),this._doHighlight(e))},selectHighlight:function(){this.submenu?this.submenu.selectHighlight():o(this,"selectHighlight")},selectItem:function(e){var t=this.selectivity,i=s.findNestedById(t.results,e);if(i&&!i.submenu){var n={id:e,item:i};t.triggerEvent("selectivity-selecting",n)&&t.triggerEvent("selectivity-selected",n)}},showResults:function(e,t){this.submenu?this.submenu.showResults(e,t):o(this,"showResults",e,t)},triggerClose:function(){this.parentMenu?this.selectivity.$el.trigger("selectivity-close-submenu"):o(this,"triggerClose")},triggerOpen:function(){this.parentMenu?this.selectivity.$el.trigger("selectivity-open-submenu"):o(this,"triggerOpen")},_closeSubmenuAndHighlight:function(e){this.submenu&&this.submenu.close(),this._doHighlight(e)},_doHighlight:function(e){if(o(this,"highlight",e),e.submenu&&!this.submenu){var t=this.selectivity,i=t.options.dropdown||s.Dropdown;if(i){var n=s.quoteCssAttr(e.id),r=this.$(".selectivity-result-item[data-item-id="+n+"]"),l=this.$el;this.submenu=new i({parentMenu:this,position:e.submenu.positionDropdown||function(e){var t=l.position(),i=l.width();e.css({left:t.left+i+"px",top:r.position().top+t.top+"px"}).width(i)},restoreOptions:{items:t.items,query:t.options.query||null},restoreResults:t.results,selectivity:t,showSearchInput:e.submenu.showSearchInput}),t.setOptions({items:e.submenu.items||null,query:e.submenu.query||null}),t.search("")}}}});s.Dropdown=i,s.findNestedById=function(e,t){for(var i=0,n=e.length;n>i;i++){var o,r=e[i];if(r.id===t?o=r:r.children?o=s.findNestedById(r.children,t):r.submenu&&r.submenu.items&&(o=s.findNestedById(r.submenu.items,t)),o)return o}return null},t.exports=i},{10:10,8:8}],17:[function(e){"use strict";var t=e(4),i=e(8);e(13),i.Templates={dropdown:function(e){var i=e.dropdownCssClass?" "+e.dropdownCssClass:"",s="";if(e.showSearchInput){i+=" has-search-input";var n=e.searchInputPlaceholder;s='<div class="selectivity-search-input-container"><input type="text" class="selectivity-search-input"'+(n?' placeholder="'+t(n)+'"':"")+"></div>"}return'<div class="selectivity-dropdown'+i+'">'+s+'<div class="selectivity-results-container"></div></div>'},error:function(e){return'<div class="selectivity-error">'+(e.escape?t(e.message):e.message)+"</div>"},loading:function(){return'<div class="selectivity-loading">'+i.Locale.loading+"</div>"},loadMore:function(){return'<div class="selectivity-load-more">'+i.Locale.loadMore+"</div>"},multipleSelectInput:function(e){return'<div class="selectivity-multiple-input-container">'+(e.enabled?'<input type="text" autocomplete="off" autocorrect="off" autocapitalize="off" class="selectivity-multiple-input"><span class="selectivity-multiple-input selectivity-width-detector"></span>':'<div class="selectivity-multiple-input selectivity-placeholder"></div>')+'<div class="selectivity-clearfix"></div></div>'},multipleSelectedItem:function(e){var i=e.highlighted?" highlighted":"";return'<span class="selectivity-multiple-selected-item'+i+'" data-item-id="'+t(e.id)+'">'+(e.removable?'<a class="selectivity-multiple-selected-item-remove"><i class="fa fa-remove"></i></a>':"")+t(e.text)+"</span>"},noResults:function(e){var t=i.Locale;return'<div class="selectivity-error">'+(e.term?t.noResultsForTerm(e.term):t.noResults)+"</div>"},resultChildren:function(e){return'<div class="selectivity-result-children">'+e.childrenHtml+"</div>"},resultItem:function(e){return'<div class="selectivity-result-item" data-item-id="'+t(e.id)+'">'+t(e.text)+(e.submenu?'<i class="selectivity-submenu-icon fa fa-chevron-right"></i>':"")+"</div>"},resultLabel:function(e){return'<div class="selectivity-result-label">'+t(e.text)+"</div>"},singleSelectInput:'<div class="selectivity-single-select"><input type="text" class="selectivity-single-select-input"><div class="selectivity-single-result-container"></div><i class="fa fa-sort-desc selectivity-caret"></i></div>',singleSelectPlaceholder:function(e){return'<div class="selectivity-placeholder">'+t(e.placeholder)+"</div>"},singleSelectedItem:function(e){return'<span class="selectivity-single-selected-item" data-item-id="'+t(e.id)+'">'+(e.removable?'<a class="selectivity-single-selected-item-remove"><i class="fa fa-remove"></i></a>':"")+t(e.text)+"</span>"},selectCompliance:function(e){return"multiple"===e.mode&&"[]"!==e.name.slice(-2)&&(e.name+="[]"),'<select name="'+e.name+'"'+("multiple"===e.mode?" multiple":"")+"></select>"},selectOptionCompliance:function(e){return'<option value="'+t(e.id)+'" selected>'+t(e.text)+"</option>"}}},{13:13,4:4,8:8}],18:[function(e){"use strict";function t(e,t,i,n){function o(e){return e?u.some(function(t){return e.indexOf(t)>-1}):!1}function r(e){for(var t=0,i=e.length;i>t;t++)if(u.indexOf(e[t])>-1)return{term:e.slice(0,t),input:e.slice(t+1)};return{}}for(var l=n.createTokenItem||function(e){return e?{id:e,text:e}:null},u=n.tokenSeparators;o(e);){var h=r(e);if(h.term){var a=l(h.term);a&&!s.findById(t,a.id)&&i(a)}e=h.input}return e}var i=window.jQuery||window.Zepto,s=e(8);s.OptionListeners.push(function(e,s){s.tokenSeparators&&(s.allowedTypes=i.extend({tokenSeparators:"array"},s.allowedTypes),s.tokenizer=s.tokenizer||t)})},{8:8,jquery:"jquery"}],19:[function(e){"use strict";function t(e,t){var i=t.multiple?[]:null,n=function(){var e=s(this);if(e.is("option")){var o=e.text(),r=e.attr("value")||o;if(e.prop("selected")){var l={id:r,text:o};t.multiple?i.push(l):i=l}return{id:r,text:e.attr("label")||o}}return{text:e.attr("label"),children:e.children("option,optgroup").map(n).get()}};t.allowClear="allowClear"in t?t.allowClear:!e.prop("required");var o=e.children("option,optgroup").map(n).get();t.items=t.query?null:o,t.placeholder=t.placeholder||e.data("placeholder")||"",t.data=i;var r=(e.attr("class")||"selectivity-input").split(" ");-1===r.indexOf("selectivity-input")&&r.push("selectivity-input");var l=s("<div>").attr({id:e.attr("id"),"class":r.join(" "),style:e.attr("style"),"data-name":e.attr("name")});return e.replaceWith(l),l}function i(e){var t=e.$el;t.on("selectivity-init",function(i,s){t.append(e.template("selectCompliance",{name:t.attr("data-name"),mode:s})).removeAttr("data-name")}).on("selectivity-init change",function(){var i=e._data,s=t.find("select");i instanceof Array?(s.empty(),i.forEach(function(t){s.append(e.template("selectOptionCompliance",t))})):i?s.html(e.template("selectOptionCompliance",i)):s.empty()})}var s=window.jQuery||window.Zepto,n=e(8);n.OptionListeners.push(function(e,s){var n=e.$el;n.is("select")&&(n.attr("autofocus")&&setTimeout(function(){e.focus()},1),e.$el=t(n,s),e.$el[0].selectivity=e,i(e))})},{8:8,jquery:"jquery"}]},{},[1])(1)});
var Nanobar=function(){var c,d,e,f,g,h,k={width:"100%",height:"4px",zIndex:9999,top:"0"},l={width:0,height:"100%",clear:"both",transition:"height .3s"};c=function(a,b){for(var c in b)a.style[c]=b[c];a.style["float"]="left"};f=function(){var a=this,b=this.width-this.here;0.1>b&&-0.1<b?(g.call(this,this.here),this.moving=!1,100==this.width&&(this.el.style.height=0,setTimeout(function(){a.cont.el.removeChild(a.el)},300))):(g.call(this,this.width-b/4),setTimeout(function(){a.go()},16))};g=function(a){this.width=
a;this.el.style.width=this.width+"%"};h=function(){var a=new d(this);this.bars.unshift(a)};d=function(a){this.el=document.createElement("div");this.el.style.backgroundColor=a.opts.bg;this.here=this.width=0;this.moving=!1;this.cont=a;c(this.el,l);a.el.appendChild(this.el)};d.prototype.go=function(a){a?(this.here=a,this.moving||(this.moving=!0,f.call(this))):this.moving&&f.call(this)};e=function(a){a=this.opts=a||{};var b;a.bg=a.bg||"#000";this.bars=[];b=this.el=document.createElement("div");c(this.el,
k);a.id&&(b.id=a.id);b.style.position=a.target?"relative":"fixed";a.target?a.target.insertBefore(b,a.target.firstChild):document.getElementsByTagName("body")[0].appendChild(b);h.call(this)};e.prototype.go=function(a){this.bars[0].go(a);100==a&&h.call(this)};return e}();
!function(a,b){"use strict";function c(){return b}"function"==typeof define&&define.amd?define("tinysort",c):a.tinysort=b}(this,function(){"use strict";function a(a,d){function h(){0===arguments.length?q({}):b(arguments,function(a){q(z(a)?{selector:a}:a)}),n=G.length}function q(a){var b=!!a.selector,d=b&&":"===a.selector[0],e=c(a||{},p);G.push(c({hasSelector:b,hasAttr:!(e.attr===g||""===e.attr),hasData:e.data!==g,hasFilter:d,sortReturnNumber:"asc"===e.order?1:-1},e))}function r(){b(a,function(a,b){B?B!==a.parentNode&&(H=!1):B=a.parentNode;var c=G[0],d=c.hasFilter,e=c.selector,f=!e||d&&a.matchesSelector(e)||e&&a.querySelector(e),g=f?E:F,h={elm:a,pos:b,posn:g.length};D.push(h),g.push(h)}),A=E.slice(0)}function s(){E.sort(t)}function t(a,c){var d=0;for(0!==o&&(o=0);0===d&&n>o;){var g=G[o],h=g.ignoreDashes?l:k;if(b(m,function(a){var b=a.prepare;b&&b(g)}),g.sortFunction)d=g.sortFunction(a,c);else if("rand"==g.order)d=Math.random()<.5?1:-1;else{var i=f,p=y(a,g),q=y(c,g),r=""===p||p===e,s=""===q||q===e;if(p===q)d=0;else if(g.emptyEnd&&(r||s))d=r&&s?0:r?1:-1;else{if(!g.forceStrings){var t=z(p)?p&&p.match(h):f,u=z(q)?q&&q.match(h):f;if(t&&u){var v=p.substr(0,p.length-t[0].length),w=q.substr(0,q.length-u[0].length);v==w&&(i=!f,p=j(t[0]),q=j(u[0]))}}d=p===e||q===e?0:q>p?-1:p>q?1:0}}b(m,function(a){var b=a.sort;b&&(d=b(g,i,p,q,d))}),d*=g.sortReturnNumber,0===d&&o++}return 0===d&&(d=a.pos>c.pos?1:-1),d}function u(){var a=E.length===D.length;if(H&&a)I?E.forEach(function(a,b){a.elm.style.order=b}):B.appendChild(v());else{var b=G[0],c=b.place,d="org"===c,e="start"===c,f="end"===c,g="first"===c,h="last"===c;if(d)E.forEach(w),E.forEach(function(a,b){x(A[b],a.elm)});else if(e||f){var i=A[e?0:A.length-1],j=i.elm.parentNode,k=e?j.firstChild:j.lastChild;k!==i.elm&&(i={elm:k}),w(i),f&&j.appendChild(i.ghost),x(i,v())}else if(g||h){var l=A[g?0:A.length-1];x(w(l),v())}}}function v(){return E.forEach(function(a){C.appendChild(a.elm)}),C}function w(a){var b=a.elm,c=i.createElement("div");return a.ghost=c,b.parentNode.insertBefore(c,b),a}function x(a,b){var c=a.ghost,d=c.parentNode;d.insertBefore(b,c),d.removeChild(c),delete a.ghost}function y(a,b){var c,d=a.elm;return b.selector&&(b.hasFilter?d.matchesSelector(b.selector)||(d=g):d=d.querySelector(b.selector)),b.hasAttr?c=d.getAttribute(b.attr):b.useVal?c=d.value||d.getAttribute("value"):b.hasData?c=d.getAttribute("data-"+b.data):d&&(c=d.textContent),z(c)&&(b.cases||(c=c.toLowerCase()),c=c.replace(/\s+/g," ")),c}function z(a){return"string"==typeof a}z(a)&&(a=i.querySelectorAll(a)),0===a.length&&console.warn("No elements to sort");var A,B,C=i.createDocumentFragment(),D=[],E=[],F=[],G=[],H=!0,I=a.length&&(d===e||d.useFlex!==!1)&&-1!==getComputedStyle(a[0].parentNode,null).display.indexOf("flex");return h.apply(g,Array.prototype.slice.call(arguments,1)),r(),s(),u(),E.map(function(a){return a.elm})}function b(a,b){for(var c,d=a.length,e=d;e--;)c=d-e-1,b(a[c],c)}function c(a,b,c){for(var d in b)(c||a[d]===e)&&(a[d]=b[d]);return a}function d(a,b,c){m.push({prepare:a,sort:b,sortBy:c})}var e,f=!1,g=null,h=window,i=h.document,j=parseFloat,k=/(-?\d+\.?\d*)\s*$/g,l=/(\d+\.?\d*)\s*$/g,m=[],n=0,o=0,p={selector:g,order:"asc",attr:g,data:g,useVal:f,place:"org",returns:f,cases:f,forceStrings:f,ignoreDashes:f,sortFunction:g,useFlex:f,emptyEnd:f};return h.Element&&function(a){a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]}}(Element.prototype),c(d,{loop:b}),c(a,{plugin:d,defaults:p})}());
!function(a){"use strict";function b(b,e){return this.element=b,this.$element=a(b),this.config=a.extend({},d,e),this.internals={objectRefs:{}},this._defaults=d,this._name=c,this.init(),this}var c="dateDropdowns",d={defaultDate:null,defaultDateFormat:"yyyy-mm-dd",displayFormat:"dmy",submitFormat:"yyyy-mm-dd",minAge:0,maxAge:120,minYear:null,maxYear:null,submitFieldName:"date",wrapperClass:"date-dropdowns",daySuffixes:!0,monthSuffixes:!0,monthFormat:"long"};a.extend(b.prototype,{init:function(){this.checkForDuplicateElement(),this.setInternalVariables(),this.setupMarkup(),this.buildDropdowns(),this.attachDropdowns(),this.bindChangeEvent(),this.config.defaultDate&&this.populateDefaultDate()},checkForDuplicateElement:function(){return a('input[name="'+this.config.submitFieldName+'"]').length?(a.error("Duplicate element found"),!1):!0},setInternalVariables:function(){var a=new Date;this.internals.currentDay=a.getDate(),this.internals.currentMonth=a.getMonth()+1,this.internals.currentYear=a.getFullYear(),this.internals.monthShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.internals.monthLong=["January","February","March","April","May","June","July","August","September","October","November","December"]},setupMarkup:function(){var b,c;return"input"===this.element.tagName.toLowerCase()?(c=this.$element.attr("type","hidden").wrap('<div class="'+this.config.wrapperClass+'"></div>'),b=this.$element.parent()):(c=a("<input/>",{type:"hidden",name:this.internals.submitFieldName}),this.$element.append(c).addClass(this.config.wrapperClass),b=this.$element),this.internals.objectRefs.pluginWrapper=b,this.internals.objectRefs.hiddenField=c,!0},buildDropdowns:function(){var a,b,c;return a=this.buildDayDropdown(),this.internals.objectRefs.dayDropdown=a,b=this.buildMonthDropdown(),this.internals.objectRefs.monthDropdown=b,c=this.buildYearDropdown(),this.internals.objectRefs.yearDropdown=c,!0},attachDropdowns:function(){var a=this.internals.objectRefs.pluginWrapper,b=this.internals.objectRefs.dayDropdown,c=this.internals.objectRefs.monthDropdown,d=this.internals.objectRefs.yearDropdown;switch(this.config.displayFormat){case"mdy":a.append(c,b,d);break;case"ymd":a.append(d,c,b);break;case"dmy":default:a.append(b,c,d)}return!0},bindChangeEvent:function(){var a=this.internals.objectRefs.dayDropdown,b=this.internals.objectRefs.monthDropdown,c=this.internals.objectRefs.yearDropdown,d=this,e=this.internals.objectRefs;e.pluginWrapper.on("change","select",function(){var f,g=a.val(),h=b.val(),i=c.val(),j=!0;return(j=d.checkDate(g,h,i))?(e.dayDropdown.addClass("invalid"),!1):("00"!==e.dayDropdown.val()&&e.dayDropdown.removeClass("invalid"),void(j||g*h*i===0?e.hiddenField.val(""):(f=d.formatSubmitDate(g,h,i),e.hiddenField.val(f))))})},populateDefaultDate:function(){var a=this.config.defaultDate,b=[],c="00",d="00",e="0000";switch(this.config.defaultDateFormat){case"yyyy-mm-dd":default:b=a.split("-"),c=b[2],d=b[1],e=b[0];break;case"dd/mm/yyyy":b=a.split("/"),c=b[0],d=b[1],e=b[2];break;case"mm/dd/yyyy":b=a.split("/"),c=b[1],d=b[0],e=b[2]}return this.internals.objectRefs.dayDropdown.val(c),this.internals.objectRefs.monthDropdown.val(d),this.internals.objectRefs.yearDropdown.val(e),this.internals.objectRefs.hiddenField.val(a),!0===this.checkDate(c,d,e)&&this.internals.objectRefs.dayDropdown.addClass("invalid"),!0},buildBaseDropdown:function(b){return a("<select></select>",{"class":b,name:this.config.submitFieldName+"_["+b+"]"})},buildDayDropdown:function(){var b,c=this.buildBaseDropdown("day");a('<option value="00">Day</option>').appendTo(c);for(var d=1;10>d;d++)b=this.config.daySuffixes?d+this.getSuffix(d):"0"+d,a('<option value="0'+d+'">'+b+"</option>").appendTo(c);for(var e=10;31>=e;e++)b=e,this.config.daySuffixes&&(b=e+this.getSuffix(e)),a('<option value="'+e+'">'+b+"</option>").appendTo(c);return c},buildMonthDropdown:function(){var b=this.buildBaseDropdown("month");a('<option value="00">Month</option>').appendTo(b);for(var c=1;12>=c;c++){var d;switch(this.config.monthFormat){case"short":d=this.internals.monthShort[c-1];break;case"long":d=this.internals.monthLong[c-1];break;case"numeric":d=c,this.config.monthSuffixes&&(d+=this.getSuffix(c))}10>c&&(c="0"+c),a('<option value="'+c+'">'+d+"</option>").appendTo(b)}return b},buildYearDropdown:function(){var b=this.config.minYear,c=this.config.maxYear,d=this.buildBaseDropdown("year");a('<option value="0000">Year</option>').appendTo(d),b||(b=this.internals.currentYear-(this.config.maxAge+1)),c||(c=this.internals.currentYear-this.config.minAge);for(var e=c;e>=b;e--)a('<option value="'+e+'">'+e+"</option>").appendTo(d);return d},getSuffix:function(a){var b="";switch(a%10){case 1:b=a%100===11?"th":"st";break;case 2:b=a%100===12?"th":"nd";break;case 3:b=a%100===13?"th":"rd";break;default:b="th"}return b},checkDate:function(a,b,c){var d;if("00"!==b){var e=new Date(c,b,0).getDate(),f=parseInt(a,10);d=this.updateDayOptions(e,f),d&&this.internals.objectRefs.hiddenField.val("")}return d},updateDayOptions:function(b,c){var d=parseInt(this.internals.objectRefs.dayDropdown.children(":last").val(),10),e="",f="",g=!1;if(d>b){for(;d>b;)this.internals.objectRefs.dayDropdown.children(":last").remove(),d--;c>b&&(g=!0)}else if(b>d)for(;b>d;)e=++d,f=e,this.config.daySuffixes&&(f+=this.getSuffix(d)),a("<option></option>").attr("value",e).text(f).appendTo(this.internals.objectRefs.dayDropdown);return g},formatSubmitDate:function(a,b,c){var d;switch(this.config.submitFormat){case"yyyy-mm-dd":default:d=c+"-"+b+"-"+a;break;case"mm/dd/yyyy":d=b+"/"+a+"/"+c;break;case"dd/mm/yyyy":d=a+"/"+b+"/"+c}return d},destroy:function(){var a=this.config.wrapperClass;if(this.$element.hasClass(a))this.$element.empty();else{var b=this.$element.parent(),c=b.find("select");this.$element.unwrap(),c.remove()}}}),a.fn[c]=function(d){return this.each(function(){if("string"==typeof d){var e=Array.prototype.slice.call(arguments,1),f=a.data(this,"plugin_"+c);if("undefined"==typeof f)return a.error("Please initialize the plugin before calling this method."),!1;f[d].apply(f,e)}else a.data(this,"plugin_"+c)||a.data(this,"plugin_"+c,new b(this,d))}),this}}(jQuery,window,document);

// extend global array prototype
Array.min = function( array ){
    return Math.min.apply( Math, array );
};

function getMaxOfArray(numArray) {
  return Math.max.apply(null, numArray);
}

// Array.max = function( array ){
//     return Math.max.apply( Math, array );
// };
 


jQuery(document).ready(function($) {

    // tinysort
    var table = document.getElementById('results'),
    	tableHead = table.querySelector('thead'),
    	tableHeaders = tableHead.querySelectorAll('th'),
    	tableBody = table.querySelector('tbody');

    tableHead.addEventListener('click',function(e){
        var tableHeader = e.target,
        textContent = tableHeader.textContent,
        tableHeaderIndex,isAscending,order;

        if (textContent!=='Date') {
            while (tableHeader.nodeName!=='TH') {
                tableHeader = tableHeader.parentNode;
            }
            tableHeaderIndex = Array.prototype.indexOf.call(tableHeaders,tableHeader);
            isAscending = tableHeader.getAttribute('data-order')==='asc';
            order = isAscending?'desc':'asc';
            tableHeader.setAttribute('data-order',order);
            tinysort(
                tableBody.querySelectorAll('tr'),
                {
                    selector:'td:nth-child('+(tableHeaderIndex+1)+')',
                    order: order
                }
            );
        }
    });


    $('th').on('click', function(){
        $('.sort-icon').removeClass('active');
        $(this).find('.sort-icon').addClass('active');
    });


    // dateDropdowns init
    $("#start").dateDropdowns({
        submitFieldName: 'start',
        monthFormat: 'short',
        minYear: '1994'
    });

    $("#end").dateDropdowns({
        submitFieldName: 'end',
        monthFormat: 'short',
        minYear: '1994'
    });  



    //Default Action
    $(".tab_content").hide(); //Hide all content
    $("ul.tabs li:first").addClass("active").show(); //Activate first tab
    $(".tab_content:first").show(); //Show first tab content
    
    $("ul.tabs li").on('click', 'a', function(e) {
        e.preventDefault();
    });


    //On Click Event
    $("ul.tabs li").click(function() {
        $("ul.tabs li").removeClass("active"); //Remove any "active" class
        $(this).addClass("active"); //Add "active" class to selected tab
        $(".tab_content").hide(); //Hide all tab content
        var activeTab = $(this).find("a").attr("href"); //Find the rel attribute value to identify the active tab + content
        $(activeTab).show(); //Fade in the active content
        return false;
    });









});
(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var els = require('./../utils/els.js');
var sortByDate = require('./../utils/sortByDate.js');
var emptyList = require('./../utils/emptyList.js');
var locationInitialsToName = require('./../utils/locationInitialsToName.js');
var date_sort_asc = require('./date_sort_asc.js');

module.exports = function arrivalAndDeparture(results, theRange, theSeason) {

	emptyList();

	var length = results.data.length - 1;	
	var speciesName = $('.speciesSearch').selectivity('value');
	var resultsArr = [];
	var earliest_date_within_each_year_arr = [];
	var latest_date_within_each_year_arr = [];
	var earliest_date_within_second_half_arr = [];
	var latest_date_within_first_half_arr = [];
	var theObj = {};	
	var yearArray = [];
	var finalArr = [];
	var i;
	var convertedLocName = "";
	var arrLength, 
		asDateObj_1,
		asDateObj_2,
		finalArrLen,
		inc,
		newRows,
		counter;

	// SUMMER / WINTER splicing
	var arrBySeason = [],
		monthAsNum,
		d;	

	var foo; 		



	// populate resultsArr
	for (i = 0; i < length; i++) {				
		if (results.data[i].species === search) {
			resultsArr.push(results.data[i]);					
		}
	}	

	var l = resultsArr.length;

	// create array of the years found within results
	for (i = 0; i < l; i++) {

		var currentYear = resultsArr[i].year;

		// if not already in the year array then push it - avoid duplication
		if ($.inArray(currentYear, yearArray) === -1){
			yearArray.push(currentYear);
		}	
	}




	// group by year in theObj:

	// theObj = {
	// 	"2012" : {
	// 		0 : n, // n = moment.js date object
	// 		1 : n,
	// 		etc..
	// 	},
	//  "2014" : {
	// 		0 : n,
	// 		etc...
	// 	}
	// }

	// MAIN LOOP SETTING UP THE ARRAYS AND REFERENCE OBJECT
	for (var c = 0; c < yearArray.length; c++) {

		theObj[yearArray[c]] = {};
		theObj[yearArray[c]].monthArr = [];
		theObj[yearArray[c]].dayArr = [];
		theObj[yearArray[c]].datesArr = [];
		theObj[yearArray[c]].orderedDates = [];
		theObj[yearArray[c]].earliestDate = "";
		theObj[yearArray[c]].latestDate = "";
		theObj[yearArray[c]].firstHalf = [];
		theObj[yearArray[c]].secondHalf = [];


		for (var ind = 0; ind < l; ind++) {
			if (resultsArr[ind].year === yearArray[c]) {
				// format and push dates
				// var currentDate = new Date(resultsArr[ind].formatted_date);
				var currentDate = moment(resultsArr[ind].formatted_date);

				theObj[yearArray[c]].datesArr.push(currentDate);	


				// generate array of results within months 1 - 6 
				if (currentDate.isBefore(yearArray[c] + '-06-30')) {
					theObj[yearArray[c]].firstHalf.push(currentDate);
				}

				// generate array of results within months 7 - 12 
				if (currentDate.isAfter(yearArray[c] + '-06-30')) {
					theObj[yearArray[c]].secondHalf.push(currentDate);
				}

				// sort the arrays ascending
	    		theObj[yearArray[c]].firstHalf.sort(date_sort_asc);
				theObj[yearArray[c]].secondHalf.sort(date_sort_asc);
	    		theObj[yearArray[c]].datesArr.sort(date_sort_asc);
			}									
		}	



		// earliest and latest dates across the year
		var arrLen = theObj[yearArray[c]].datesArr.length;
		// get earliest => [0]
		var earliestDate = theObj[yearArray[c]].datesArr[0];
		// get latest => [arrLen -1] -1 because of zero index
		var latestDate = theObj[yearArray[c]].datesArr[arrLen - 1];

		earliest_date_within_each_year_arr.push(earliestDate);
		latest_date_within_each_year_arr.push(latestDate);




		// earliest date across the months 7 - 12 (winter / earliest)
		arrLen = theObj[yearArray[c]].secondHalf.length;
		// get earliest => [0]
		earliestDate = theObj[yearArray[c]].secondHalf[0];

		earliest_date_within_second_half_arr.push(earliestDate);




		// latest date across month 1 - 6 (winter / latest)
		arrLen = theObj[yearArray[c]].firstHalf.length;
		// get latest => [arrLen -1] -1 because of zero index
		latestDate = theObj[yearArray[c]].firstHalf[arrLen - 1];		

		latest_date_within_first_half_arr.push(latestDate);


		
	}

	// sort all arrays ascending
	earliest_date_within_each_year_arr.sort(date_sort_asc);
	latest_date_within_each_year_arr.sort(date_sort_asc);
	earliest_date_within_second_half_arr.sort(date_sort_asc);
	latest_date_within_first_half_arr.sort(date_sort_asc);



	// CONSOLE RESULTS
	// theObj[the year].datesArr = array of moment.js date objects sorted ascending
	// console.log(theObj);
	// // array of earliest dates within the year, for each year recorded
	// console.log(earliest_date_within_each_year_arr);
	// // array of latest dates within the year, for each year recorded
	// console.log(latest_date_within_each_year_arr);

	// console.log(earliest_date_within_second_half_arr);

	// console.log(latest_date_within_first_half_arr);

							


	if (theSeason === "summer" && theRange === "earliest") {
		foo = earliest_date_within_each_year_arr;
	} else if (theSeason === "summer" && theRange === "latest") {
		foo = latest_date_within_each_year_arr;
	} else if (theSeason === "winter" && theRange === "earliest") {
		foo = earliest_date_within_second_half_arr;
	} else if (theSeason === "winter" && theRange === "latest") {
		foo = latest_date_within_first_half_arr;
	}


	// if (theSeason === "summer" && theRange === "earliest" || theSeason === "winter" && theRange === "latest") {
	// 	foo = earliest_date_within_each_year_arr;
	// } else if (theSeason === "summer" && theRange === "latest" || theSeason === "winter" && theRange === "earliest") {
	// 	foo = latest_date_within_each_year_arr;
	// }

	arrLength = foo.length;
			
	for (inc = 0; inc < arrLength; inc++) {
		
		asDateObj_1 = foo[inc];
		
		// loop through resultsArr matching earliest dates and push to finalArr

		for (i = 0; i < l; i++) {

			asDateObj_2 = moment(resultsArr[i].formatted_date);

			if (moment(asDateObj_1).isSame(asDateObj_2)) {

				finalArr.push(resultsArr[i]);
				
			}
		}
	}

	sortByDate(finalArr);			

	if (theSeason === "summer" && theRange === "earliest" || theSeason === "winter" && theRange === "latest") {

		for (d = 0; d < finalArr.length; d++) {
			monthAsNum = parseInt(finalArr[d].month);
			if (monthAsNum <= 6) {
				arrBySeason.push(finalArr[d]);
			}
		}

	} else if (theSeason === "summer" && theRange === "latest" || theSeason === "winter" && theRange === "earliest") {

		for (d = 0; d < finalArr.length; d++) {
			monthAsNum = parseInt(finalArr[d].month);
			if (monthAsNum > 6) {
				arrBySeason.push(finalArr[d]);
			}
		}
	}


	finalArrLen = arrBySeason.length;

	newRows = $('<span/>');

	for (counter = 0; counter < finalArrLen; counter++) {
		convertedLocName = locationInitialsToName(arrBySeason[counter].location);
		$('<tr/>', {
			html : '<td class="date">'  + arrBySeason[counter].date_from + '</td> '  + '<td class="location">' 					 + convertedLocName + '</td> '  + '<td class="count">'  + arrBySeason[counter].count + '</td> ' + '<td class="observer">'  + arrBySeason[counter].observer + '</td> ' + '<td class="notes">'  + arrBySeason[counter].notes + '</td>'
			}						
		).appendTo(newRows);			
	}
	$(newRows.html()).appendTo(els.resultsList_2);

	setTimeout(function(){ els.overlay.removeClass('loading'); }, 300);

	// reset 
	finalArrLen.length = 0;

};
},{"./../utils/els.js":13,"./../utils/emptyList.js":14,"./../utils/locationInitialsToName.js":16,"./../utils/sortByDate.js":19,"./date_sort_asc.js":3}],2:[function(require,module,exports){
var els = require('./../utils/els.js');
var arrivalAndDeparture = require('./arrivalAndDeparture.js');

module.exports = function arriveDepartEventHandler(results) {

	var loadingClass = function(){
	  var d = $.Deferred();
	    els.overlay.addClass('loading');
	    d.resolve();
	  	return d.promise();
	};


	var fireRes = function(theRange, theSeason){
	  var d = $.Deferred();
	  setTimeout(function() {
	    arrivalAndDeparture(results, theRange, theSeason);
	    d.resolve();
	  }, 100);
	  return d.promise();
	};	


	$('#submit_2').on('click', function( event ) {

		var theRange = $('.arrive-depart:checked').val();
		var theSeason = $('.arrive-depart:checked').data('season');
		var speciesSearch = $('.speciesSearch').selectivity('value');

		// validate		
		if (speciesSearch) {

			if ($('.arrive-depart').is(":checked")) {

				loadingClass().pipe(fireRes(theRange, theSeason));

			} else {
				alert("Select from earliest or latest dates.");
			}	

		} else {
			this.checked = false;
			alert("Please select a species");
		}
	});
};
},{"./../utils/els.js":13,"./arrivalAndDeparture.js":1}],3:[function(require,module,exports){
module.exports = function date_sort_asc(date1, date2) {
  if (date1 > date2) {
  	return 1;
  }
  if (date1 < date2) {
  	return -1;
  }
  return 0;
};


},{}],4:[function(require,module,exports){
// config 
var foll = foll || {};
foll.config = {
	// Please add site URL here (no trailing forward slash)

	siteUrl: "http://localhost/foll",
	// siteUrl: "http://foll.jayontraps.com",	
	appPageID: 69	
};

// setup
var setUpEvents = require('./setup/setUpEvents.js');
var buildFormEls = require('./setup/buildFormEls.js');
var theSearch = require('./utils/theSearch.js');
var arriveDepartEventHandler = require('./arriveDepart/arriveDepartEventHandler.js');
var validateGraphSearch = require('./histogram/validateGraphSearch.js');




window.onload = function () {	

	$.ajax({
	    url: foll.config.siteUrl + '/wp-json/pages',
	    data: {
	        filter: {
	         "page_id": foll.config.appPageID,
	        }
	    },
	    dataType: 'json',
	    type: 'GET',
	    success: function(data) {	
	    	var datasetUrl = data[0].meta.dataset.url;

			Papa.parse(datasetUrl, {
				download: true,
				header: true,
				complete: function(results) {	
					buildFormEls(results);
					setUpEvents(results);
					arriveDepartEventHandler(results);
					validateGraphSearch(results);
				}
			});
	    },
	    error: function() {
	        // error code
	    }
	});	

	// var datasetUrl = "http://localhost:3000/foll/wp-content/themes/foll/csv/dataset.csv";
	// Papa.parse(datasetUrl, {
	// 	download: true,
	// 	header: true,
	// 	complete: function(results) {	
	// 		buildFormEls(results);
	// 		setUpEvents(results);
	// 		arriveDepartEventHandler(results);
	// 		validateGraphSearch(results);
	// 	}
	// });	


};


},{"./arriveDepart/arriveDepartEventHandler.js":2,"./histogram/validateGraphSearch.js":6,"./setup/buildFormEls.js":11,"./setup/setUpEvents.js":12,"./utils/theSearch.js":20}],5:[function(require,module,exports){
module.exports = function setUpGraph(graphArr, graphObj) {

	console.log(graphObj);

	var graphArrFinal = [],
		sumOfCount = 0,
		sumOfCountDivided,
		countArr = [],
		highestNumberStore = [],
		highestNum,
		highestNumArr = [],
		i,
		c;



	for (i = 0; i < graphArr.length; i++) {

		// get the date of the record as a moment() object
		var currentDate = moment(graphArr[i].formatted_date);	

		// subtract a day from JAN 01 to include the JAN 01 in results
		var graph_start_subtracted = moment(graphObj.graph_start).subtract(1, 'days');

		// get all records between selected range
		if (currentDate.isBetween(graph_start_subtracted, graphObj.graph_end)) {					
			graphArrFinal.push(graphArr[i]);
		}
	}


	var graphArrFinalLength = graphArrFinal.length,
		countInt,
		monthInt;


	// generate sum count array

	// loop through each month within range
	for (c = 1; c < 13; c++) {	

		// for each month grab highest numbers and sum counts
		for (i = 0; i < graphArrFinal.length; i++) {	

			if (graphArrFinal[i].count === "") {
				graphArrFinal[i].count = "0";
			}

			countInt = parseInt(graphArrFinal[i].count);
			monthInt = parseInt(graphArrFinal[i].month);				

			if (monthInt === c) {
				// highestNumberStore.push(countInt);
				sumOfCount += countInt;							
			}
		}	

		// for months with no values push a zero
		// if (highestNumberStore.length === 0) {
		// 	highestNumArr.push(0);
		// } else {
		// 	// get highest value
		// 	highestNum = getMaxOfArray(highestNumberStore);
		// 	// divide by number of years
		// 	highestNum = highestNum / graphObj.numOfYears;
		// 	// push highest value to highestNumArr
		// 	highestNumArr.push(highestNum);
		// }

		// sum divided by number of years
		sumOfCountDivided = sumOfCount / graphObj.numOfYears;
		countArr.push(sumOfCountDivided);

		// reset 
		sumOfCount = 0;	
		highestNum = 0;	
		highestNumberStore.length = 0;	

	}











	// // generate highest number array

	// var length = graphObj.yearsWithinRange.length;
	// var resultsYY,
	// 	resultsMM,
	// 	resultsC;

	// var foo = 0;

	// 	graphObj.years = {};

	// for (var index = 0; index < length; index++) {

	// 	var currYear = graphObj.yearsWithinRange[index];

	// 	graphObj.years[currYear] = {};
		
	// 	for (i = 0; i < graphArrFinal.length; i++) {

	// 		resultsYY = parseInt(graphArrFinal[i].year);
	// 		resultsMM = parseInt(graphArrFinal[i].month);
	// 		resultsC = parseInt(graphArrFinal[i].count);

	// 		if (resultsYY === currYear) {

	// 			// loop through each month within year
	// 			for (c = 1; c < 13; c++) {	

	// 				if (resultsMM === c) {
	// 					graphObj.years[currYear][c] = [];	
	// 					graphObj.years[currYear][c].push(resultsC);
	// 				}

	// 			}
			
	// 		}
					
	// 	}

	// }












	console.log(countArr);

	// check if all values are 0 - i.e no records for a given period
	var counter = 0;
	for (i = 0; i < countArr.length; i++) {
		counter += countArr[i];										
	} 
	if (counter === 0) {
		alert("No records for this period.");
		if (window.myBar) {
			myBar.clear();
		}
		return false;
	} else {

		if (window.myBar) {
			// update 
			for (var l = 0; l < myBar.datasets[0].bars.length; l++) {
				myBar.datasets[0].bars[l].value = countArr[l];					
			}

			myBar.update();

		} else {

			var barChartData = {
			labels : ["January","February","March","April","May","June","July","August","September","October","November","December"],
			datasets : [
				{
					fillColor : "rgba(000,000,000,0.5)",
					strokeColor : "rgba(000,000,000,0.8)",
					highlightFill: "rgba(000,000,000,0.75)",
					highlightStroke: "rgba(000,000,000,1)",
					data : countArr
				}

				// ,
				// {
		  //           label: "My Second dataset",
		  //           fillColor: "rgba(151,187,205,0.5)",
		  //           strokeColor: "rgba(151,187,205,0.8)",
		  //           highlightFill: "rgba(151,187,205,0.75)",
		  //           highlightStroke: "rgba(151,187,205,1)",
		  //           data: highestNumArr
		  //       }
			]

			};


			var ctx = document.getElementById("canvas").getContext("2d");
			window.myBar = new Chart(ctx).Bar(barChartData, {
				responsive : true
			});	
			$('.y-axis-head').addClass('on');			
		}	

	}
};


},{}],6:[function(require,module,exports){
var setUpGraph = require('./setUpGraph.js');

module.exports = function validateGraphSearch(results) {
		
	$('#generateGraph').on('click', function(event){

		event.preventDefault();

		var speciesName = $('.speciesSearch').selectivity('value');
		// get the start date
		var s = document.getElementById("start-graph");
		var graph_start = s.options[s.selectedIndex].value;		
		// get the end date
		var e = document.getElementById("end-graph");
		var graph_end = e.options[e.selectedIndex].value;	



		if (speciesName === null) {
			alert('Please select a species');
			return false;
		}	
		

		if (speciesName) {
			
			if (graph_start === "0000" || graph_end === "0000" || graph_start > graph_end) {
				alert("Invalid date range.");
				return false;
			}		

			var graphObj = {};
			graphObj.yearsWithinRange = [];

			// number of years in search
			var grSrt = parseInt(graph_start),
				grEnd = parseInt(graph_end); 


				// add 1 to graph_end and grEnd - to shift the end date up a year...
			 	// this allows a more readable end-of-range label 
			 	// e.g. instead of reading " ... to 1st Jan 2010" to read " ... to 31st Dec 2009 <the previous year>"
			 	// reffer to the theObj for actual start and end dates - graphObj.graph_start and graphObj.graph_end
				grEnd = grEnd + 1;
				graph_end = grEnd.toString();


			var	numOfYears = grEnd - grSrt;

			// format year for moment.js	
			graph_start = graph_start + "-01-01";
			graph_end = graph_end + "-01-01";

			// array of years within range
			var counter = grSrt;
			while(counter < grEnd) {
				graphObj.yearsWithinRange.push(counter);
				counter++;
			}

			
			graphObj.graph_start = graph_start;
			graphObj.graph_end = graph_end;
			graphObj.numOfYears = numOfYears;


			var graphArr = [];
			var len = results.data.length - 1;		

			for (var i = 0; i < len; i++) {

				if (results.data[i].species === speciesName) {
					graphArr.push(results.data[i]);
				}	
			}

			setUpGraph(graphArr, graphObj);
		} 
						
	});

};
},{"./setUpGraph.js":5}],7:[function(require,module,exports){
// utils
var els = require('./../utils/els.js');
var theSearch = require('./../utils/theSearch.js');
var locationInitialsToName = require('./../utils/locationInitialsToName.js');


module.exports = function buildDomEls(totalResults, resultsArr) {
	var newRows = $('<span/>');
	var convertedLocName = "";

	for (var i = 0; i < totalResults; i++) {
		convertedLocName = locationInitialsToName(resultsArr[i].location);
		$('<tr/>', {
			html : '<td class="species">'  + resultsArr[i].species + '</td> '  + '<td class="date">'  + resultsArr[i].date_from + '</td> '  + '<td class="location">' + convertedLocName + '</td> '  + '<td class="count">'  + resultsArr[i].count + '</td> ' + '<td class="observer">'  + resultsArr[i].observer + '</td> ' + '<td class="notes">'  + resultsArr[i].notes + '</td>'
			}						
		).appendTo(newRows);			
	}
	$(newRows.html()).appendTo(els.resultsList);
};
},{"./../utils/els.js":13,"./../utils/locationInitialsToName.js":16,"./../utils/theSearch.js":20}],8:[function(require,module,exports){
// utils
var els = require('./../utils/els.js');
var theSearch = require('./../utils/theSearch.js');
var sortByDate = require('./../utils/sortByDate.js');
var maxNumResults = require('./../utils/maxNumResults.js');
var escapeDateFun = require('./../utils/escapeDateFun.js');

// search
var displayResults = require('./displayResults.js');


module.exports = function dateRange(resultsArr, theSearch) {

	var dateInputChecked = $('input[name="date-range"]:checked');
	var userStartDate = $('#start input[type="hidden"]').val();
	var userEndtDate = $('#end input[type="hidden"]').val();
	var filteredArr = [];		
	

	if (dateInputChecked.length > 0) {

		if (dateInputChecked.val() === "by-range") {

			theSearch.bymonth = "";
			
			if (userStartDate.length === 0 || userEndtDate.length === 0) {

				escapeDateFun();

			} else {

				var startDate = moment(userStartDate);
				var endDate = moment(userEndtDate);


				if (endDate.isBefore(startDate)) {
					escapeDateFun();

				} else {

					// var startDate = new Date(userStartDate);
					// var endDate = new Date(userEndtDate);				
						
					theSearch.daterange = true;
					theSearch.startdate = userStartDate;
					theSearch.enddate = userEndtDate;

					for (var index = 0; index < theSearch.numOfResults; index++) {
						
						// var currentDate = new Date(resultsArr[index].formatted_date);
						var currentDate = moment(resultsArr[index].formatted_date);					

						// if (currentDate > startDate && currentDate < endDate ) {
						// 	filteredArr.push(resultsArr[index]);
						// }

						if ( currentDate.isBetween(startDate, endDate) ) {
							filteredArr.push(resultsArr[index]);
						}

					}

					theSearch.numOfResults = filteredArr.length;
					sortByDate(filteredArr, theSearch);
					maxNumResults(filteredArr, theSearch);							
					displayResults(filteredArr, theSearch);
				}

			}			

		} else if(dateInputChecked.val() === "by-month") {

			theSearch.daterange = false;
			
			// grab the inout value
			var userMonthSelected = $('#byMonth').val();	
			theSearch.bymonth = userMonthSelected;			
				
			// generate filteredArr
			for (var i = 0; i < theSearch.numOfResults; i++) {
				
				if (resultsArr[i].month === userMonthSelected) {
					filteredArr.push(resultsArr[i]);
				}
			}

			theSearch.numOfResults = filteredArr.length;
			sortByDate(filteredArr, theSearch);
			maxNumResults(filteredArr, theSearch);
			displayResults(filteredArr, theSearch);


		} else if (dateInputChecked.val() === "all-dates") {

			theSearch.bymonth = "";

			theSearch.daterange = false;			
			sortByDate(resultsArr);
			maxNumResults(resultsArr, theSearch);		
			displayResults(resultsArr, theSearch);
		
		}

	} else{
		
		sortByDate(resultsArr);
		maxNumResults(resultsArr, theSearch);
		displayResults(resultsArr, theSearch);
	}	
};
},{"./../utils/els.js":13,"./../utils/escapeDateFun.js":15,"./../utils/maxNumResults.js":17,"./../utils/sortByDate.js":19,"./../utils/theSearch.js":20,"./displayResults.js":9}],9:[function(require,module,exports){
// utils
var els = require('./../utils/els.js');
var locationInitialsToName = require('./../utils/locationInitialsToName.js');
var theSearch = require('./../utils/theSearch.js');
var reverseDateString = require('./../utils/reverseDateString.js');


// search
var buildDomEls = require('./buildDomEls.js');



module.exports = function displayResults(resultsArr, theSearch) {
	
	var totalResults = "";
	// if maxNumResults - totalResults will be different from theSearch.numOfResults
	if (theSearch.limitNum) {
		totalResults = 300;
	} else {
		totalResults = theSearch.numOfResults;
	}

		
	var summarizeDateRange = "";
	if (theSearch.daterange) { 
		// format the start and end dates for reading back with reverseDateString()
		var jsStartDate = theSearch.startdate;
		var userStartDate = reverseDateString(jsStartDate);
		var jsEndDate = theSearch.enddate;
		var userEndtDate = reverseDateString(jsEndDate);
		summarizeDateRange = " from " + userStartDate + " to " + userEndtDate;
	}

	var hasMaxNumber = "";
	if (theSearch.limitNum) {
		hasMaxNumber = theSearch.limitNum;
	} 

	var chosenMonth = "";
	if (theSearch.bymonth) {
		if (theSearch.bymonth === "1") {
			chosenMonth = " recorded in January. ";
		} else if(theSearch.bymonth === "2") {
			chosenMonth = " recorded in Febuary. ";
		} else if(theSearch.bymonth === "3") {
			chosenMonth = " recorded in March. ";
		} else if(theSearch.bymonth === "4") {
			chosenMonth = " recorded in April. ";
		} else if(theSearch.bymonth === "5") {
			chosenMonth = " recorded in May. ";
		} else if(theSearch.bymonth === "6") {
			chosenMonth = " recorded in June. ";
		} else if(theSearch.bymonth === "7") {
			chosenMonth = " recorded in July. ";
		} else if(theSearch.bymonth === "8") {
			chosenMonth = " recorded in August. ";
		} else if(theSearch.bymonth === "9") {
			chosenMonth = " recorded in September. ";
		} else if(theSearch.bymonth === "10") {
			chosenMonth = " recorded in October. ";
		} else if(theSearch.bymonth === "11") {
			chosenMonth = " recorded in November. ";
		} else if(theSearch.bymonth === "12") {
			chosenMonth = " recorded in December. ";
		}
	}

	theSearch.loc = locationInitialsToName(theSearch.loc);

	var readBackResults = "<b>" + theSearch.numOfResults + " records for " + theSearch.species + " at " + theSearch.loc + ", " +summarizeDateRange + " " + chosenMonth + " " + hasMaxNumber + "</b>";

	$(readBackResults).appendTo(els.searchSummary);		

	buildDomEls(totalResults, resultsArr);

	setTimeout(function(){ els.overlay.removeClass('loading'); }, 500);
};
},{"./../utils/els.js":13,"./../utils/locationInitialsToName.js":16,"./../utils/reverseDateString.js":18,"./../utils/theSearch.js":20,"./buildDomEls.js":7}],10:[function(require,module,exports){
// utils
var els = require('./../utils/els.js');
var emptyList = require('./../utils/emptyList.js');
var theSearch = require('./../utils/theSearch.js');


// search
var dateRange = require('./../search/dateRange.js');

module.exports = function generateQuery(results) {

	emptyList();

	// clear arrival and departures radio inputs
	$(".arrive-depart").prop('checked', false);

	var len = results.data.length - 1;			
	var index = 0;
	var resultsArr = [];
	var locationSearch = $('#locationSearch').val();
	var speciesSearch = $('.speciesSearch').selectivity('value');
	// var theSearch = {};


	if (!speciesSearch && !locationSearch) {

		for (var counter = 0; counter < len; counter++) {
			resultsArr.push(results.data[counter]);
			index++; 
		}
					
		theSearch.species = "all species";
		theSearch.loc = "all locations";
		
	} 	else if (speciesSearch && locationSearch) {

			for (var ind = 0; ind < len; ind++) {				
				if (results.data[ind].species === search && results.data[ind].location === locationSearch) {
					resultsArr.push(results.data[ind]);
					index++; 
				}
			}
							
			theSearch.species = speciesSearch;
			theSearch.loc = locationSearch;
			
	}	else if (speciesSearch) {
		
			for (var i = 0; i < len; i++) {				
				if (results.data[i].species === search) {
					resultsArr.push(results.data[i]);
					index++; 
				}
			}
							
			theSearch.species = speciesSearch;
			theSearch.loc = "all locations";
			

	}	else if (locationSearch) {

			for (var count = 0; count < len; count++) {				
				if (results.data[count].location === locationSearch) {
					resultsArr.push(results.data[count]);
					index++; 
				}
			}
							
			theSearch.species = "all species";
			theSearch.loc = locationSearch;				
	}

	theSearch.numOfResults = index;
	dateRange(resultsArr, theSearch);

};



},{"./../search/dateRange.js":8,"./../utils/els.js":13,"./../utils/emptyList.js":14,"./../utils/theSearch.js":20}],11:[function(require,module,exports){
// utils
var locationInitialsToName = require('./../utils/locationInitialsToName.js');
var els = require('./../utils/els.js');

module.exports = function buildFormEls (results) {

	var locationArray = [];
	var speciesArray = [];
	var l = results.data.length - 1;		

	for (var index = 0; index < l; index++) {		
		var currentLocation = results.data[index].location;
		var currentSpecies = results.data[index].species;

		if ($.inArray(currentLocation, locationArray) === -1){
			locationArray.push(currentLocation);
		}	

		if ($.inArray(currentSpecies, speciesArray) === -1){
			speciesArray.push(currentSpecies);
		}

		var day = results.data[index].day,
			month = results.data[index].month,
			year = results.data[index].year;

			if (day.length === 1) {
				day = "0" + day;
			}
			if (month.length === 1) {
				month = "0" + month;
			}
				
		results.data[index].formatted_date = year + "-" + month + "-" + day;  // format yyyy m d					
	}	


	locationArray.sort();	
	var convertedLocName = "";	
	// build option tags - appendTo list
	for (var i = 0; i < locationArray.length; i++) {
		convertedLocName = locationInitialsToName(locationArray[i]);
		$('<option value="' + locationArray[i] + '">' + convertedLocName + '</option>').appendTo(els.locList);
	}

	speciesArray.sort();
	// pass to selectivity plugin 
	$(".speciesSearch").selectivity({
	    allowClear: true,
	    items: speciesArray,
	    placeholder: 'No species selected'
	});	

	els.overlay.removeClass('loading');
	
};


},{"./../utils/els.js":13,"./../utils/locationInitialsToName.js":16}],12:[function(require,module,exports){
// utils
var locationInitialsToName = require('./../utils/locationInitialsToName.js');
var els = require('./../utils/els.js');
var emptyList = require('./../utils/emptyList.js');
var theSearch = require('./../utils/theSearch.js');

// search
var generateQuery = require('./../search/generateQuery.js');


module.exports = function setUpEvents(results) {

	var addLoadingClass = function(){
	  var d = $.Deferred();
	    els.overlay.addClass('loading');
	    d.resolve();
	  	return d.promise();
	};


	var fireGenQ = function(){
	  var d = $.Deferred();
	  setTimeout(function() {
	    generateQuery(results, theSearch);
	    d.resolve();
	  }, 100);
	  return d.promise();
	};

	// EVENTS
	// clear results manaully
	$(".speciesSearch").on("change", function(e) {	
		search = $('.speciesSearch').selectivity('value');
		
		if (!search) {
			// change to resetAll()
			emptyList();

			els.speciesH4.html("");
			els.radioInputs.prop('checked', false);
			if (window.myBar) {
				myBar.clear();
			}

		} else {
			els.speciesH4.html(": " + search);
		}

	});


	$('#submit').on('click', function(e) {	
		e.preventDefault();
		addLoadingClass().pipe(fireGenQ);
	});

};


},{"./../search/generateQuery.js":10,"./../utils/els.js":13,"./../utils/emptyList.js":14,"./../utils/locationInitialsToName.js":16,"./../utils/theSearch.js":20}],13:[function(require,module,exports){
var els = {
	overlay : $('.overlay'),
	search : "",
	locList : $('#locationSearch'),
	resultsList : $('#results'),
	resultsList_2 : $('#results_2'),
	searchSummary : $('#search-summary'),
	radioInputs : $('input[type="radio"]'),
	speciesH4 : $('#sp-name')
};

module.exports = els;
},{}],14:[function(require,module,exports){
var els = require('./els.js');

module.exports = function emptyList() {

	els.resultsList.find('tbody td').remove();		
	els.searchSummary.html('Results: ');
	$('.sort-icon').removeClass('active');
	els.resultsList_2.find('tbody td').remove();

};
},{"./els.js":13}],15:[function(require,module,exports){
var els = require('./els.js');

module.exports = function escapeDateFun() {
	alert('Invalid date range.');
	els.overlay.removeClass('loading');
	return false;
};
},{"./els.js":13}],16:[function(require,module,exports){
module.exports = function locationInitialsToName(locationInitials) {
	if (locationInitials === "BS") {
		locationInitials = "Black Swan Lake";
		return locationInitials;
	} else if(locationInitials === "DP") {
		locationInitials = "Dinton Pastures";
		return locationInitials;

	} else if(locationInitials === "LF") {
		locationInitials = "Lea Farm Lake";
		return locationInitials;

	} else if(locationInitials === "LL") {
		locationInitials = "Lavell's Lake";
		return locationInitials;

	} else if(locationInitials === "MM") {
		locationInitials = "Middle Marsh";
		return locationInitials;

	} else if(locationInitials === "MO") {
		locationInitials = "Mortimer's Meadow";
		return locationInitials;

	} else if(locationInitials === "SA") {
		locationInitials = "Sandford Lake";
		return locationInitials;

	} else if(locationInitials === "WS") {
		locationInitials = "White Swan Lake";
		return locationInitials;
	} else if(locationInitials === "all locations") {
		locationInitials = "all locations";
		return locationInitials;
	}
};

},{}],17:[function(require,module,exports){
module.exports = function maxNumResults(resultsArr, theSearch) {
	// this is where lazylading or pagination should happen
	if (theSearch.numOfResults > 2000) {
		theSearch.limitNum = "Displaying the most recent 2000 records.";		
		resultsArr = resultsArr.slice(0, 2000);
	} 	
};
},{}],18:[function(require,module,exports){
module.exports = function reverseDateString(dateString) {
	dateString = dateString.split('-');		
	dateString = dateString[2] + "-" + dateString[1] + "-" + dateString[0];
	return dateString;
};
},{}],19:[function(require,module,exports){
module.exports = function sortByDate(resultsArr, theSearch) {
	resultsArr.sort(function(a, b){
	 	var dateA = new Date(a.formatted_date), 
	 		dateB = new Date(b.formatted_date);
	 	return dateB - dateA; //sort by date decending
	});
};

},{}],20:[function(require,module,exports){
var theSearch = {};

module.exports = theSearch;
},{}]},{},[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])
//# sourceMappingURL=data:application/json;charset:utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9ncnVudC1icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9hcHAvc3JjL2Fycml2ZURlcGFydC9hcnJpdmFsQW5kRGVwYXJ0dXJlLmpzIiwianMvYXBwL3NyYy9hcnJpdmVEZXBhcnQvYXJyaXZlRGVwYXJ0RXZlbnRIYW5kbGVyLmpzIiwianMvYXBwL3NyYy9hcnJpdmVEZXBhcnQvZGF0ZV9zb3J0X2FzYy5qcyIsImpzL2FwcC9zcmMvZW50cnkuanMiLCJqcy9hcHAvc3JjL2hpc3RvZ3JhbS9zZXRVcEdyYXBoLmpzIiwianMvYXBwL3NyYy9oaXN0b2dyYW0vdmFsaWRhdGVHcmFwaFNlYXJjaC5qcyIsImpzL2FwcC9zcmMvc2VhcmNoL2J1aWxkRG9tRWxzLmpzIiwianMvYXBwL3NyYy9zZWFyY2gvZGF0ZVJhbmdlLmpzIiwianMvYXBwL3NyYy9zZWFyY2gvZGlzcGxheVJlc3VsdHMuanMiLCJqcy9hcHAvc3JjL3NlYXJjaC9nZW5lcmF0ZVF1ZXJ5LmpzIiwianMvYXBwL3NyYy9zZXR1cC9idWlsZEZvcm1FbHMuanMiLCJqcy9hcHAvc3JjL3NldHVwL3NldFVwRXZlbnRzLmpzIiwianMvYXBwL3NyYy91dGlscy9lbHMuanMiLCJqcy9hcHAvc3JjL3V0aWxzL2VtcHR5TGlzdC5qcyIsImpzL2FwcC9zcmMvdXRpbHMvZXNjYXBlRGF0ZUZ1bi5qcyIsImpzL2FwcC9zcmMvdXRpbHMvbG9jYXRpb25Jbml0aWFsc1RvTmFtZS5qcyIsImpzL2FwcC9zcmMvdXRpbHMvbWF4TnVtUmVzdWx0cy5qcyIsImpzL2FwcC9zcmMvdXRpbHMvcmV2ZXJzZURhdGVTdHJpbmcuanMiLCJqcy9hcHAvc3JjL3V0aWxzL3NvcnRCeURhdGUuanMiLCJqcy9hcHAvc3JjL3V0aWxzL3RoZVNlYXJjaC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDOUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzFEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ05BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNQQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwidmFyIGVscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvZWxzLmpzJyk7XG52YXIgc29ydEJ5RGF0ZSA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvc29ydEJ5RGF0ZS5qcycpO1xudmFyIGVtcHR5TGlzdCA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvZW1wdHlMaXN0LmpzJyk7XG52YXIgbG9jYXRpb25Jbml0aWFsc1RvTmFtZSA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvbG9jYXRpb25Jbml0aWFsc1RvTmFtZS5qcycpO1xudmFyIGRhdGVfc29ydF9hc2MgPSByZXF1aXJlKCcuL2RhdGVfc29ydF9hc2MuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBhcnJpdmFsQW5kRGVwYXJ0dXJlKHJlc3VsdHMsIHRoZVJhbmdlLCB0aGVTZWFzb24pIHtcblxuXHRlbXB0eUxpc3QoKTtcblxuXHR2YXIgbGVuZ3RoID0gcmVzdWx0cy5kYXRhLmxlbmd0aCAtIDE7XHRcblx0dmFyIHNwZWNpZXNOYW1lID0gJCgnLnNwZWNpZXNTZWFyY2gnKS5zZWxlY3Rpdml0eSgndmFsdWUnKTtcblx0dmFyIHJlc3VsdHNBcnIgPSBbXTtcblx0dmFyIGVhcmxpZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnIgPSBbXTtcblx0dmFyIGxhdGVzdF9kYXRlX3dpdGhpbl9lYWNoX3llYXJfYXJyID0gW107XG5cdHZhciBlYXJsaWVzdF9kYXRlX3dpdGhpbl9zZWNvbmRfaGFsZl9hcnIgPSBbXTtcblx0dmFyIGxhdGVzdF9kYXRlX3dpdGhpbl9maXJzdF9oYWxmX2FyciA9IFtdO1xuXHR2YXIgdGhlT2JqID0ge307XHRcblx0dmFyIHllYXJBcnJheSA9IFtdO1xuXHR2YXIgZmluYWxBcnIgPSBbXTtcblx0dmFyIGk7XG5cdHZhciBjb252ZXJ0ZWRMb2NOYW1lID0gXCJcIjtcblx0dmFyIGFyckxlbmd0aCwgXG5cdFx0YXNEYXRlT2JqXzEsXG5cdFx0YXNEYXRlT2JqXzIsXG5cdFx0ZmluYWxBcnJMZW4sXG5cdFx0aW5jLFxuXHRcdG5ld1Jvd3MsXG5cdFx0Y291bnRlcjtcblxuXHQvLyBTVU1NRVIgLyBXSU5URVIgc3BsaWNpbmdcblx0dmFyIGFyckJ5U2Vhc29uID0gW10sXG5cdFx0bW9udGhBc051bSxcblx0XHRkO1x0XG5cblx0dmFyIGZvbzsgXHRcdFxuXG5cblxuXHQvLyBwb3B1bGF0ZSByZXN1bHRzQXJyXG5cdGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1x0XHRcdFx0XG5cdFx0aWYgKHJlc3VsdHMuZGF0YVtpXS5zcGVjaWVzID09PSBzZWFyY2gpIHtcblx0XHRcdHJlc3VsdHNBcnIucHVzaChyZXN1bHRzLmRhdGFbaV0pO1x0XHRcdFx0XHRcblx0XHR9XG5cdH1cdFxuXG5cdHZhciBsID0gcmVzdWx0c0Fyci5sZW5ndGg7XG5cblx0Ly8gY3JlYXRlIGFycmF5IG9mIHRoZSB5ZWFycyBmb3VuZCB3aXRoaW4gcmVzdWx0c1xuXHRmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG5cblx0XHR2YXIgY3VycmVudFllYXIgPSByZXN1bHRzQXJyW2ldLnllYXI7XG5cblx0XHQvLyBpZiBub3QgYWxyZWFkeSBpbiB0aGUgeWVhciBhcnJheSB0aGVuIHB1c2ggaXQgLSBhdm9pZCBkdXBsaWNhdGlvblxuXHRcdGlmICgkLmluQXJyYXkoY3VycmVudFllYXIsIHllYXJBcnJheSkgPT09IC0xKXtcblx0XHRcdHllYXJBcnJheS5wdXNoKGN1cnJlbnRZZWFyKTtcblx0XHR9XHRcblx0fVxuXG5cblxuXG5cdC8vIGdyb3VwIGJ5IHllYXIgaW4gdGhlT2JqOlxuXG5cdC8vIHRoZU9iaiA9IHtcblx0Ly8gXHRcIjIwMTJcIiA6IHtcblx0Ly8gXHRcdDAgOiBuLCAvLyBuID0gbW9tZW50LmpzIGRhdGUgb2JqZWN0XG5cdC8vIFx0XHQxIDogbixcblx0Ly8gXHRcdGV0Yy4uXG5cdC8vIFx0fSxcblx0Ly8gIFwiMjAxNFwiIDoge1xuXHQvLyBcdFx0MCA6IG4sXG5cdC8vIFx0XHRldGMuLi5cblx0Ly8gXHR9XG5cdC8vIH1cblxuXHQvLyBNQUlOIExPT1AgU0VUVElORyBVUCBUSEUgQVJSQVlTIEFORCBSRUZFUkVOQ0UgT0JKRUNUXG5cdGZvciAodmFyIGMgPSAwOyBjIDwgeWVhckFycmF5Lmxlbmd0aDsgYysrKSB7XG5cblx0XHR0aGVPYmpbeWVhckFycmF5W2NdXSA9IHt9O1xuXHRcdHRoZU9ialt5ZWFyQXJyYXlbY11dLm1vbnRoQXJyID0gW107XG5cdFx0dGhlT2JqW3llYXJBcnJheVtjXV0uZGF5QXJyID0gW107XG5cdFx0dGhlT2JqW3llYXJBcnJheVtjXV0uZGF0ZXNBcnIgPSBbXTtcblx0XHR0aGVPYmpbeWVhckFycmF5W2NdXS5vcmRlcmVkRGF0ZXMgPSBbXTtcblx0XHR0aGVPYmpbeWVhckFycmF5W2NdXS5lYXJsaWVzdERhdGUgPSBcIlwiO1xuXHRcdHRoZU9ialt5ZWFyQXJyYXlbY11dLmxhdGVzdERhdGUgPSBcIlwiO1xuXHRcdHRoZU9ialt5ZWFyQXJyYXlbY11dLmZpcnN0SGFsZiA9IFtdO1xuXHRcdHRoZU9ialt5ZWFyQXJyYXlbY11dLnNlY29uZEhhbGYgPSBbXTtcblxuXG5cdFx0Zm9yICh2YXIgaW5kID0gMDsgaW5kIDwgbDsgaW5kKyspIHtcblx0XHRcdGlmIChyZXN1bHRzQXJyW2luZF0ueWVhciA9PT0geWVhckFycmF5W2NdKSB7XG5cdFx0XHRcdC8vIGZvcm1hdCBhbmQgcHVzaCBkYXRlc1xuXHRcdFx0XHQvLyB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZShyZXN1bHRzQXJyW2luZF0uZm9ybWF0dGVkX2RhdGUpO1xuXHRcdFx0XHR2YXIgY3VycmVudERhdGUgPSBtb21lbnQocmVzdWx0c0FycltpbmRdLmZvcm1hdHRlZF9kYXRlKTtcblxuXHRcdFx0XHR0aGVPYmpbeWVhckFycmF5W2NdXS5kYXRlc0Fyci5wdXNoKGN1cnJlbnREYXRlKTtcdFxuXG5cblx0XHRcdFx0Ly8gZ2VuZXJhdGUgYXJyYXkgb2YgcmVzdWx0cyB3aXRoaW4gbW9udGhzIDEgLSA2IFxuXHRcdFx0XHRpZiAoY3VycmVudERhdGUuaXNCZWZvcmUoeWVhckFycmF5W2NdICsgJy0wNi0zMCcpKSB7XG5cdFx0XHRcdFx0dGhlT2JqW3llYXJBcnJheVtjXV0uZmlyc3RIYWxmLnB1c2goY3VycmVudERhdGUpO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gZ2VuZXJhdGUgYXJyYXkgb2YgcmVzdWx0cyB3aXRoaW4gbW9udGhzIDcgLSAxMiBcblx0XHRcdFx0aWYgKGN1cnJlbnREYXRlLmlzQWZ0ZXIoeWVhckFycmF5W2NdICsgJy0wNi0zMCcpKSB7XG5cdFx0XHRcdFx0dGhlT2JqW3llYXJBcnJheVtjXV0uc2Vjb25kSGFsZi5wdXNoKGN1cnJlbnREYXRlKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIHNvcnQgdGhlIGFycmF5cyBhc2NlbmRpbmdcblx0ICAgIFx0XHR0aGVPYmpbeWVhckFycmF5W2NdXS5maXJzdEhhbGYuc29ydChkYXRlX3NvcnRfYXNjKTtcblx0XHRcdFx0dGhlT2JqW3llYXJBcnJheVtjXV0uc2Vjb25kSGFsZi5zb3J0KGRhdGVfc29ydF9hc2MpO1xuXHQgICAgXHRcdHRoZU9ialt5ZWFyQXJyYXlbY11dLmRhdGVzQXJyLnNvcnQoZGF0ZV9zb3J0X2FzYyk7XG5cdFx0XHR9XHRcdFx0XHRcdFx0XHRcdFx0XG5cdFx0fVx0XG5cblxuXG5cdFx0Ly8gZWFybGllc3QgYW5kIGxhdGVzdCBkYXRlcyBhY3Jvc3MgdGhlIHllYXJcblx0XHR2YXIgYXJyTGVuID0gdGhlT2JqW3llYXJBcnJheVtjXV0uZGF0ZXNBcnIubGVuZ3RoO1xuXHRcdC8vIGdldCBlYXJsaWVzdCA9PiBbMF1cblx0XHR2YXIgZWFybGllc3REYXRlID0gdGhlT2JqW3llYXJBcnJheVtjXV0uZGF0ZXNBcnJbMF07XG5cdFx0Ly8gZ2V0IGxhdGVzdCA9PiBbYXJyTGVuIC0xXSAtMSBiZWNhdXNlIG9mIHplcm8gaW5kZXhcblx0XHR2YXIgbGF0ZXN0RGF0ZSA9IHRoZU9ialt5ZWFyQXJyYXlbY11dLmRhdGVzQXJyW2FyckxlbiAtIDFdO1xuXG5cdFx0ZWFybGllc3RfZGF0ZV93aXRoaW5fZWFjaF95ZWFyX2Fyci5wdXNoKGVhcmxpZXN0RGF0ZSk7XG5cdFx0bGF0ZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnIucHVzaChsYXRlc3REYXRlKTtcblxuXG5cblxuXHRcdC8vIGVhcmxpZXN0IGRhdGUgYWNyb3NzIHRoZSBtb250aHMgNyAtIDEyICh3aW50ZXIgLyBlYXJsaWVzdClcblx0XHRhcnJMZW4gPSB0aGVPYmpbeWVhckFycmF5W2NdXS5zZWNvbmRIYWxmLmxlbmd0aDtcblx0XHQvLyBnZXQgZWFybGllc3QgPT4gWzBdXG5cdFx0ZWFybGllc3REYXRlID0gdGhlT2JqW3llYXJBcnJheVtjXV0uc2Vjb25kSGFsZlswXTtcblxuXHRcdGVhcmxpZXN0X2RhdGVfd2l0aGluX3NlY29uZF9oYWxmX2Fyci5wdXNoKGVhcmxpZXN0RGF0ZSk7XG5cblxuXG5cblx0XHQvLyBsYXRlc3QgZGF0ZSBhY3Jvc3MgbW9udGggMSAtIDYgKHdpbnRlciAvIGxhdGVzdClcblx0XHRhcnJMZW4gPSB0aGVPYmpbeWVhckFycmF5W2NdXS5maXJzdEhhbGYubGVuZ3RoO1xuXHRcdC8vIGdldCBsYXRlc3QgPT4gW2FyckxlbiAtMV0gLTEgYmVjYXVzZSBvZiB6ZXJvIGluZGV4XG5cdFx0bGF0ZXN0RGF0ZSA9IHRoZU9ialt5ZWFyQXJyYXlbY11dLmZpcnN0SGFsZlthcnJMZW4gLSAxXTtcdFx0XG5cblx0XHRsYXRlc3RfZGF0ZV93aXRoaW5fZmlyc3RfaGFsZl9hcnIucHVzaChsYXRlc3REYXRlKTtcblxuXG5cdFx0XG5cdH1cblxuXHQvLyBzb3J0IGFsbCBhcnJheXMgYXNjZW5kaW5nXG5cdGVhcmxpZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnIuc29ydChkYXRlX3NvcnRfYXNjKTtcblx0bGF0ZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnIuc29ydChkYXRlX3NvcnRfYXNjKTtcblx0ZWFybGllc3RfZGF0ZV93aXRoaW5fc2Vjb25kX2hhbGZfYXJyLnNvcnQoZGF0ZV9zb3J0X2FzYyk7XG5cdGxhdGVzdF9kYXRlX3dpdGhpbl9maXJzdF9oYWxmX2Fyci5zb3J0KGRhdGVfc29ydF9hc2MpO1xuXG5cblxuXHQvLyBDT05TT0xFIFJFU1VMVFNcblx0Ly8gdGhlT2JqW3RoZSB5ZWFyXS5kYXRlc0FyciA9IGFycmF5IG9mIG1vbWVudC5qcyBkYXRlIG9iamVjdHMgc29ydGVkIGFzY2VuZGluZ1xuXHQvLyBjb25zb2xlLmxvZyh0aGVPYmopO1xuXHQvLyAvLyBhcnJheSBvZiBlYXJsaWVzdCBkYXRlcyB3aXRoaW4gdGhlIHllYXIsIGZvciBlYWNoIHllYXIgcmVjb3JkZWRcblx0Ly8gY29uc29sZS5sb2coZWFybGllc3RfZGF0ZV93aXRoaW5fZWFjaF95ZWFyX2Fycik7XG5cdC8vIC8vIGFycmF5IG9mIGxhdGVzdCBkYXRlcyB3aXRoaW4gdGhlIHllYXIsIGZvciBlYWNoIHllYXIgcmVjb3JkZWRcblx0Ly8gY29uc29sZS5sb2cobGF0ZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnIpO1xuXG5cdC8vIGNvbnNvbGUubG9nKGVhcmxpZXN0X2RhdGVfd2l0aGluX3NlY29uZF9oYWxmX2Fycik7XG5cblx0Ly8gY29uc29sZS5sb2cobGF0ZXN0X2RhdGVfd2l0aGluX2ZpcnN0X2hhbGZfYXJyKTtcblxuXHRcdFx0XHRcdFx0XHRcblxuXG5cdGlmICh0aGVTZWFzb24gPT09IFwic3VtbWVyXCIgJiYgdGhlUmFuZ2UgPT09IFwiZWFybGllc3RcIikge1xuXHRcdGZvbyA9IGVhcmxpZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnI7XG5cdH0gZWxzZSBpZiAodGhlU2Vhc29uID09PSBcInN1bW1lclwiICYmIHRoZVJhbmdlID09PSBcImxhdGVzdFwiKSB7XG5cdFx0Zm9vID0gbGF0ZXN0X2RhdGVfd2l0aGluX2VhY2hfeWVhcl9hcnI7XG5cdH0gZWxzZSBpZiAodGhlU2Vhc29uID09PSBcIndpbnRlclwiICYmIHRoZVJhbmdlID09PSBcImVhcmxpZXN0XCIpIHtcblx0XHRmb28gPSBlYXJsaWVzdF9kYXRlX3dpdGhpbl9zZWNvbmRfaGFsZl9hcnI7XG5cdH0gZWxzZSBpZiAodGhlU2Vhc29uID09PSBcIndpbnRlclwiICYmIHRoZVJhbmdlID09PSBcImxhdGVzdFwiKSB7XG5cdFx0Zm9vID0gbGF0ZXN0X2RhdGVfd2l0aGluX2ZpcnN0X2hhbGZfYXJyO1xuXHR9XG5cblxuXHQvLyBpZiAodGhlU2Vhc29uID09PSBcInN1bW1lclwiICYmIHRoZVJhbmdlID09PSBcImVhcmxpZXN0XCIgfHwgdGhlU2Vhc29uID09PSBcIndpbnRlclwiICYmIHRoZVJhbmdlID09PSBcImxhdGVzdFwiKSB7XG5cdC8vIFx0Zm9vID0gZWFybGllc3RfZGF0ZV93aXRoaW5fZWFjaF95ZWFyX2Fycjtcblx0Ly8gfSBlbHNlIGlmICh0aGVTZWFzb24gPT09IFwic3VtbWVyXCIgJiYgdGhlUmFuZ2UgPT09IFwibGF0ZXN0XCIgfHwgdGhlU2Vhc29uID09PSBcIndpbnRlclwiICYmIHRoZVJhbmdlID09PSBcImVhcmxpZXN0XCIpIHtcblx0Ly8gXHRmb28gPSBsYXRlc3RfZGF0ZV93aXRoaW5fZWFjaF95ZWFyX2Fycjtcblx0Ly8gfVxuXG5cdGFyckxlbmd0aCA9IGZvby5sZW5ndGg7XG5cdFx0XHRcblx0Zm9yIChpbmMgPSAwOyBpbmMgPCBhcnJMZW5ndGg7IGluYysrKSB7XG5cdFx0XG5cdFx0YXNEYXRlT2JqXzEgPSBmb29baW5jXTtcblx0XHRcblx0XHQvLyBsb29wIHRocm91Z2ggcmVzdWx0c0FyciBtYXRjaGluZyBlYXJsaWVzdCBkYXRlcyBhbmQgcHVzaCB0byBmaW5hbEFyclxuXG5cdFx0Zm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuXG5cdFx0XHRhc0RhdGVPYmpfMiA9IG1vbWVudChyZXN1bHRzQXJyW2ldLmZvcm1hdHRlZF9kYXRlKTtcblxuXHRcdFx0aWYgKG1vbWVudChhc0RhdGVPYmpfMSkuaXNTYW1lKGFzRGF0ZU9ial8yKSkge1xuXG5cdFx0XHRcdGZpbmFsQXJyLnB1c2gocmVzdWx0c0FycltpXSk7XG5cdFx0XHRcdFxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHNvcnRCeURhdGUoZmluYWxBcnIpO1x0XHRcdFxuXG5cdGlmICh0aGVTZWFzb24gPT09IFwic3VtbWVyXCIgJiYgdGhlUmFuZ2UgPT09IFwiZWFybGllc3RcIiB8fCB0aGVTZWFzb24gPT09IFwid2ludGVyXCIgJiYgdGhlUmFuZ2UgPT09IFwibGF0ZXN0XCIpIHtcblxuXHRcdGZvciAoZCA9IDA7IGQgPCBmaW5hbEFyci5sZW5ndGg7IGQrKykge1xuXHRcdFx0bW9udGhBc051bSA9IHBhcnNlSW50KGZpbmFsQXJyW2RdLm1vbnRoKTtcblx0XHRcdGlmIChtb250aEFzTnVtIDw9IDYpIHtcblx0XHRcdFx0YXJyQnlTZWFzb24ucHVzaChmaW5hbEFycltkXSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdH0gZWxzZSBpZiAodGhlU2Vhc29uID09PSBcInN1bW1lclwiICYmIHRoZVJhbmdlID09PSBcImxhdGVzdFwiIHx8IHRoZVNlYXNvbiA9PT0gXCJ3aW50ZXJcIiAmJiB0aGVSYW5nZSA9PT0gXCJlYXJsaWVzdFwiKSB7XG5cblx0XHRmb3IgKGQgPSAwOyBkIDwgZmluYWxBcnIubGVuZ3RoOyBkKyspIHtcblx0XHRcdG1vbnRoQXNOdW0gPSBwYXJzZUludChmaW5hbEFycltkXS5tb250aCk7XG5cdFx0XHRpZiAobW9udGhBc051bSA+IDYpIHtcblx0XHRcdFx0YXJyQnlTZWFzb24ucHVzaChmaW5hbEFycltkXSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblxuXHRmaW5hbEFyckxlbiA9IGFyckJ5U2Vhc29uLmxlbmd0aDtcblxuXHRuZXdSb3dzID0gJCgnPHNwYW4vPicpO1xuXG5cdGZvciAoY291bnRlciA9IDA7IGNvdW50ZXIgPCBmaW5hbEFyckxlbjsgY291bnRlcisrKSB7XG5cdFx0Y29udmVydGVkTG9jTmFtZSA9IGxvY2F0aW9uSW5pdGlhbHNUb05hbWUoYXJyQnlTZWFzb25bY291bnRlcl0ubG9jYXRpb24pO1xuXHRcdCQoJzx0ci8+Jywge1xuXHRcdFx0aHRtbCA6ICc8dGQgY2xhc3M9XCJkYXRlXCI+JyAgKyBhcnJCeVNlYXNvbltjb3VudGVyXS5kYXRlX2Zyb20gKyAnPC90ZD4gJyAgKyAnPHRkIGNsYXNzPVwibG9jYXRpb25cIj4nIFx0XHRcdFx0XHQgKyBjb252ZXJ0ZWRMb2NOYW1lICsgJzwvdGQ+ICcgICsgJzx0ZCBjbGFzcz1cImNvdW50XCI+JyAgKyBhcnJCeVNlYXNvbltjb3VudGVyXS5jb3VudCArICc8L3RkPiAnICsgJzx0ZCBjbGFzcz1cIm9ic2VydmVyXCI+JyAgKyBhcnJCeVNlYXNvbltjb3VudGVyXS5vYnNlcnZlciArICc8L3RkPiAnICsgJzx0ZCBjbGFzcz1cIm5vdGVzXCI+JyAgKyBhcnJCeVNlYXNvbltjb3VudGVyXS5ub3RlcyArICc8L3RkPidcblx0XHRcdH1cdFx0XHRcdFx0XHRcblx0XHQpLmFwcGVuZFRvKG5ld1Jvd3MpO1x0XHRcdFxuXHR9XG5cdCQobmV3Um93cy5odG1sKCkpLmFwcGVuZFRvKGVscy5yZXN1bHRzTGlzdF8yKTtcblxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IGVscy5vdmVybGF5LnJlbW92ZUNsYXNzKCdsb2FkaW5nJyk7IH0sIDMwMCk7XG5cblx0Ly8gcmVzZXQgXG5cdGZpbmFsQXJyTGVuLmxlbmd0aCA9IDA7XG5cbn07IiwidmFyIGVscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvZWxzLmpzJyk7XG52YXIgYXJyaXZhbEFuZERlcGFydHVyZSA9IHJlcXVpcmUoJy4vYXJyaXZhbEFuZERlcGFydHVyZS5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGFycml2ZURlcGFydEV2ZW50SGFuZGxlcihyZXN1bHRzKSB7XG5cblx0dmFyIGxvYWRpbmdDbGFzcyA9IGZ1bmN0aW9uKCl7XG5cdCAgdmFyIGQgPSAkLkRlZmVycmVkKCk7XG5cdCAgICBlbHMub3ZlcmxheS5hZGRDbGFzcygnbG9hZGluZycpO1xuXHQgICAgZC5yZXNvbHZlKCk7XG5cdCAgXHRyZXR1cm4gZC5wcm9taXNlKCk7XG5cdH07XG5cblxuXHR2YXIgZmlyZVJlcyA9IGZ1bmN0aW9uKHRoZVJhbmdlLCB0aGVTZWFzb24pe1xuXHQgIHZhciBkID0gJC5EZWZlcnJlZCgpO1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBhcnJpdmFsQW5kRGVwYXJ0dXJlKHJlc3VsdHMsIHRoZVJhbmdlLCB0aGVTZWFzb24pO1xuXHQgICAgZC5yZXNvbHZlKCk7XG5cdCAgfSwgMTAwKTtcblx0ICByZXR1cm4gZC5wcm9taXNlKCk7XG5cdH07XHRcblxuXG5cdCQoJyNzdWJtaXRfMicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdHZhciB0aGVSYW5nZSA9ICQoJy5hcnJpdmUtZGVwYXJ0OmNoZWNrZWQnKS52YWwoKTtcblx0XHR2YXIgdGhlU2Vhc29uID0gJCgnLmFycml2ZS1kZXBhcnQ6Y2hlY2tlZCcpLmRhdGEoJ3NlYXNvbicpO1xuXHRcdHZhciBzcGVjaWVzU2VhcmNoID0gJCgnLnNwZWNpZXNTZWFyY2gnKS5zZWxlY3Rpdml0eSgndmFsdWUnKTtcblxuXHRcdC8vIHZhbGlkYXRlXHRcdFxuXHRcdGlmIChzcGVjaWVzU2VhcmNoKSB7XG5cblx0XHRcdGlmICgkKCcuYXJyaXZlLWRlcGFydCcpLmlzKFwiOmNoZWNrZWRcIikpIHtcblxuXHRcdFx0XHRsb2FkaW5nQ2xhc3MoKS5waXBlKGZpcmVSZXModGhlUmFuZ2UsIHRoZVNlYXNvbikpO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRhbGVydChcIlNlbGVjdCBmcm9tIGVhcmxpZXN0IG9yIGxhdGVzdCBkYXRlcy5cIik7XG5cdFx0XHR9XHRcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmNoZWNrZWQgPSBmYWxzZTtcblx0XHRcdGFsZXJ0KFwiUGxlYXNlIHNlbGVjdCBhIHNwZWNpZXNcIik7XG5cdFx0fVxuXHR9KTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkYXRlX3NvcnRfYXNjKGRhdGUxLCBkYXRlMikge1xuICBpZiAoZGF0ZTEgPiBkYXRlMikge1xuICBcdHJldHVybiAxO1xuICB9XG4gIGlmIChkYXRlMSA8IGRhdGUyKSB7XG4gIFx0cmV0dXJuIC0xO1xuICB9XG4gIHJldHVybiAwO1xufTtcblxuIiwiLy8gY29uZmlnIFxudmFyIGZvbGwgPSBmb2xsIHx8IHt9O1xuZm9sbC5jb25maWcgPSB7XG5cdC8vIFBsZWFzZSBhZGQgc2l0ZSBVUkwgaGVyZSAobm8gdHJhaWxpbmcgZm9yd2FyZCBzbGFzaClcblxuXHRzaXRlVXJsOiBcImh0dHA6Ly9sb2NhbGhvc3QvZm9sbFwiLFxuXHQvLyBzaXRlVXJsOiBcImh0dHA6Ly9mb2xsLmpheW9udHJhcHMuY29tXCIsXHRcblx0YXBwUGFnZUlEOiA2OVx0XG59O1xuXG4vLyBzZXR1cFxudmFyIHNldFVwRXZlbnRzID0gcmVxdWlyZSgnLi9zZXR1cC9zZXRVcEV2ZW50cy5qcycpO1xudmFyIGJ1aWxkRm9ybUVscyA9IHJlcXVpcmUoJy4vc2V0dXAvYnVpbGRGb3JtRWxzLmpzJyk7XG52YXIgdGhlU2VhcmNoID0gcmVxdWlyZSgnLi91dGlscy90aGVTZWFyY2guanMnKTtcbnZhciBhcnJpdmVEZXBhcnRFdmVudEhhbmRsZXIgPSByZXF1aXJlKCcuL2Fycml2ZURlcGFydC9hcnJpdmVEZXBhcnRFdmVudEhhbmRsZXIuanMnKTtcbnZhciB2YWxpZGF0ZUdyYXBoU2VhcmNoID0gcmVxdWlyZSgnLi9oaXN0b2dyYW0vdmFsaWRhdGVHcmFwaFNlYXJjaC5qcycpO1xuXG5cblxuXG53aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkge1x0XG5cblx0JC5hamF4KHtcblx0ICAgIHVybDogZm9sbC5jb25maWcuc2l0ZVVybCArICcvd3AtanNvbi9wYWdlcycsXG5cdCAgICBkYXRhOiB7XG5cdCAgICAgICAgZmlsdGVyOiB7XG5cdCAgICAgICAgIFwicGFnZV9pZFwiOiBmb2xsLmNvbmZpZy5hcHBQYWdlSUQsXG5cdCAgICAgICAgfVxuXHQgICAgfSxcblx0ICAgIGRhdGFUeXBlOiAnanNvbicsXG5cdCAgICB0eXBlOiAnR0VUJyxcblx0ICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcdFxuXHQgICAgXHR2YXIgZGF0YXNldFVybCA9IGRhdGFbMF0ubWV0YS5kYXRhc2V0LnVybDtcblxuXHRcdFx0UGFwYS5wYXJzZShkYXRhc2V0VXJsLCB7XG5cdFx0XHRcdGRvd25sb2FkOiB0cnVlLFxuXHRcdFx0XHRoZWFkZXI6IHRydWUsXG5cdFx0XHRcdGNvbXBsZXRlOiBmdW5jdGlvbihyZXN1bHRzKSB7XHRcblx0XHRcdFx0XHRidWlsZEZvcm1FbHMocmVzdWx0cyk7XG5cdFx0XHRcdFx0c2V0VXBFdmVudHMocmVzdWx0cyk7XG5cdFx0XHRcdFx0YXJyaXZlRGVwYXJ0RXZlbnRIYW5kbGVyKHJlc3VsdHMpO1xuXHRcdFx0XHRcdHZhbGlkYXRlR3JhcGhTZWFyY2gocmVzdWx0cyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHQgICAgfSxcblx0ICAgIGVycm9yOiBmdW5jdGlvbigpIHtcblx0ICAgICAgICAvLyBlcnJvciBjb2RlXG5cdCAgICB9XG5cdH0pO1x0XG5cblx0Ly8gdmFyIGRhdGFzZXRVcmwgPSBcImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9mb2xsL3dwLWNvbnRlbnQvdGhlbWVzL2ZvbGwvY3N2L2RhdGFzZXQuY3N2XCI7XG5cdC8vIFBhcGEucGFyc2UoZGF0YXNldFVybCwge1xuXHQvLyBcdGRvd25sb2FkOiB0cnVlLFxuXHQvLyBcdGhlYWRlcjogdHJ1ZSxcblx0Ly8gXHRjb21wbGV0ZTogZnVuY3Rpb24ocmVzdWx0cykge1x0XG5cdC8vIFx0XHRidWlsZEZvcm1FbHMocmVzdWx0cyk7XG5cdC8vIFx0XHRzZXRVcEV2ZW50cyhyZXN1bHRzKTtcblx0Ly8gXHRcdGFycml2ZURlcGFydEV2ZW50SGFuZGxlcihyZXN1bHRzKTtcblx0Ly8gXHRcdHZhbGlkYXRlR3JhcGhTZWFyY2gocmVzdWx0cyk7XG5cdC8vIFx0fVxuXHQvLyB9KTtcdFxuXG5cbn07XG5cbiIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gc2V0VXBHcmFwaChncmFwaEFyciwgZ3JhcGhPYmopIHtcblxuXHRjb25zb2xlLmxvZyhncmFwaE9iaik7XG5cblx0dmFyIGdyYXBoQXJyRmluYWwgPSBbXSxcblx0XHRzdW1PZkNvdW50ID0gMCxcblx0XHRzdW1PZkNvdW50RGl2aWRlZCxcblx0XHRjb3VudEFyciA9IFtdLFxuXHRcdGhpZ2hlc3ROdW1iZXJTdG9yZSA9IFtdLFxuXHRcdGhpZ2hlc3ROdW0sXG5cdFx0aGlnaGVzdE51bUFyciA9IFtdLFxuXHRcdGksXG5cdFx0YztcblxuXG5cblx0Zm9yIChpID0gMDsgaSA8IGdyYXBoQXJyLmxlbmd0aDsgaSsrKSB7XG5cblx0XHQvLyBnZXQgdGhlIGRhdGUgb2YgdGhlIHJlY29yZCBhcyBhIG1vbWVudCgpIG9iamVjdFxuXHRcdHZhciBjdXJyZW50RGF0ZSA9IG1vbWVudChncmFwaEFycltpXS5mb3JtYXR0ZWRfZGF0ZSk7XHRcblxuXHRcdC8vIHN1YnRyYWN0IGEgZGF5IGZyb20gSkFOIDAxIHRvIGluY2x1ZGUgdGhlIEpBTiAwMSBpbiByZXN1bHRzXG5cdFx0dmFyIGdyYXBoX3N0YXJ0X3N1YnRyYWN0ZWQgPSBtb21lbnQoZ3JhcGhPYmouZ3JhcGhfc3RhcnQpLnN1YnRyYWN0KDEsICdkYXlzJyk7XG5cblx0XHQvLyBnZXQgYWxsIHJlY29yZHMgYmV0d2VlbiBzZWxlY3RlZCByYW5nZVxuXHRcdGlmIChjdXJyZW50RGF0ZS5pc0JldHdlZW4oZ3JhcGhfc3RhcnRfc3VidHJhY3RlZCwgZ3JhcGhPYmouZ3JhcGhfZW5kKSkge1x0XHRcdFx0XHRcblx0XHRcdGdyYXBoQXJyRmluYWwucHVzaChncmFwaEFycltpXSk7XG5cdFx0fVxuXHR9XG5cblxuXHR2YXIgZ3JhcGhBcnJGaW5hbExlbmd0aCA9IGdyYXBoQXJyRmluYWwubGVuZ3RoLFxuXHRcdGNvdW50SW50LFxuXHRcdG1vbnRoSW50O1xuXG5cblx0Ly8gZ2VuZXJhdGUgc3VtIGNvdW50IGFycmF5XG5cblx0Ly8gbG9vcCB0aHJvdWdoIGVhY2ggbW9udGggd2l0aGluIHJhbmdlXG5cdGZvciAoYyA9IDE7IGMgPCAxMzsgYysrKSB7XHRcblxuXHRcdC8vIGZvciBlYWNoIG1vbnRoIGdyYWIgaGlnaGVzdCBudW1iZXJzIGFuZCBzdW0gY291bnRzXG5cdFx0Zm9yIChpID0gMDsgaSA8IGdyYXBoQXJyRmluYWwubGVuZ3RoOyBpKyspIHtcdFxuXG5cdFx0XHRpZiAoZ3JhcGhBcnJGaW5hbFtpXS5jb3VudCA9PT0gXCJcIikge1xuXHRcdFx0XHRncmFwaEFyckZpbmFsW2ldLmNvdW50ID0gXCIwXCI7XG5cdFx0XHR9XG5cblx0XHRcdGNvdW50SW50ID0gcGFyc2VJbnQoZ3JhcGhBcnJGaW5hbFtpXS5jb3VudCk7XG5cdFx0XHRtb250aEludCA9IHBhcnNlSW50KGdyYXBoQXJyRmluYWxbaV0ubW9udGgpO1x0XHRcdFx0XG5cblx0XHRcdGlmIChtb250aEludCA9PT0gYykge1xuXHRcdFx0XHQvLyBoaWdoZXN0TnVtYmVyU3RvcmUucHVzaChjb3VudEludCk7XG5cdFx0XHRcdHN1bU9mQ291bnQgKz0gY291bnRJbnQ7XHRcdFx0XHRcdFx0XHRcblx0XHRcdH1cblx0XHR9XHRcblxuXHRcdC8vIGZvciBtb250aHMgd2l0aCBubyB2YWx1ZXMgcHVzaCBhIHplcm9cblx0XHQvLyBpZiAoaGlnaGVzdE51bWJlclN0b3JlLmxlbmd0aCA9PT0gMCkge1xuXHRcdC8vIFx0aGlnaGVzdE51bUFyci5wdXNoKDApO1xuXHRcdC8vIH0gZWxzZSB7XG5cdFx0Ly8gXHQvLyBnZXQgaGlnaGVzdCB2YWx1ZVxuXHRcdC8vIFx0aGlnaGVzdE51bSA9IGdldE1heE9mQXJyYXkoaGlnaGVzdE51bWJlclN0b3JlKTtcblx0XHQvLyBcdC8vIGRpdmlkZSBieSBudW1iZXIgb2YgeWVhcnNcblx0XHQvLyBcdGhpZ2hlc3ROdW0gPSBoaWdoZXN0TnVtIC8gZ3JhcGhPYmoubnVtT2ZZZWFycztcblx0XHQvLyBcdC8vIHB1c2ggaGlnaGVzdCB2YWx1ZSB0byBoaWdoZXN0TnVtQXJyXG5cdFx0Ly8gXHRoaWdoZXN0TnVtQXJyLnB1c2goaGlnaGVzdE51bSk7XG5cdFx0Ly8gfVxuXG5cdFx0Ly8gc3VtIGRpdmlkZWQgYnkgbnVtYmVyIG9mIHllYXJzXG5cdFx0c3VtT2ZDb3VudERpdmlkZWQgPSBzdW1PZkNvdW50IC8gZ3JhcGhPYmoubnVtT2ZZZWFycztcblx0XHRjb3VudEFyci5wdXNoKHN1bU9mQ291bnREaXZpZGVkKTtcblxuXHRcdC8vIHJlc2V0IFxuXHRcdHN1bU9mQ291bnQgPSAwO1x0XG5cdFx0aGlnaGVzdE51bSA9IDA7XHRcblx0XHRoaWdoZXN0TnVtYmVyU3RvcmUubGVuZ3RoID0gMDtcdFxuXG5cdH1cblxuXG5cblxuXG5cblxuXG5cblxuXG5cdC8vIC8vIGdlbmVyYXRlIGhpZ2hlc3QgbnVtYmVyIGFycmF5XG5cblx0Ly8gdmFyIGxlbmd0aCA9IGdyYXBoT2JqLnllYXJzV2l0aGluUmFuZ2UubGVuZ3RoO1xuXHQvLyB2YXIgcmVzdWx0c1lZLFxuXHQvLyBcdHJlc3VsdHNNTSxcblx0Ly8gXHRyZXN1bHRzQztcblxuXHQvLyB2YXIgZm9vID0gMDtcblxuXHQvLyBcdGdyYXBoT2JqLnllYXJzID0ge307XG5cblx0Ly8gZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKykge1xuXG5cdC8vIFx0dmFyIGN1cnJZZWFyID0gZ3JhcGhPYmoueWVhcnNXaXRoaW5SYW5nZVtpbmRleF07XG5cblx0Ly8gXHRncmFwaE9iai55ZWFyc1tjdXJyWWVhcl0gPSB7fTtcblx0XHRcblx0Ly8gXHRmb3IgKGkgPSAwOyBpIDwgZ3JhcGhBcnJGaW5hbC5sZW5ndGg7IGkrKykge1xuXG5cdC8vIFx0XHRyZXN1bHRzWVkgPSBwYXJzZUludChncmFwaEFyckZpbmFsW2ldLnllYXIpO1xuXHQvLyBcdFx0cmVzdWx0c01NID0gcGFyc2VJbnQoZ3JhcGhBcnJGaW5hbFtpXS5tb250aCk7XG5cdC8vIFx0XHRyZXN1bHRzQyA9IHBhcnNlSW50KGdyYXBoQXJyRmluYWxbaV0uY291bnQpO1xuXG5cdC8vIFx0XHRpZiAocmVzdWx0c1lZID09PSBjdXJyWWVhcikge1xuXG5cdC8vIFx0XHRcdC8vIGxvb3AgdGhyb3VnaCBlYWNoIG1vbnRoIHdpdGhpbiB5ZWFyXG5cdC8vIFx0XHRcdGZvciAoYyA9IDE7IGMgPCAxMzsgYysrKSB7XHRcblxuXHQvLyBcdFx0XHRcdGlmIChyZXN1bHRzTU0gPT09IGMpIHtcblx0Ly8gXHRcdFx0XHRcdGdyYXBoT2JqLnllYXJzW2N1cnJZZWFyXVtjXSA9IFtdO1x0XG5cdC8vIFx0XHRcdFx0XHRncmFwaE9iai55ZWFyc1tjdXJyWWVhcl1bY10ucHVzaChyZXN1bHRzQyk7XG5cdC8vIFx0XHRcdFx0fVxuXG5cdC8vIFx0XHRcdH1cblx0XHRcdFxuXHQvLyBcdFx0fVxuXHRcdFx0XHRcdFxuXHQvLyBcdH1cblxuXHQvLyB9XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cdGNvbnNvbGUubG9nKGNvdW50QXJyKTtcblxuXHQvLyBjaGVjayBpZiBhbGwgdmFsdWVzIGFyZSAwIC0gaS5lIG5vIHJlY29yZHMgZm9yIGEgZ2l2ZW4gcGVyaW9kXG5cdHZhciBjb3VudGVyID0gMDtcblx0Zm9yIChpID0gMDsgaSA8IGNvdW50QXJyLmxlbmd0aDsgaSsrKSB7XG5cdFx0Y291bnRlciArPSBjb3VudEFycltpXTtcdFx0XHRcdFx0XHRcdFx0XHRcdFxuXHR9IFxuXHRpZiAoY291bnRlciA9PT0gMCkge1xuXHRcdGFsZXJ0KFwiTm8gcmVjb3JkcyBmb3IgdGhpcyBwZXJpb2QuXCIpO1xuXHRcdGlmICh3aW5kb3cubXlCYXIpIHtcblx0XHRcdG15QmFyLmNsZWFyKCk7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fSBlbHNlIHtcblxuXHRcdGlmICh3aW5kb3cubXlCYXIpIHtcblx0XHRcdC8vIHVwZGF0ZSBcblx0XHRcdGZvciAodmFyIGwgPSAwOyBsIDwgbXlCYXIuZGF0YXNldHNbMF0uYmFycy5sZW5ndGg7IGwrKykge1xuXHRcdFx0XHRteUJhci5kYXRhc2V0c1swXS5iYXJzW2xdLnZhbHVlID0gY291bnRBcnJbbF07XHRcdFx0XHRcdFxuXHRcdFx0fVxuXG5cdFx0XHRteUJhci51cGRhdGUoKTtcblxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdHZhciBiYXJDaGFydERhdGEgPSB7XG5cdFx0XHRsYWJlbHMgOiBbXCJKYW51YXJ5XCIsXCJGZWJydWFyeVwiLFwiTWFyY2hcIixcIkFwcmlsXCIsXCJNYXlcIixcIkp1bmVcIixcIkp1bHlcIixcIkF1Z3VzdFwiLFwiU2VwdGVtYmVyXCIsXCJPY3RvYmVyXCIsXCJOb3ZlbWJlclwiLFwiRGVjZW1iZXJcIl0sXG5cdFx0XHRkYXRhc2V0cyA6IFtcblx0XHRcdFx0e1xuXHRcdFx0XHRcdGZpbGxDb2xvciA6IFwicmdiYSgwMDAsMDAwLDAwMCwwLjUpXCIsXG5cdFx0XHRcdFx0c3Ryb2tlQ29sb3IgOiBcInJnYmEoMDAwLDAwMCwwMDAsMC44KVwiLFxuXHRcdFx0XHRcdGhpZ2hsaWdodEZpbGw6IFwicmdiYSgwMDAsMDAwLDAwMCwwLjc1KVwiLFxuXHRcdFx0XHRcdGhpZ2hsaWdodFN0cm9rZTogXCJyZ2JhKDAwMCwwMDAsMDAwLDEpXCIsXG5cdFx0XHRcdFx0ZGF0YSA6IGNvdW50QXJyXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyAsXG5cdFx0XHRcdC8vIHtcblx0XHQgIC8vICAgICAgICAgICBsYWJlbDogXCJNeSBTZWNvbmQgZGF0YXNldFwiLFxuXHRcdCAgLy8gICAgICAgICAgIGZpbGxDb2xvcjogXCJyZ2JhKDE1MSwxODcsMjA1LDAuNSlcIixcblx0XHQgIC8vICAgICAgICAgICBzdHJva2VDb2xvcjogXCJyZ2JhKDE1MSwxODcsMjA1LDAuOClcIixcblx0XHQgIC8vICAgICAgICAgICBoaWdobGlnaHRGaWxsOiBcInJnYmEoMTUxLDE4NywyMDUsMC43NSlcIixcblx0XHQgIC8vICAgICAgICAgICBoaWdobGlnaHRTdHJva2U6IFwicmdiYSgxNTEsMTg3LDIwNSwxKVwiLFxuXHRcdCAgLy8gICAgICAgICAgIGRhdGE6IGhpZ2hlc3ROdW1BcnJcblx0XHQgIC8vICAgICAgIH1cblx0XHRcdF1cblxuXHRcdFx0fTtcblxuXG5cdFx0XHR2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpO1xuXHRcdFx0d2luZG93Lm15QmFyID0gbmV3IENoYXJ0KGN0eCkuQmFyKGJhckNoYXJ0RGF0YSwge1xuXHRcdFx0XHRyZXNwb25zaXZlIDogdHJ1ZVxuXHRcdFx0fSk7XHRcblx0XHRcdCQoJy55LWF4aXMtaGVhZCcpLmFkZENsYXNzKCdvbicpO1x0XHRcdFxuXHRcdH1cdFxuXG5cdH1cbn07XG5cbiIsInZhciBzZXRVcEdyYXBoID0gcmVxdWlyZSgnLi9zZXRVcEdyYXBoLmpzJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gdmFsaWRhdGVHcmFwaFNlYXJjaChyZXN1bHRzKSB7XG5cdFx0XG5cdCQoJyNnZW5lcmF0ZUdyYXBoJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpe1xuXG5cdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuXHRcdHZhciBzcGVjaWVzTmFtZSA9ICQoJy5zcGVjaWVzU2VhcmNoJykuc2VsZWN0aXZpdHkoJ3ZhbHVlJyk7XG5cdFx0Ly8gZ2V0IHRoZSBzdGFydCBkYXRlXG5cdFx0dmFyIHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN0YXJ0LWdyYXBoXCIpO1xuXHRcdHZhciBncmFwaF9zdGFydCA9IHMub3B0aW9uc1tzLnNlbGVjdGVkSW5kZXhdLnZhbHVlO1x0XHRcblx0XHQvLyBnZXQgdGhlIGVuZCBkYXRlXG5cdFx0dmFyIGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVuZC1ncmFwaFwiKTtcblx0XHR2YXIgZ3JhcGhfZW5kID0gZS5vcHRpb25zW2Uuc2VsZWN0ZWRJbmRleF0udmFsdWU7XHRcblxuXG5cblx0XHRpZiAoc3BlY2llc05hbWUgPT09IG51bGwpIHtcblx0XHRcdGFsZXJ0KCdQbGVhc2Ugc2VsZWN0IGEgc3BlY2llcycpO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cdFxuXHRcdFxuXG5cdFx0aWYgKHNwZWNpZXNOYW1lKSB7XG5cdFx0XHRcblx0XHRcdGlmIChncmFwaF9zdGFydCA9PT0gXCIwMDAwXCIgfHwgZ3JhcGhfZW5kID09PSBcIjAwMDBcIiB8fCBncmFwaF9zdGFydCA+IGdyYXBoX2VuZCkge1xuXHRcdFx0XHRhbGVydChcIkludmFsaWQgZGF0ZSByYW5nZS5cIik7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cdFx0XG5cblx0XHRcdHZhciBncmFwaE9iaiA9IHt9O1xuXHRcdFx0Z3JhcGhPYmoueWVhcnNXaXRoaW5SYW5nZSA9IFtdO1xuXG5cdFx0XHQvLyBudW1iZXIgb2YgeWVhcnMgaW4gc2VhcmNoXG5cdFx0XHR2YXIgZ3JTcnQgPSBwYXJzZUludChncmFwaF9zdGFydCksXG5cdFx0XHRcdGdyRW5kID0gcGFyc2VJbnQoZ3JhcGhfZW5kKTsgXG5cblxuXHRcdFx0XHQvLyBhZGQgMSB0byBncmFwaF9lbmQgYW5kIGdyRW5kIC0gdG8gc2hpZnQgdGhlIGVuZCBkYXRlIHVwIGEgeWVhci4uLlxuXHRcdFx0IFx0Ly8gdGhpcyBhbGxvd3MgYSBtb3JlIHJlYWRhYmxlIGVuZC1vZi1yYW5nZSBsYWJlbCBcblx0XHRcdCBcdC8vIGUuZy4gaW5zdGVhZCBvZiByZWFkaW5nIFwiIC4uLiB0byAxc3QgSmFuIDIwMTBcIiB0byByZWFkIFwiIC4uLiB0byAzMXN0IERlYyAyMDA5IDx0aGUgcHJldmlvdXMgeWVhcj5cIlxuXHRcdFx0IFx0Ly8gcmVmZmVyIHRvIHRoZSB0aGVPYmogZm9yIGFjdHVhbCBzdGFydCBhbmQgZW5kIGRhdGVzIC0gZ3JhcGhPYmouZ3JhcGhfc3RhcnQgYW5kIGdyYXBoT2JqLmdyYXBoX2VuZFxuXHRcdFx0XHRnckVuZCA9IGdyRW5kICsgMTtcblx0XHRcdFx0Z3JhcGhfZW5kID0gZ3JFbmQudG9TdHJpbmcoKTtcblxuXG5cdFx0XHR2YXJcdG51bU9mWWVhcnMgPSBnckVuZCAtIGdyU3J0O1xuXG5cdFx0XHQvLyBmb3JtYXQgeWVhciBmb3IgbW9tZW50LmpzXHRcblx0XHRcdGdyYXBoX3N0YXJ0ID0gZ3JhcGhfc3RhcnQgKyBcIi0wMS0wMVwiO1xuXHRcdFx0Z3JhcGhfZW5kID0gZ3JhcGhfZW5kICsgXCItMDEtMDFcIjtcblxuXHRcdFx0Ly8gYXJyYXkgb2YgeWVhcnMgd2l0aGluIHJhbmdlXG5cdFx0XHR2YXIgY291bnRlciA9IGdyU3J0O1xuXHRcdFx0d2hpbGUoY291bnRlciA8IGdyRW5kKSB7XG5cdFx0XHRcdGdyYXBoT2JqLnllYXJzV2l0aGluUmFuZ2UucHVzaChjb3VudGVyKTtcblx0XHRcdFx0Y291bnRlcisrO1xuXHRcdFx0fVxuXG5cdFx0XHRcblx0XHRcdGdyYXBoT2JqLmdyYXBoX3N0YXJ0ID0gZ3JhcGhfc3RhcnQ7XG5cdFx0XHRncmFwaE9iai5ncmFwaF9lbmQgPSBncmFwaF9lbmQ7XG5cdFx0XHRncmFwaE9iai5udW1PZlllYXJzID0gbnVtT2ZZZWFycztcblxuXG5cdFx0XHR2YXIgZ3JhcGhBcnIgPSBbXTtcblx0XHRcdHZhciBsZW4gPSByZXN1bHRzLmRhdGEubGVuZ3RoIC0gMTtcdFx0XG5cblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcblxuXHRcdFx0XHRpZiAocmVzdWx0cy5kYXRhW2ldLnNwZWNpZXMgPT09IHNwZWNpZXNOYW1lKSB7XG5cdFx0XHRcdFx0Z3JhcGhBcnIucHVzaChyZXN1bHRzLmRhdGFbaV0pO1xuXHRcdFx0XHR9XHRcblx0XHRcdH1cblxuXHRcdFx0c2V0VXBHcmFwaChncmFwaEFyciwgZ3JhcGhPYmopO1xuXHRcdH0gXG5cdFx0XHRcdFx0XHRcblx0fSk7XG5cbn07IiwiLy8gdXRpbHNcbnZhciBlbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2Vscy5qcycpO1xudmFyIHRoZVNlYXJjaCA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvdGhlU2VhcmNoLmpzJyk7XG52YXIgbG9jYXRpb25Jbml0aWFsc1RvTmFtZSA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvbG9jYXRpb25Jbml0aWFsc1RvTmFtZS5qcycpO1xuXG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gYnVpbGREb21FbHModG90YWxSZXN1bHRzLCByZXN1bHRzQXJyKSB7XG5cdHZhciBuZXdSb3dzID0gJCgnPHNwYW4vPicpO1xuXHR2YXIgY29udmVydGVkTG9jTmFtZSA9IFwiXCI7XG5cblx0Zm9yICh2YXIgaSA9IDA7IGkgPCB0b3RhbFJlc3VsdHM7IGkrKykge1xuXHRcdGNvbnZlcnRlZExvY05hbWUgPSBsb2NhdGlvbkluaXRpYWxzVG9OYW1lKHJlc3VsdHNBcnJbaV0ubG9jYXRpb24pO1xuXHRcdCQoJzx0ci8+Jywge1xuXHRcdFx0aHRtbCA6ICc8dGQgY2xhc3M9XCJzcGVjaWVzXCI+JyAgKyByZXN1bHRzQXJyW2ldLnNwZWNpZXMgKyAnPC90ZD4gJyAgKyAnPHRkIGNsYXNzPVwiZGF0ZVwiPicgICsgcmVzdWx0c0FycltpXS5kYXRlX2Zyb20gKyAnPC90ZD4gJyAgKyAnPHRkIGNsYXNzPVwibG9jYXRpb25cIj4nICsgY29udmVydGVkTG9jTmFtZSArICc8L3RkPiAnICArICc8dGQgY2xhc3M9XCJjb3VudFwiPicgICsgcmVzdWx0c0FycltpXS5jb3VudCArICc8L3RkPiAnICsgJzx0ZCBjbGFzcz1cIm9ic2VydmVyXCI+JyAgKyByZXN1bHRzQXJyW2ldLm9ic2VydmVyICsgJzwvdGQ+ICcgKyAnPHRkIGNsYXNzPVwibm90ZXNcIj4nICArIHJlc3VsdHNBcnJbaV0ubm90ZXMgKyAnPC90ZD4nXG5cdFx0XHR9XHRcdFx0XHRcdFx0XG5cdFx0KS5hcHBlbmRUbyhuZXdSb3dzKTtcdFx0XHRcblx0fVxuXHQkKG5ld1Jvd3MuaHRtbCgpKS5hcHBlbmRUbyhlbHMucmVzdWx0c0xpc3QpO1xufTsiLCIvLyB1dGlsc1xudmFyIGVscyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvZWxzLmpzJyk7XG52YXIgdGhlU2VhcmNoID0gcmVxdWlyZSgnLi8uLi91dGlscy90aGVTZWFyY2guanMnKTtcbnZhciBzb3J0QnlEYXRlID0gcmVxdWlyZSgnLi8uLi91dGlscy9zb3J0QnlEYXRlLmpzJyk7XG52YXIgbWF4TnVtUmVzdWx0cyA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvbWF4TnVtUmVzdWx0cy5qcycpO1xudmFyIGVzY2FwZURhdGVGdW4gPSByZXF1aXJlKCcuLy4uL3V0aWxzL2VzY2FwZURhdGVGdW4uanMnKTtcblxuLy8gc2VhcmNoXG52YXIgZGlzcGxheVJlc3VsdHMgPSByZXF1aXJlKCcuL2Rpc3BsYXlSZXN1bHRzLmpzJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkYXRlUmFuZ2UocmVzdWx0c0FyciwgdGhlU2VhcmNoKSB7XG5cblx0dmFyIGRhdGVJbnB1dENoZWNrZWQgPSAkKCdpbnB1dFtuYW1lPVwiZGF0ZS1yYW5nZVwiXTpjaGVja2VkJyk7XG5cdHZhciB1c2VyU3RhcnREYXRlID0gJCgnI3N0YXJ0IGlucHV0W3R5cGU9XCJoaWRkZW5cIl0nKS52YWwoKTtcblx0dmFyIHVzZXJFbmR0RGF0ZSA9ICQoJyNlbmQgaW5wdXRbdHlwZT1cImhpZGRlblwiXScpLnZhbCgpO1xuXHR2YXIgZmlsdGVyZWRBcnIgPSBbXTtcdFx0XG5cdFxuXG5cdGlmIChkYXRlSW5wdXRDaGVja2VkLmxlbmd0aCA+IDApIHtcblxuXHRcdGlmIChkYXRlSW5wdXRDaGVja2VkLnZhbCgpID09PSBcImJ5LXJhbmdlXCIpIHtcblxuXHRcdFx0dGhlU2VhcmNoLmJ5bW9udGggPSBcIlwiO1xuXHRcdFx0XG5cdFx0XHRpZiAodXNlclN0YXJ0RGF0ZS5sZW5ndGggPT09IDAgfHwgdXNlckVuZHREYXRlLmxlbmd0aCA9PT0gMCkge1xuXG5cdFx0XHRcdGVzY2FwZURhdGVGdW4oKTtcblxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHR2YXIgc3RhcnREYXRlID0gbW9tZW50KHVzZXJTdGFydERhdGUpO1xuXHRcdFx0XHR2YXIgZW5kRGF0ZSA9IG1vbWVudCh1c2VyRW5kdERhdGUpO1xuXG5cblx0XHRcdFx0aWYgKGVuZERhdGUuaXNCZWZvcmUoc3RhcnREYXRlKSkge1xuXHRcdFx0XHRcdGVzY2FwZURhdGVGdW4oKTtcblxuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0Ly8gdmFyIHN0YXJ0RGF0ZSA9IG5ldyBEYXRlKHVzZXJTdGFydERhdGUpO1xuXHRcdFx0XHRcdC8vIHZhciBlbmREYXRlID0gbmV3IERhdGUodXNlckVuZHREYXRlKTtcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0dGhlU2VhcmNoLmRhdGVyYW5nZSA9IHRydWU7XG5cdFx0XHRcdFx0dGhlU2VhcmNoLnN0YXJ0ZGF0ZSA9IHVzZXJTdGFydERhdGU7XG5cdFx0XHRcdFx0dGhlU2VhcmNoLmVuZGRhdGUgPSB1c2VyRW5kdERhdGU7XG5cblx0XHRcdFx0XHRmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgdGhlU2VhcmNoLm51bU9mUmVzdWx0czsgaW5kZXgrKykge1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyB2YXIgY3VycmVudERhdGUgPSBuZXcgRGF0ZShyZXN1bHRzQXJyW2luZGV4XS5mb3JtYXR0ZWRfZGF0ZSk7XG5cdFx0XHRcdFx0XHR2YXIgY3VycmVudERhdGUgPSBtb21lbnQocmVzdWx0c0FycltpbmRleF0uZm9ybWF0dGVkX2RhdGUpO1x0XHRcdFx0XHRcblxuXHRcdFx0XHRcdFx0Ly8gaWYgKGN1cnJlbnREYXRlID4gc3RhcnREYXRlICYmIGN1cnJlbnREYXRlIDwgZW5kRGF0ZSApIHtcblx0XHRcdFx0XHRcdC8vIFx0ZmlsdGVyZWRBcnIucHVzaChyZXN1bHRzQXJyW2luZGV4XSk7XG5cdFx0XHRcdFx0XHQvLyB9XG5cblx0XHRcdFx0XHRcdGlmICggY3VycmVudERhdGUuaXNCZXR3ZWVuKHN0YXJ0RGF0ZSwgZW5kRGF0ZSkgKSB7XG5cdFx0XHRcdFx0XHRcdGZpbHRlcmVkQXJyLnB1c2gocmVzdWx0c0FycltpbmRleF0pO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0dGhlU2VhcmNoLm51bU9mUmVzdWx0cyA9IGZpbHRlcmVkQXJyLmxlbmd0aDtcblx0XHRcdFx0XHRzb3J0QnlEYXRlKGZpbHRlcmVkQXJyLCB0aGVTZWFyY2gpO1xuXHRcdFx0XHRcdG1heE51bVJlc3VsdHMoZmlsdGVyZWRBcnIsIHRoZVNlYXJjaCk7XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRkaXNwbGF5UmVzdWx0cyhmaWx0ZXJlZEFyciwgdGhlU2VhcmNoKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XHRcdFx0XG5cblx0XHR9IGVsc2UgaWYoZGF0ZUlucHV0Q2hlY2tlZC52YWwoKSA9PT0gXCJieS1tb250aFwiKSB7XG5cblx0XHRcdHRoZVNlYXJjaC5kYXRlcmFuZ2UgPSBmYWxzZTtcblx0XHRcdFxuXHRcdFx0Ly8gZ3JhYiB0aGUgaW5vdXQgdmFsdWVcblx0XHRcdHZhciB1c2VyTW9udGhTZWxlY3RlZCA9ICQoJyNieU1vbnRoJykudmFsKCk7XHRcblx0XHRcdHRoZVNlYXJjaC5ieW1vbnRoID0gdXNlck1vbnRoU2VsZWN0ZWQ7XHRcdFx0XG5cdFx0XHRcdFxuXHRcdFx0Ly8gZ2VuZXJhdGUgZmlsdGVyZWRBcnJcblx0XHRcdGZvciAodmFyIGkgPSAwOyBpIDwgdGhlU2VhcmNoLm51bU9mUmVzdWx0czsgaSsrKSB7XG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAocmVzdWx0c0FycltpXS5tb250aCA9PT0gdXNlck1vbnRoU2VsZWN0ZWQpIHtcblx0XHRcdFx0XHRmaWx0ZXJlZEFyci5wdXNoKHJlc3VsdHNBcnJbaV0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHRoZVNlYXJjaC5udW1PZlJlc3VsdHMgPSBmaWx0ZXJlZEFyci5sZW5ndGg7XG5cdFx0XHRzb3J0QnlEYXRlKGZpbHRlcmVkQXJyLCB0aGVTZWFyY2gpO1xuXHRcdFx0bWF4TnVtUmVzdWx0cyhmaWx0ZXJlZEFyciwgdGhlU2VhcmNoKTtcblx0XHRcdGRpc3BsYXlSZXN1bHRzKGZpbHRlcmVkQXJyLCB0aGVTZWFyY2gpO1xuXG5cblx0XHR9IGVsc2UgaWYgKGRhdGVJbnB1dENoZWNrZWQudmFsKCkgPT09IFwiYWxsLWRhdGVzXCIpIHtcblxuXHRcdFx0dGhlU2VhcmNoLmJ5bW9udGggPSBcIlwiO1xuXG5cdFx0XHR0aGVTZWFyY2guZGF0ZXJhbmdlID0gZmFsc2U7XHRcdFx0XG5cdFx0XHRzb3J0QnlEYXRlKHJlc3VsdHNBcnIpO1xuXHRcdFx0bWF4TnVtUmVzdWx0cyhyZXN1bHRzQXJyLCB0aGVTZWFyY2gpO1x0XHRcblx0XHRcdGRpc3BsYXlSZXN1bHRzKHJlc3VsdHNBcnIsIHRoZVNlYXJjaCk7XG5cdFx0XG5cdFx0fVxuXG5cdH0gZWxzZXtcblx0XHRcblx0XHRzb3J0QnlEYXRlKHJlc3VsdHNBcnIpO1xuXHRcdG1heE51bVJlc3VsdHMocmVzdWx0c0FyciwgdGhlU2VhcmNoKTtcblx0XHRkaXNwbGF5UmVzdWx0cyhyZXN1bHRzQXJyLCB0aGVTZWFyY2gpO1xuXHR9XHRcbn07IiwiLy8gdXRpbHNcbnZhciBlbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2Vscy5qcycpO1xudmFyIGxvY2F0aW9uSW5pdGlhbHNUb05hbWUgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2xvY2F0aW9uSW5pdGlhbHNUb05hbWUuanMnKTtcbnZhciB0aGVTZWFyY2ggPSByZXF1aXJlKCcuLy4uL3V0aWxzL3RoZVNlYXJjaC5qcycpO1xudmFyIHJldmVyc2VEYXRlU3RyaW5nID0gcmVxdWlyZSgnLi8uLi91dGlscy9yZXZlcnNlRGF0ZVN0cmluZy5qcycpO1xuXG5cbi8vIHNlYXJjaFxudmFyIGJ1aWxkRG9tRWxzID0gcmVxdWlyZSgnLi9idWlsZERvbUVscy5qcycpO1xuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBkaXNwbGF5UmVzdWx0cyhyZXN1bHRzQXJyLCB0aGVTZWFyY2gpIHtcblx0XG5cdHZhciB0b3RhbFJlc3VsdHMgPSBcIlwiO1xuXHQvLyBpZiBtYXhOdW1SZXN1bHRzIC0gdG90YWxSZXN1bHRzIHdpbGwgYmUgZGlmZmVyZW50IGZyb20gdGhlU2VhcmNoLm51bU9mUmVzdWx0c1xuXHRpZiAodGhlU2VhcmNoLmxpbWl0TnVtKSB7XG5cdFx0dG90YWxSZXN1bHRzID0gMzAwO1xuXHR9IGVsc2Uge1xuXHRcdHRvdGFsUmVzdWx0cyA9IHRoZVNlYXJjaC5udW1PZlJlc3VsdHM7XG5cdH1cblxuXHRcdFxuXHR2YXIgc3VtbWFyaXplRGF0ZVJhbmdlID0gXCJcIjtcblx0aWYgKHRoZVNlYXJjaC5kYXRlcmFuZ2UpIHsgXG5cdFx0Ly8gZm9ybWF0IHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzIGZvciByZWFkaW5nIGJhY2sgd2l0aCByZXZlcnNlRGF0ZVN0cmluZygpXG5cdFx0dmFyIGpzU3RhcnREYXRlID0gdGhlU2VhcmNoLnN0YXJ0ZGF0ZTtcblx0XHR2YXIgdXNlclN0YXJ0RGF0ZSA9IHJldmVyc2VEYXRlU3RyaW5nKGpzU3RhcnREYXRlKTtcblx0XHR2YXIganNFbmREYXRlID0gdGhlU2VhcmNoLmVuZGRhdGU7XG5cdFx0dmFyIHVzZXJFbmR0RGF0ZSA9IHJldmVyc2VEYXRlU3RyaW5nKGpzRW5kRGF0ZSk7XG5cdFx0c3VtbWFyaXplRGF0ZVJhbmdlID0gXCIgZnJvbSBcIiArIHVzZXJTdGFydERhdGUgKyBcIiB0byBcIiArIHVzZXJFbmR0RGF0ZTtcblx0fVxuXG5cdHZhciBoYXNNYXhOdW1iZXIgPSBcIlwiO1xuXHRpZiAodGhlU2VhcmNoLmxpbWl0TnVtKSB7XG5cdFx0aGFzTWF4TnVtYmVyID0gdGhlU2VhcmNoLmxpbWl0TnVtO1xuXHR9IFxuXG5cdHZhciBjaG9zZW5Nb250aCA9IFwiXCI7XG5cdGlmICh0aGVTZWFyY2guYnltb250aCkge1xuXHRcdGlmICh0aGVTZWFyY2guYnltb250aCA9PT0gXCIxXCIpIHtcblx0XHRcdGNob3Nlbk1vbnRoID0gXCIgcmVjb3JkZWQgaW4gSmFudWFyeS4gXCI7XG5cdFx0fSBlbHNlIGlmKHRoZVNlYXJjaC5ieW1vbnRoID09PSBcIjJcIikge1xuXHRcdFx0Y2hvc2VuTW9udGggPSBcIiByZWNvcmRlZCBpbiBGZWJ1YXJ5LiBcIjtcblx0XHR9IGVsc2UgaWYodGhlU2VhcmNoLmJ5bW9udGggPT09IFwiM1wiKSB7XG5cdFx0XHRjaG9zZW5Nb250aCA9IFwiIHJlY29yZGVkIGluIE1hcmNoLiBcIjtcblx0XHR9IGVsc2UgaWYodGhlU2VhcmNoLmJ5bW9udGggPT09IFwiNFwiKSB7XG5cdFx0XHRjaG9zZW5Nb250aCA9IFwiIHJlY29yZGVkIGluIEFwcmlsLiBcIjtcblx0XHR9IGVsc2UgaWYodGhlU2VhcmNoLmJ5bW9udGggPT09IFwiNVwiKSB7XG5cdFx0XHRjaG9zZW5Nb250aCA9IFwiIHJlY29yZGVkIGluIE1heS4gXCI7XG5cdFx0fSBlbHNlIGlmKHRoZVNlYXJjaC5ieW1vbnRoID09PSBcIjZcIikge1xuXHRcdFx0Y2hvc2VuTW9udGggPSBcIiByZWNvcmRlZCBpbiBKdW5lLiBcIjtcblx0XHR9IGVsc2UgaWYodGhlU2VhcmNoLmJ5bW9udGggPT09IFwiN1wiKSB7XG5cdFx0XHRjaG9zZW5Nb250aCA9IFwiIHJlY29yZGVkIGluIEp1bHkuIFwiO1xuXHRcdH0gZWxzZSBpZih0aGVTZWFyY2guYnltb250aCA9PT0gXCI4XCIpIHtcblx0XHRcdGNob3Nlbk1vbnRoID0gXCIgcmVjb3JkZWQgaW4gQXVndXN0LiBcIjtcblx0XHR9IGVsc2UgaWYodGhlU2VhcmNoLmJ5bW9udGggPT09IFwiOVwiKSB7XG5cdFx0XHRjaG9zZW5Nb250aCA9IFwiIHJlY29yZGVkIGluIFNlcHRlbWJlci4gXCI7XG5cdFx0fSBlbHNlIGlmKHRoZVNlYXJjaC5ieW1vbnRoID09PSBcIjEwXCIpIHtcblx0XHRcdGNob3Nlbk1vbnRoID0gXCIgcmVjb3JkZWQgaW4gT2N0b2Jlci4gXCI7XG5cdFx0fSBlbHNlIGlmKHRoZVNlYXJjaC5ieW1vbnRoID09PSBcIjExXCIpIHtcblx0XHRcdGNob3Nlbk1vbnRoID0gXCIgcmVjb3JkZWQgaW4gTm92ZW1iZXIuIFwiO1xuXHRcdH0gZWxzZSBpZih0aGVTZWFyY2guYnltb250aCA9PT0gXCIxMlwiKSB7XG5cdFx0XHRjaG9zZW5Nb250aCA9IFwiIHJlY29yZGVkIGluIERlY2VtYmVyLiBcIjtcblx0XHR9XG5cdH1cblxuXHR0aGVTZWFyY2gubG9jID0gbG9jYXRpb25Jbml0aWFsc1RvTmFtZSh0aGVTZWFyY2gubG9jKTtcblxuXHR2YXIgcmVhZEJhY2tSZXN1bHRzID0gXCI8Yj5cIiArIHRoZVNlYXJjaC5udW1PZlJlc3VsdHMgKyBcIiByZWNvcmRzIGZvciBcIiArIHRoZVNlYXJjaC5zcGVjaWVzICsgXCIgYXQgXCIgKyB0aGVTZWFyY2gubG9jICsgXCIsIFwiICtzdW1tYXJpemVEYXRlUmFuZ2UgKyBcIiBcIiArIGNob3Nlbk1vbnRoICsgXCIgXCIgKyBoYXNNYXhOdW1iZXIgKyBcIjwvYj5cIjtcblxuXHQkKHJlYWRCYWNrUmVzdWx0cykuYXBwZW5kVG8oZWxzLnNlYXJjaFN1bW1hcnkpO1x0XHRcblxuXHRidWlsZERvbUVscyh0b3RhbFJlc3VsdHMsIHJlc3VsdHNBcnIpO1xuXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgZWxzLm92ZXJsYXkucmVtb3ZlQ2xhc3MoJ2xvYWRpbmcnKTsgfSwgNTAwKTtcbn07IiwiLy8gdXRpbHNcbnZhciBlbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2Vscy5qcycpO1xudmFyIGVtcHR5TGlzdCA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvZW1wdHlMaXN0LmpzJyk7XG52YXIgdGhlU2VhcmNoID0gcmVxdWlyZSgnLi8uLi91dGlscy90aGVTZWFyY2guanMnKTtcblxuXG4vLyBzZWFyY2hcbnZhciBkYXRlUmFuZ2UgPSByZXF1aXJlKCcuLy4uL3NlYXJjaC9kYXRlUmFuZ2UuanMnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5KHJlc3VsdHMpIHtcblxuXHRlbXB0eUxpc3QoKTtcblxuXHQvLyBjbGVhciBhcnJpdmFsIGFuZCBkZXBhcnR1cmVzIHJhZGlvIGlucHV0c1xuXHQkKFwiLmFycml2ZS1kZXBhcnRcIikucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcblxuXHR2YXIgbGVuID0gcmVzdWx0cy5kYXRhLmxlbmd0aCAtIDE7XHRcdFx0XG5cdHZhciBpbmRleCA9IDA7XG5cdHZhciByZXN1bHRzQXJyID0gW107XG5cdHZhciBsb2NhdGlvblNlYXJjaCA9ICQoJyNsb2NhdGlvblNlYXJjaCcpLnZhbCgpO1xuXHR2YXIgc3BlY2llc1NlYXJjaCA9ICQoJy5zcGVjaWVzU2VhcmNoJykuc2VsZWN0aXZpdHkoJ3ZhbHVlJyk7XG5cdC8vIHZhciB0aGVTZWFyY2ggPSB7fTtcblxuXG5cdGlmICghc3BlY2llc1NlYXJjaCAmJiAhbG9jYXRpb25TZWFyY2gpIHtcblxuXHRcdGZvciAodmFyIGNvdW50ZXIgPSAwOyBjb3VudGVyIDwgbGVuOyBjb3VudGVyKyspIHtcblx0XHRcdHJlc3VsdHNBcnIucHVzaChyZXN1bHRzLmRhdGFbY291bnRlcl0pO1xuXHRcdFx0aW5kZXgrKzsgXG5cdFx0fVxuXHRcdFx0XHRcdFxuXHRcdHRoZVNlYXJjaC5zcGVjaWVzID0gXCJhbGwgc3BlY2llc1wiO1xuXHRcdHRoZVNlYXJjaC5sb2MgPSBcImFsbCBsb2NhdGlvbnNcIjtcblx0XHRcblx0fSBcdGVsc2UgaWYgKHNwZWNpZXNTZWFyY2ggJiYgbG9jYXRpb25TZWFyY2gpIHtcblxuXHRcdFx0Zm9yICh2YXIgaW5kID0gMDsgaW5kIDwgbGVuOyBpbmQrKykge1x0XHRcdFx0XG5cdFx0XHRcdGlmIChyZXN1bHRzLmRhdGFbaW5kXS5zcGVjaWVzID09PSBzZWFyY2ggJiYgcmVzdWx0cy5kYXRhW2luZF0ubG9jYXRpb24gPT09IGxvY2F0aW9uU2VhcmNoKSB7XG5cdFx0XHRcdFx0cmVzdWx0c0Fyci5wdXNoKHJlc3VsdHMuZGF0YVtpbmRdKTtcblx0XHRcdFx0XHRpbmRleCsrOyBcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcblx0XHRcdHRoZVNlYXJjaC5zcGVjaWVzID0gc3BlY2llc1NlYXJjaDtcblx0XHRcdHRoZVNlYXJjaC5sb2MgPSBsb2NhdGlvblNlYXJjaDtcblx0XHRcdFxuXHR9XHRlbHNlIGlmIChzcGVjaWVzU2VhcmNoKSB7XG5cdFx0XG5cdFx0XHRmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHRcdFx0XHRcblx0XHRcdFx0aWYgKHJlc3VsdHMuZGF0YVtpXS5zcGVjaWVzID09PSBzZWFyY2gpIHtcblx0XHRcdFx0XHRyZXN1bHRzQXJyLnB1c2gocmVzdWx0cy5kYXRhW2ldKTtcblx0XHRcdFx0XHRpbmRleCsrOyBcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcblx0XHRcdHRoZVNlYXJjaC5zcGVjaWVzID0gc3BlY2llc1NlYXJjaDtcblx0XHRcdHRoZVNlYXJjaC5sb2MgPSBcImFsbCBsb2NhdGlvbnNcIjtcblx0XHRcdFxuXG5cdH1cdGVsc2UgaWYgKGxvY2F0aW9uU2VhcmNoKSB7XG5cblx0XHRcdGZvciAodmFyIGNvdW50ID0gMDsgY291bnQgPCBsZW47IGNvdW50KyspIHtcdFx0XHRcdFxuXHRcdFx0XHRpZiAocmVzdWx0cy5kYXRhW2NvdW50XS5sb2NhdGlvbiA9PT0gbG9jYXRpb25TZWFyY2gpIHtcblx0XHRcdFx0XHRyZXN1bHRzQXJyLnB1c2gocmVzdWx0cy5kYXRhW2NvdW50XSk7XG5cdFx0XHRcdFx0aW5kZXgrKzsgXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHR0aGVTZWFyY2guc3BlY2llcyA9IFwiYWxsIHNwZWNpZXNcIjtcblx0XHRcdHRoZVNlYXJjaC5sb2MgPSBsb2NhdGlvblNlYXJjaDtcdFx0XHRcdFxuXHR9XG5cblx0dGhlU2VhcmNoLm51bU9mUmVzdWx0cyA9IGluZGV4O1xuXHRkYXRlUmFuZ2UocmVzdWx0c0FyciwgdGhlU2VhcmNoKTtcblxufTtcblxuXG4iLCIvLyB1dGlsc1xudmFyIGxvY2F0aW9uSW5pdGlhbHNUb05hbWUgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2xvY2F0aW9uSW5pdGlhbHNUb05hbWUuanMnKTtcbnZhciBlbHMgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2Vscy5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGJ1aWxkRm9ybUVscyAocmVzdWx0cykge1xuXG5cdHZhciBsb2NhdGlvbkFycmF5ID0gW107XG5cdHZhciBzcGVjaWVzQXJyYXkgPSBbXTtcblx0dmFyIGwgPSByZXN1bHRzLmRhdGEubGVuZ3RoIC0gMTtcdFx0XG5cblx0Zm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IGw7IGluZGV4KyspIHtcdFx0XG5cdFx0dmFyIGN1cnJlbnRMb2NhdGlvbiA9IHJlc3VsdHMuZGF0YVtpbmRleF0ubG9jYXRpb247XG5cdFx0dmFyIGN1cnJlbnRTcGVjaWVzID0gcmVzdWx0cy5kYXRhW2luZGV4XS5zcGVjaWVzO1xuXG5cdFx0aWYgKCQuaW5BcnJheShjdXJyZW50TG9jYXRpb24sIGxvY2F0aW9uQXJyYXkpID09PSAtMSl7XG5cdFx0XHRsb2NhdGlvbkFycmF5LnB1c2goY3VycmVudExvY2F0aW9uKTtcblx0XHR9XHRcblxuXHRcdGlmICgkLmluQXJyYXkoY3VycmVudFNwZWNpZXMsIHNwZWNpZXNBcnJheSkgPT09IC0xKXtcblx0XHRcdHNwZWNpZXNBcnJheS5wdXNoKGN1cnJlbnRTcGVjaWVzKTtcblx0XHR9XG5cblx0XHR2YXIgZGF5ID0gcmVzdWx0cy5kYXRhW2luZGV4XS5kYXksXG5cdFx0XHRtb250aCA9IHJlc3VsdHMuZGF0YVtpbmRleF0ubW9udGgsXG5cdFx0XHR5ZWFyID0gcmVzdWx0cy5kYXRhW2luZGV4XS55ZWFyO1xuXG5cdFx0XHRpZiAoZGF5Lmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0XHRkYXkgPSBcIjBcIiArIGRheTtcblx0XHRcdH1cblx0XHRcdGlmIChtb250aC5sZW5ndGggPT09IDEpIHtcblx0XHRcdFx0bW9udGggPSBcIjBcIiArIG1vbnRoO1xuXHRcdFx0fVxuXHRcdFx0XHRcblx0XHRyZXN1bHRzLmRhdGFbaW5kZXhdLmZvcm1hdHRlZF9kYXRlID0geWVhciArIFwiLVwiICsgbW9udGggKyBcIi1cIiArIGRheTsgIC8vIGZvcm1hdCB5eXl5IG0gZFx0XHRcdFx0XHRcblx0fVx0XG5cblxuXHRsb2NhdGlvbkFycmF5LnNvcnQoKTtcdFxuXHR2YXIgY29udmVydGVkTG9jTmFtZSA9IFwiXCI7XHRcblx0Ly8gYnVpbGQgb3B0aW9uIHRhZ3MgLSBhcHBlbmRUbyBsaXN0XG5cdGZvciAodmFyIGkgPSAwOyBpIDwgbG9jYXRpb25BcnJheS5sZW5ndGg7IGkrKykge1xuXHRcdGNvbnZlcnRlZExvY05hbWUgPSBsb2NhdGlvbkluaXRpYWxzVG9OYW1lKGxvY2F0aW9uQXJyYXlbaV0pO1xuXHRcdCQoJzxvcHRpb24gdmFsdWU9XCInICsgbG9jYXRpb25BcnJheVtpXSArICdcIj4nICsgY29udmVydGVkTG9jTmFtZSArICc8L29wdGlvbj4nKS5hcHBlbmRUbyhlbHMubG9jTGlzdCk7XG5cdH1cblxuXHRzcGVjaWVzQXJyYXkuc29ydCgpO1xuXHQvLyBwYXNzIHRvIHNlbGVjdGl2aXR5IHBsdWdpbiBcblx0JChcIi5zcGVjaWVzU2VhcmNoXCIpLnNlbGVjdGl2aXR5KHtcblx0ICAgIGFsbG93Q2xlYXI6IHRydWUsXG5cdCAgICBpdGVtczogc3BlY2llc0FycmF5LFxuXHQgICAgcGxhY2Vob2xkZXI6ICdObyBzcGVjaWVzIHNlbGVjdGVkJ1xuXHR9KTtcdFxuXG5cdGVscy5vdmVybGF5LnJlbW92ZUNsYXNzKCdsb2FkaW5nJyk7XG5cdFxufTtcblxuIiwiLy8gdXRpbHNcbnZhciBsb2NhdGlvbkluaXRpYWxzVG9OYW1lID0gcmVxdWlyZSgnLi8uLi91dGlscy9sb2NhdGlvbkluaXRpYWxzVG9OYW1lLmpzJyk7XG52YXIgZWxzID0gcmVxdWlyZSgnLi8uLi91dGlscy9lbHMuanMnKTtcbnZhciBlbXB0eUxpc3QgPSByZXF1aXJlKCcuLy4uL3V0aWxzL2VtcHR5TGlzdC5qcycpO1xudmFyIHRoZVNlYXJjaCA9IHJlcXVpcmUoJy4vLi4vdXRpbHMvdGhlU2VhcmNoLmpzJyk7XG5cbi8vIHNlYXJjaFxudmFyIGdlbmVyYXRlUXVlcnkgPSByZXF1aXJlKCcuLy4uL3NlYXJjaC9nZW5lcmF0ZVF1ZXJ5LmpzJyk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzZXRVcEV2ZW50cyhyZXN1bHRzKSB7XG5cblx0dmFyIGFkZExvYWRpbmdDbGFzcyA9IGZ1bmN0aW9uKCl7XG5cdCAgdmFyIGQgPSAkLkRlZmVycmVkKCk7XG5cdCAgICBlbHMub3ZlcmxheS5hZGRDbGFzcygnbG9hZGluZycpO1xuXHQgICAgZC5yZXNvbHZlKCk7XG5cdCAgXHRyZXR1cm4gZC5wcm9taXNlKCk7XG5cdH07XG5cblxuXHR2YXIgZmlyZUdlblEgPSBmdW5jdGlvbigpe1xuXHQgIHZhciBkID0gJC5EZWZlcnJlZCgpO1xuXHQgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdCAgICBnZW5lcmF0ZVF1ZXJ5KHJlc3VsdHMsIHRoZVNlYXJjaCk7XG5cdCAgICBkLnJlc29sdmUoKTtcblx0ICB9LCAxMDApO1xuXHQgIHJldHVybiBkLnByb21pc2UoKTtcblx0fTtcblxuXHQvLyBFVkVOVFNcblx0Ly8gY2xlYXIgcmVzdWx0cyBtYW5hdWxseVxuXHQkKFwiLnNwZWNpZXNTZWFyY2hcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24oZSkge1x0XG5cdFx0c2VhcmNoID0gJCgnLnNwZWNpZXNTZWFyY2gnKS5zZWxlY3Rpdml0eSgndmFsdWUnKTtcblx0XHRcblx0XHRpZiAoIXNlYXJjaCkge1xuXHRcdFx0Ly8gY2hhbmdlIHRvIHJlc2V0QWxsKClcblx0XHRcdGVtcHR5TGlzdCgpO1xuXG5cdFx0XHRlbHMuc3BlY2llc0g0Lmh0bWwoXCJcIik7XG5cdFx0XHRlbHMucmFkaW9JbnB1dHMucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcblx0XHRcdGlmICh3aW5kb3cubXlCYXIpIHtcblx0XHRcdFx0bXlCYXIuY2xlYXIoKTtcblx0XHRcdH1cblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRlbHMuc3BlY2llc0g0Lmh0bWwoXCI6IFwiICsgc2VhcmNoKTtcblx0XHR9XG5cblx0fSk7XG5cblxuXHQkKCcjc3VibWl0Jykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1x0XG5cdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdGFkZExvYWRpbmdDbGFzcygpLnBpcGUoZmlyZUdlblEpO1xuXHR9KTtcblxufTtcblxuIiwidmFyIGVscyA9IHtcblx0b3ZlcmxheSA6ICQoJy5vdmVybGF5JyksXG5cdHNlYXJjaCA6IFwiXCIsXG5cdGxvY0xpc3QgOiAkKCcjbG9jYXRpb25TZWFyY2gnKSxcblx0cmVzdWx0c0xpc3QgOiAkKCcjcmVzdWx0cycpLFxuXHRyZXN1bHRzTGlzdF8yIDogJCgnI3Jlc3VsdHNfMicpLFxuXHRzZWFyY2hTdW1tYXJ5IDogJCgnI3NlYXJjaC1zdW1tYXJ5JyksXG5cdHJhZGlvSW5wdXRzIDogJCgnaW5wdXRbdHlwZT1cInJhZGlvXCJdJyksXG5cdHNwZWNpZXNINCA6ICQoJyNzcC1uYW1lJylcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gZWxzOyIsInZhciBlbHMgPSByZXF1aXJlKCcuL2Vscy5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVtcHR5TGlzdCgpIHtcblxuXHRlbHMucmVzdWx0c0xpc3QuZmluZCgndGJvZHkgdGQnKS5yZW1vdmUoKTtcdFx0XG5cdGVscy5zZWFyY2hTdW1tYXJ5Lmh0bWwoJ1Jlc3VsdHM6ICcpO1xuXHQkKCcuc29ydC1pY29uJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXHRlbHMucmVzdWx0c0xpc3RfMi5maW5kKCd0Ym9keSB0ZCcpLnJlbW92ZSgpO1xuXG59OyIsInZhciBlbHMgPSByZXF1aXJlKCcuL2Vscy5qcycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGVzY2FwZURhdGVGdW4oKSB7XG5cdGFsZXJ0KCdJbnZhbGlkIGRhdGUgcmFuZ2UuJyk7XG5cdGVscy5vdmVybGF5LnJlbW92ZUNsYXNzKCdsb2FkaW5nJyk7XG5cdHJldHVybiBmYWxzZTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBsb2NhdGlvbkluaXRpYWxzVG9OYW1lKGxvY2F0aW9uSW5pdGlhbHMpIHtcblx0aWYgKGxvY2F0aW9uSW5pdGlhbHMgPT09IFwiQlNcIikge1xuXHRcdGxvY2F0aW9uSW5pdGlhbHMgPSBcIkJsYWNrIFN3YW4gTGFrZVwiO1xuXHRcdHJldHVybiBsb2NhdGlvbkluaXRpYWxzO1xuXHR9IGVsc2UgaWYobG9jYXRpb25Jbml0aWFscyA9PT0gXCJEUFwiKSB7XG5cdFx0bG9jYXRpb25Jbml0aWFscyA9IFwiRGludG9uIFBhc3R1cmVzXCI7XG5cdFx0cmV0dXJuIGxvY2F0aW9uSW5pdGlhbHM7XG5cblx0fSBlbHNlIGlmKGxvY2F0aW9uSW5pdGlhbHMgPT09IFwiTEZcIikge1xuXHRcdGxvY2F0aW9uSW5pdGlhbHMgPSBcIkxlYSBGYXJtIExha2VcIjtcblx0XHRyZXR1cm4gbG9jYXRpb25Jbml0aWFscztcblxuXHR9IGVsc2UgaWYobG9jYXRpb25Jbml0aWFscyA9PT0gXCJMTFwiKSB7XG5cdFx0bG9jYXRpb25Jbml0aWFscyA9IFwiTGF2ZWxsJ3MgTGFrZVwiO1xuXHRcdHJldHVybiBsb2NhdGlvbkluaXRpYWxzO1xuXG5cdH0gZWxzZSBpZihsb2NhdGlvbkluaXRpYWxzID09PSBcIk1NXCIpIHtcblx0XHRsb2NhdGlvbkluaXRpYWxzID0gXCJNaWRkbGUgTWFyc2hcIjtcblx0XHRyZXR1cm4gbG9jYXRpb25Jbml0aWFscztcblxuXHR9IGVsc2UgaWYobG9jYXRpb25Jbml0aWFscyA9PT0gXCJNT1wiKSB7XG5cdFx0bG9jYXRpb25Jbml0aWFscyA9IFwiTW9ydGltZXIncyBNZWFkb3dcIjtcblx0XHRyZXR1cm4gbG9jYXRpb25Jbml0aWFscztcblxuXHR9IGVsc2UgaWYobG9jYXRpb25Jbml0aWFscyA9PT0gXCJTQVwiKSB7XG5cdFx0bG9jYXRpb25Jbml0aWFscyA9IFwiU2FuZGZvcmQgTGFrZVwiO1xuXHRcdHJldHVybiBsb2NhdGlvbkluaXRpYWxzO1xuXG5cdH0gZWxzZSBpZihsb2NhdGlvbkluaXRpYWxzID09PSBcIldTXCIpIHtcblx0XHRsb2NhdGlvbkluaXRpYWxzID0gXCJXaGl0ZSBTd2FuIExha2VcIjtcblx0XHRyZXR1cm4gbG9jYXRpb25Jbml0aWFscztcblx0fSBlbHNlIGlmKGxvY2F0aW9uSW5pdGlhbHMgPT09IFwiYWxsIGxvY2F0aW9uc1wiKSB7XG5cdFx0bG9jYXRpb25Jbml0aWFscyA9IFwiYWxsIGxvY2F0aW9uc1wiO1xuXHRcdHJldHVybiBsb2NhdGlvbkluaXRpYWxzO1xuXHR9XG59O1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBtYXhOdW1SZXN1bHRzKHJlc3VsdHNBcnIsIHRoZVNlYXJjaCkge1xuXHQvLyB0aGlzIGlzIHdoZXJlIGxhenlsYWRpbmcgb3IgcGFnaW5hdGlvbiBzaG91bGQgaGFwcGVuXG5cdGlmICh0aGVTZWFyY2gubnVtT2ZSZXN1bHRzID4gMjAwMCkge1xuXHRcdHRoZVNlYXJjaC5saW1pdE51bSA9IFwiRGlzcGxheWluZyB0aGUgbW9zdCByZWNlbnQgMjAwMCByZWNvcmRzLlwiO1x0XHRcblx0XHRyZXN1bHRzQXJyID0gcmVzdWx0c0Fyci5zbGljZSgwLCAyMDAwKTtcblx0fSBcdFxufTsiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHJldmVyc2VEYXRlU3RyaW5nKGRhdGVTdHJpbmcpIHtcblx0ZGF0ZVN0cmluZyA9IGRhdGVTdHJpbmcuc3BsaXQoJy0nKTtcdFx0XG5cdGRhdGVTdHJpbmcgPSBkYXRlU3RyaW5nWzJdICsgXCItXCIgKyBkYXRlU3RyaW5nWzFdICsgXCItXCIgKyBkYXRlU3RyaW5nWzBdO1xuXHRyZXR1cm4gZGF0ZVN0cmluZztcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBzb3J0QnlEYXRlKHJlc3VsdHNBcnIsIHRoZVNlYXJjaCkge1xuXHRyZXN1bHRzQXJyLnNvcnQoZnVuY3Rpb24oYSwgYil7XG5cdCBcdHZhciBkYXRlQSA9IG5ldyBEYXRlKGEuZm9ybWF0dGVkX2RhdGUpLCBcblx0IFx0XHRkYXRlQiA9IG5ldyBEYXRlKGIuZm9ybWF0dGVkX2RhdGUpO1xuXHQgXHRyZXR1cm4gZGF0ZUIgLSBkYXRlQTsgLy9zb3J0IGJ5IGRhdGUgZGVjZW5kaW5nXG5cdH0pO1xufTtcbiIsInZhciB0aGVTZWFyY2ggPSB7fTtcblxubW9kdWxlLmV4cG9ydHMgPSB0aGVTZWFyY2g7Il19
